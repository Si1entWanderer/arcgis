(this.webpackJsonparcgis=this.webpackJsonparcgis||[]).push([[39],{1155:function(t,e,r){"use strict";r.r(e),r.d(e,"loadGLTFMesh",(function(){return k}));var n=r(13),c=r(8),a=r.n(c),o=r(16),u=r(49),s=r(99),i=r(3),l=r(67),b=r(96),f=r(9),j=r(43),O=r(599),p=r(478),d=r(361),m=r(600),v=r(32),x=r(178),g=r(535),h=r(341),w=r(776),y=r(491),C=r(494),A=r(536),B=r(150),T=r(367),M=r(374),F=r(425),I=r(479);function k(t,e,r){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(a.a.mark((function t(e,r,c){var o,u,s,l,b,f,j,O,p,d,v,x,g,h,A,B,T;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new y.a(S(c)),t.next=3,Object(C.a)(o,r,c,!0);case 3:u=t.sent.model,s=u.lods.shift(),l=new Map,b=new Map,u.textures.forEach((function(t,e){return l.set(e,R(t))})),u.materials.forEach((function(t,e){return b.set(e,N(t,l))})),f=J(s),j=Object(n.a)(s.parts);try{for(j.s();!(O=j.n()).done;)p=O.value,q(f,p,b)}catch(a){j.e(a)}finally{j.f()}return d=f.vertexAttributes,v=d.position,x=d.normal,g=d.tangent,h=d.color,A=d.texCoord0,B={position:v.typedBuffer,normal:Object(i.j)(x)?x.typedBuffer:null,tangent:Object(i.j)(g)?g.typedBuffer:null,uv:Object(i.j)(A)?A.typedBuffer:null,color:Object(i.j)(h)?h.typedBuffer:null},T=Object(w.c)(B,e,c),t.abrupt("return",{transform:T.transform,components:f.components,spatialReference:e.spatialReference,vertexAttributes:new m.c({position:T.vertexAttributes.position,normal:T.vertexAttributes.normal,tangent:T.vertexAttributes.tangent,color:B.color,uv:B.uv})});case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t){return null!=t&&t.resolveFile?{busy:!1,request:function(){var e=Object(o.a)(a.a.mark((function e(r,n,c){var o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.resolveFile(r),u="image"===n?"image":"binary"===n?"array-buffer":"json",e.next=3,Object(s.default)(o,{responseType:u,signal:Object(i.j)(c)?c.signal:null});case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}:null}function J(t){var e,r=0,c={color:!1,tangent:!1,normal:!1,texCoord0:!1},a=Object(n.a)(t.parts);try{for(a.s();!(e=a.n()).done;){var o=e.value.attributes,u=o.position,s=o.normal,i=o.color,l=o.tangent,b=o.texCoord0;r+=u.count,s&&(c.normal=!0),i&&(c.color=!0),l&&(c.tangent=!0),b&&(c.texCoord0=!0)}}catch(f){a.e(f)}finally{a.f()}return{writeIndex:0,vertexAttributes:{position:Object(h.a)(v.v,r),normal:c.normal?Object(h.a)(v.u,r):null,tangent:c.tangent?Object(h.a)(v.C,r):null,color:c.color?Object(h.a)(v.J,r):null,texCoord0:c.texCoord0?Object(h.a)(v.m,r):null},components:[]}}function R(t){return new d.a({data:t.data,wrap:L(t.parameters.wrap)})}function N(t,e){var r,n=new u.a(function(t,e){return Object(j.g)(G(t[0]),G(t[1]),G(t[2]),e)}(t.color,t.opacity)),c=t.emissiveFactor?new u.a((r=t.emissiveFactor,Object(f.g)(G(r[0]),G(r[1]),G(r[2])))):null;return new p.a({color:n,colorTexture:Object(i.s)(Object(i.c)(t.textureColor,(function(t){return e.get(t)}))),normalTexture:Object(i.s)(Object(i.c)(t.textureNormal,(function(t){return e.get(t)}))),emissiveColor:c,emissiveTexture:Object(i.s)(Object(i.c)(t.textureEmissive,(function(t){return e.get(t)}))),occlusionTexture:Object(i.s)(Object(i.c)(t.textureOcclusion,(function(t){return e.get(t)}))),alphaMode:z(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:Object(i.s)(Object(i.c)(t.textureMetallicRoughness,(function(t){return e.get(t)})))})}function q(t,e,r){var n=t.vertexAttributes,c=n.position,a=n.normal,o=n.tangent,u=n.color,s=n.texCoord0,f=t.writeIndex,j=e.attributes.position.count;if(Object(x.e)(c.slice(f,j),e.attributes.position,e.transform),Object(i.j)(e.attributes.normal)&&Object(i.j)(a)){var p=Object(l.a)(Object(b.b)(),e.transform);Object(x.a)(a.slice(f,j),e.attributes.normal,p)}else Object(i.j)(a)&&Object(M.b)(a,0,0,1,{dstIndex:f,count:j});if(Object(i.j)(e.attributes.tangent)&&Object(i.j)(o)){var d=Object(l.a)(Object(b.b)(),e.transform);Object(g.c)(o.slice(f,j),e.attributes.tangent,d)}else Object(i.j)(o)&&Object(F.b)(o,0,0,1,1,{dstIndex:f,count:j});if(Object(i.j)(e.attributes.texCoord0)&&Object(i.j)(s)?Object(I.b)(s.slice(f,j),e.attributes.texCoord0):Object(i.j)(s)&&Object(I.a)(s,0,0,{dstIndex:f,count:j}),Object(i.j)(e.attributes.color)&&Object(i.j)(u)){var m=e.attributes.color,h=u.slice(f,j);if(4===m.elementCount)m instanceof v.C?Object(g.b)(h,m,255):m instanceof v.J?Object(F.a)(h,m):m instanceof v.H&&Object(g.a)(h,m,8);else{Object(F.b)(h,255,255,255,255);var w=v.B.fromTypedArray(h.typedBuffer,h.typedBufferStride);m instanceof v.u?Object(x.d)(w,m,255):m instanceof v.B?Object(M.a)(w,m):m instanceof v.z&&Object(x.b)(w,m,8)}}else Object(i.j)(u)&&Object(F.b)(u.slice(f,j),255,255,255,255);var y=function(t,e){switch(e){case 4:return Object(A.c)(t,B.e);case 5:return Object(A.b)(t);case 6:return Object(A.a)(t)}}(e.indices||j,e.primitiveType);if(f)for(var C=0;C<y.length;C++)y[C]+=f;t.components.push(new O.a({faces:y,material:r.get(e.material).clone(),trustSourceNormals:!0})),t.writeIndex+=j}function z(t){switch(t){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function L(t){return{horizontal:D(t.s),vertical:D(t.t)}}function D(t){switch(t){case 33071:return"clamp";case 33648:return"mirror";case 10497:return"repeat"}}function G(t){return 255*Math.pow(t,1/T.a)}}}]);
//# sourceMappingURL=39.874d6794.chunk.js.map