{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/centroid.js","../node_modules/@arcgis/core/chunks/quickselect.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js","../node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DGraphicLikeLayerView.js"],"names":["n","t","I","o","u","l","lengths","length","N","originPosition","coords","s","c","f","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","i","T","h","g","e","push","sort","r","b","E","m","Math","sqrt","exports","a","log","M","exp","v","max","floor","min","x","p","this","items","type","objectStateId","object","renderGeometry","owner","remove","_removeObjectStateItem","splice","forEach","channel","removeHighlight","removeOcclude","removeRenderGeometryObjectState","stateType","objectIdField","objectStateSet","ids","Set","paused","graphic","attributes","has","uid","_graphicsCore","_stateSets","Array","removeAll","releaseSet","set","handle","indexOf","addObjectStateSet","removeObjectState","add","graphics3DGraphics","get","_addObjectStateSet","setUid","initializeSet","hasGraphic","_removeObjectStateSet","states","_extents","allocator","_tmpExtent","_dirty","clear","contains","removeContained","pushNew","mergeTight","pop","hasProgressed","done","getItemAt","delete","d","madeProgress","some","filterInPlace","containsPoint","arguments","dirtyExtents","globalDirty","averageExtentUpdateSize","dirtyGraphicsSet","handles","updateElevation","layerView","graphicsCore","events","queryGraphicUIDsInExtent","elevationProvider","view","resourceController","scheduler","on","_elevationChanged","watch","suspendedChange","registerTask","ELEVATION_ALIGNMENT","destroy","notifyChange","suspended","running","size","empty","markAllGraphicsElevationDirty","run","merge","_updateDirtyGraphics","_updateDirtyExtents","deconflictor","setDirty","renderCoordsHelper","effectiveUpdatePolicy","keys","getGraphics3DGraphicById","alignWithElevation","spatialReference","emit","extent","needsElevationUpdates","context","layer","elevationInfo","mode","computedExtent","xmin","xmax","ymin","ymax","readOnly","prototype","elevationAlignment","watchUpdatingTracking","S","suspendResumeExtent","scaleVisibilityEnabled","w","preferredUpdatePolicy","graphicSymbolSupported","scaleVisibility","layerMinMaxScaleChangeHandler","addPromise","elevationInfoChange","spatialIndex","setup","basemapTerrain","_set","j","objectStates","destroyed","updateClippingExtent","setupSuspendResumeExtent","startCreateGraphics","updating","loadedGraphics","find","whenGraphicBounds","Promise","reject","computeAttachmentOrigin","getSymbolLayerSize","acquireSet","highlight","toArray","isArray","map","setUids","setObjectIds","clippingArea","setClippingExtent","recreateAllGraphics","C","y","extentPadding","setExtent","updateSuspendResumeExtent","constructOnly","aliasOf","pause","resume"],"mappings":"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","file":"static/js/26.2a543271.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(t,I,o,u,l){if(!I||!I.lengths.length)return null;const N=\"upperLeft\"===(null==l?void 0:l.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const s=t.coords,c=[],f=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:i,coords:T}=I,h=n(o,u);let g=0;for(const n of i){const t=e(f,T,g,n,o,u,N);t&&c.push(t),g+=n*h}if(c.sort(((n,t)=>{let e=N*n[2]-N*t[2];return 0===e&&o&&(e=n[4]-t[4]),e})),c.length){let n=6*c[0][2];s[0]=c[0][0]/n,s[1]=c[0][1]/n,o&&(n=6*c[0][4],s[2]=0!==n?c[0][3]/n:0),(s[0]<f[0]||s[0]>f[1]||s[1]<f[2]||s[1]>f[3]||o&&(s[2]<f[4]||s[2]>f[5]))&&(s.length=0)}if(!s.length){const n=I.lengths[0]?r(T,0,i[0],o,u):null;if(!n)return null;s[0]=n[0],s[1]=n[1],o&&n.length>2&&(s[2]=n[2])}return t}function e(t,e,r,I,o,u,l=1){const N=n(o,u);let s=r,c=r+N,f=0,i=0,T=0,h=0,g=0;for(let n=0,b=I-1;n<b;n++,s+=N,c+=N){const n=e[s],r=e[s+1],I=e[s+2],u=e[c],l=e[c+1],N=e[c+2];let E=n*l-u*r;h+=E,f+=(n+u)*E,i+=(r+l)*E,o&&(E=n*N-u*I,T+=(I+N)*E,g+=E),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),r<t[2]&&(t[2]=r),r>t[3]&&(t[3]=r),o&&(I<t[4]&&(t[4]=I),I>t[5]&&(t[5]=I))}if(h*l>0&&(h*=-1),g*l>0&&(g*=-1),!h)return null;const E=[f,i,.5*h];return o&&(E[3]=T,E[4]=.5*g),E}function r(t,e,r,N,s){const c=n(N,s);let f=e,i=e+c,T=0,h=0,g=0,E=0;for(let n=0,b=r-1;n<b;n++,f+=c,i+=c){const n=t[f],e=t[f+1],r=t[f+2],s=t[i],c=t[i+1],b=t[i+2],m=N?o(n,e,r,s,c,b):I(n,e,s,c);if(m)if(T+=m,N){const t=l(n,e,r,s,c,b);h+=m*t[0],g+=m*t[1],E+=m*t[2]}else{const t=u(n,e,s,c);h+=m*t[0],g+=m*t[1]}}return T>0?N?[h/T,g/T,E/T]:[h/T,g/T]:r>0?N?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function I(n,t,e,r){const I=e-n,o=r-t;return Math.sqrt(I*I+o*o)}function o(n,t,e,r,I,o){const u=r-n,l=I-t,N=o-e;return Math.sqrt(u*u+l*l+N*N)}function u(n,t,e,r){return[n+.5*(e-n),t+.5*(r-t)]}function l(n,t,e,r,I,o){return[n+.5*(r-n),t+.5*(I-t),e+.5*(o-e)]}export{t as getCentroidOptimizedGeometry,r as lineCentroid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nvar r,t,o={exports:{}};r=o,void 0!==(t=function(){function r(r,o,n,f,e){t(r,o,n||0,f||r.length-1,e||a)}function t(r,a,n,f,e){for(;f>n;){if(f-n>600){var h=f-n+1,i=a-n+1,u=Math.log(h),M=.5*Math.exp(2*u/3),v=.5*Math.sqrt(u*M*(h-M)/h)*(i-h/2<0?-1:1);t(r,a,Math.max(n,Math.floor(a-i*M/h+v)),Math.min(f,Math.floor(a+(h-i)*M/h+v)),e)}var x=r[a],c=n,p=f;for(o(r,n,a),e(r[f],x)>0&&o(r,n,f);c<p;){for(o(r,c,p),c++,p--;e(r[c],x)<0;)c++;for(;e(r[p],x)>0;)p--}0===e(r[n],x)?o(r,n,p):o(r,++p,f),p<=a&&(n=p+1),a<=p&&(f=p-1)}}function o(r,t,o){var a=r[t];r[t]=r[o],r[o]=a}function a(r,t){return r<t?-1:r>t?1:0}return r}())&&(r.exports=t);var a=o.exports;export{a as q};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nclass e{constructor(){this.items=[]}addObject(e,t){this.items.push({type:0,objectStateId:t,object:e})}addRenderGeometry(e,t,s){this.items.push({type:1,objectStateId:t,renderGeometry:e,owner:s})}addExternal(e,t){this.items.push({type:2,objectStateId:t,remove:e})}remove(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];s.objectStateId===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeObject(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];0===s.type&&s.object===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeRenderGeometry(e){for(let t=this.items.length-1;t>=0;--t){const s=this.items[t];1===s.type&&s.renderGeometry===e&&(this._removeObjectStateItem(s),this.items.splice(t,1))}}removeAll(){this.items.forEach((e=>{this._removeObjectStateItem(e)})),this.items=[]}_removeObjectStateItem(e){switch(e.type){case 0:0===e.objectStateId.channel?e.object.removeHighlight(e.objectStateId):1===e.objectStateId.channel&&e.object.removeOcclude(e.objectStateId);break;case 1:e.owner.removeRenderGeometryObjectState(e.renderGeometry,e.objectStateId);break;case 2:e.remove(e.objectStateId)}}}export{e as Object3DStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{Object3DStateSet as t}from\"../../webgl-engine/lib/Object3DStateSet.js\";class e{constructor(e,i){this.stateType=e,this.objectIdField=i,this.objectStateSet=new t,this.ids=new Set,this.paused=!1}hasGraphic(t){if(this.objectIdField){const e=t.graphic.attributes[this.objectIdField];return this.ids.has(e)}return this.ids.has(t.graphic.uid)}}export{e as Graphics3DObjectStateSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{makeHandle as t}from\"../../../../core/handleUtils.js\";import{Graphics3DObjectStateSet as e}from\"./Graphics3DObjectStateSet.js\";class s{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets=null}acquireSet(s,a){const i=new e(s,a);this._stateSets.push(i);const h=t((()=>this.releaseSet(i)));return{set:i,handle:h}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}_addObjectStateSet(t,e){t.addObjectStateSet(e.stateType,e.objectStateSet)}_removeObjectStateSet(t,e){t.removeObjectState(e.objectStateSet)}setUid(t,e){t.ids.add(e);const s=this._graphicsCore.graphics3DGraphics.get(e);s&&this._addObjectStateSet(s,t)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this.initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&this._addObjectStateSet(t,e)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&this._removeObjectStateSet(t,e)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&this._addObjectStateSet(e,t)})):t.ids.forEach((s=>{const a=e.get(s);a&&this._addObjectStateSet(a,t)}))}get test(){return{states:this._stateSets}}}export{s as Graphics3DObjectStates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/PooledArray.js\";import{create as e,set as r,area as s,expand as n,contains as o,containsPoint as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{noBudget as h}from\"../../../support/Scheduler.js\";const a=.05;class c{constructor(){this._extents=new t({allocator:t=>t||e()}),this._tmpExtent=e(),this._dirty=!1}get empty(){return 0===this._extents.length}get size(){return this._extents.length}clear(){this._extents.clear()}add(t){this.contains(t)||(this.removeContained(t),r(this._extents.pushNew(),t),this._dirty=!0)}pop(){return this._dirty&&this.mergeTight(),this._extents.pop()}merge(t){return this.mergeTight(t),t.hasProgressed}mergeTight(t=h){const e=this._extents,o=new Set;let i=0;for(;i!==e.length;){e.sort(((t,e)=>t[0]-e[0])),i=e.length,o.clear();for(let i=0;i<e.length;++i){if(t.done)return;const h=e.getItemAt(i);for(let t=i+1;t<e.length;++t){const r=e.getItemAt(t);if(r[0]>=h[2])break;o.add(r)}o.forEach((i=>{if(h===i)return;if(i[2]<=h[0])return void o.delete(i);const c=s(h),g=s(i),m=this._tmpExtent;n(h,i,m);const d=c+g;(s(m)-d)/d<a&&(r(h,m),o.delete(i),e.remove(i),t.madeProgress())})),o.add(h)}}this._dirty=!1}contains(t){return this._extents.some((e=>o(e,t)))}removeContained(t){this._extents.filterInPlace((e=>!o(t,e)))}get test(){const t=this;return{containsPoint:e=>t._extents.some((t=>i(t,e)))}}}export{c as ExtentSet};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import i from\"../../../../core/Evented.js\";import s from\"../../../../core/Handles.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{ExtentSet as h}from\"./ExtentSet.js\";import{TaskPriority as o}from\"../../../support/Scheduler.js\";let p=class extends t{constructor(){super(...arguments),this.dirtyExtents=new h,this.globalDirty=!1,this.averageExtentUpdateSize=0,this.dirtyGraphicsSet=new Set,this.handles=new s,this.updateElevation=!1,this.layerView=null,this.graphicsCore=null,this.events=new i}setup(e,t,i,s){this.layerView=e,this.queryGraphicUIDsInExtent=t,this.graphicsCore=i,this.elevationProvider=s;const r=this.layerView.view.resourceController.scheduler;this.handles.add([s.on(\"elevation-change\",(e=>this._elevationChanged(e))),this.layerView.watch(\"suspended\",(()=>this.suspendedChange())),r.registerTask(o.ELEVATION_ALIGNMENT,this)])}destroy(){this.dirtyGraphicsSet.clear(),this.handles.destroy(),this.handles=null,this.layerView=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null}clear(){this.dirtyGraphicsSet.clear(),this.notifyChange(\"updating\")}suspendedChange(){!0===this.layerView.suspended?this.updateElevation=!1:!1===this.layerView.suspended&&this.updateElevation&&(this.globalDirty=!0,this.notifyChange(\"updating\"))}elevationInfoChange(){this.globalDirty=!0,this.notifyChange(\"updating\")}get updating(){return this.running}get running(){return this.dirtyGraphicsSet.size>0||this.dirtyExtents&&!this.dirtyExtents.empty||this.globalDirty}get updatingRemaining(){return this.dirtyGraphicsSet.size+this.dirtyExtents.size*this.averageExtentUpdateSize}runTask(e){for(this.globalDirty&&(this.markAllGraphicsElevationDirty(),this.globalDirty=!1,e.madeProgress()),e.run((()=>this.dirtyExtents.merge(e)));this.running&&!e.done;)this._updateDirtyGraphics(e),this._updateDirtyExtents(e);this.layerView.view.deconflictor.setDirty(),this.notifyChange(\"updating\")}_updateDirtyGraphics(e){const t=this.layerView.view.renderCoordsHelper,i=0===this.graphicsCore.effectiveUpdatePolicy;for(const s of this.dirtyGraphicsSet.keys()){const a=this.graphicsCore.getGraphics3DGraphicById(s);if(this.dirtyGraphicsSet.delete(s),r(a)&&(a.alignWithElevation(this.elevationProvider,t,i),e.madeProgress()),e.done)return}}_updateDirtyExtents(e){for(;!this.dirtyExtents.empty&&!e.done;){const t=this.dirtyExtents.pop(),i=this.elevationProvider.spatialReference;this.events.emit(\"invalidate-elevation\",{extent:t,spatialReference:i});const s=this.dirtyGraphicsSet.size;this.queryGraphicUIDsInExtent(t,i,(e=>{const t=this.graphicsCore.getGraphics3DGraphicById(e);r(t)&&t.needsElevationUpdates()&&this.dirtyGraphicsSet.add(e)})),this.averageExtentUpdateSize=.1*(this.dirtyGraphicsSet.size-s)+.9*this.averageExtentUpdateSize,e.madeProgress()}}markAllGraphicsElevationDirty(){this.dirtyExtents.clear(),this.dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((e,t)=>this.dirtyGraphicsSet.add(t)))}_elevationChanged(e){if(\"scene\"===e.context&&(!this.graphicsCore.layer.elevationInfo||\"relative-to-scene\"!==this.graphicsCore.layer.elevationInfo.mode))return;const{extent:t,spatialReference:i}=e;if(this.layerView.suspended){if(!this.updateElevation){const e=this.graphicsCore.computedExtent;e&&t[2]>e.xmin&&t[0]<e.xmax&&t[3]>e.ymin&&t[1]<e.ymax&&(this.updateElevation=!0)}this.events.emit(\"invalidate-elevation\",{extent:t,spatialReference:i})}else t[0]===-1/0?this.globalDirty=!0:this.dirtyExtents.add(t),this.notifyChange(\"updating\")}};e([a({readOnly:!0})],p.prototype,\"updating\",null),e([a({readOnly:!0})],p.prototype,\"updatingRemaining\",null),p=e([n(\"esri.views.3d.layers.graphics.Graphics3DElevationAlignment\")],p);var d=p;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../Graphic.js\";import i from\"../../../../core/Accessor.js\";import s from\"../../../../core/Collection.js\";import r from\"../../../../core/Handles.js\";import{isSome as a,destroyMaybe as o,isNone as n}from\"../../../../core/maybe.js\";import{isAbortError as c}from\"../../../../core/promiseUtils.js\";import{init as h}from\"../../../../core/watchUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/Logger.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as d}from\"../../../../core/accessorSupport/diffUtils.js\";import u from\"../../../../layers/Layer.js\";import{hydrateGraphic as g}from\"../../../../layers/graphics/hydratedFeatures.js\";import m from\"../../../../rest/support/Query.js\";import{SUSPEND_RESUME_EXTENT_OPTIMISM as y}from\"./constants.js\";import{Graphics3DCore as f}from\"./Graphics3DCore.js\";import b from\"./Graphics3DElevationAlignment.js\";import{Graphics3DObjectStates as j}from\"./Graphics3DObjectStates.js\";import w from\"./Graphics3DScaleVisibility.js\";import{enlargeExtent as C}from\"./graphicUtils.js\";import{WatchUpdatingTracking as S}from\"../../../support/WatchUpdatingTracking.js\";let v=class extends i{constructor(t){super(t),this.graphicsCore=null,this.elevationAlignment=new b,this.watchUpdatingTracking=new S,this.handles=new r,this.suspendResumeExtent=null}normalizeCtorArgs(t){let e=null;t.scaleVisibilityEnabled&&(delete(t={...t}).scaleVisibilityEnabled,e=new w);const i=new f({owner:t.owner,layer:t.layer,preferredUpdatePolicy:1,graphicSymbolSupported:!0});return{...t,graphicsCore:i,scaleVisibility:e}}initialize(){const t=this.scaleVisibility;a(t)&&\"minScale\"in this.layer&&this.watchUpdatingTracking.add(this.layer,\"scaleRangeId\",(()=>t.layerMinMaxScaleChangeHandler())),\"elevationInfo\"in this.layer&&this.watchUpdatingTracking.add(this.layer,\"elevationInfo\",((t,e)=>{d(t,e)&&this.watchUpdatingTracking.addPromise(this.graphicsCore.elevationInfoChange())}))}async setup(){const t=(t,e,i)=>this.graphicsCore.spatialIndex.queryGraphicUIDsInExtent(t,e,i);if(this.elevationAlignment.setup(this.owner,t,this.graphicsCore,this.view.elevationProvider),a(this.scaleVisibility)&&\"minScale\"in this.layer){const e=this.owner.view.basemapTerrain;this.scaleVisibility.setup(this.owner,this.layer,t,this.graphicsCore,e)}this._set(\"objectStates\",new j(this.graphicsCore));try{await this.graphicsCore.setup({elevationAlignment:this.elevationAlignment,scaleVisibility:this.scaleVisibility,objectStates:this.objectStates})}catch(e){if(c(e))return;throw e}this.destroyed||(this.handles.add(this.view.watch(\"clippingArea\",(()=>this.updateClippingExtent()),!0)),this.updateClippingExtent(),this.setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics())}destroy(){this.handles=o(this.handles),this.watchUpdatingTracking.destroy(),this._set(\"elevationAlignment\",o(this.elevationAlignment)),this._set(\"scaleVisibility\",o(this.scaleVisibility)),this._set(\"objectStates\",o(this.objectStates)),this._set(\"graphicsCore\",o(this.graphicsCore))}get suspended(){return!(!a(this.scaleVisibility)||!this.scaleVisibility.suspended)}get updating(){var t,e;return!!(null!=(t=this.graphicsCore)&&t.updating||a(this.scaleVisibility)&&this.scaleVisibility.updating||null!=(e=this.watchUpdatingTracking)&&e.updating)}getGraphicFromGraphicUid(t){if(this.owner.loadedGraphics){const e=this.owner.loadedGraphics.find((e=>e.uid===t));if(e){const t=this.layer instanceof u?this.layer:null;return g(e,t)}}}whenGraphicBounds(t,e){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(t,e):Promise.reject()}computeAttachmentOrigin(t,e){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(t,e):null}getSymbolLayerSize(t,e){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(t,e):null}maskOccludee(t){const{set:e,handle:i}=this.objectStates.acquireSet(1,null);return this.objectStates.setUid(e,t.uid),i}highlight(t){if(t instanceof m)return x;if(\"number\"==typeof t)return this.highlight([t]);if(t instanceof e)return this.highlight([t]);if(t instanceof s&&(t=t.toArray()),Array.isArray(t)&&t.length>0){if(t[0]instanceof e){const e=t.map((t=>t.uid)),{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setUids(i,e),s}if(\"number\"==typeof t[0]){const e=t,{set:i,handle:s}=this.objectStates.acquireSet(0,null);return this.objectStates.setObjectIds(i,e),s}}return x}updateClippingExtent(){const t=this.view.clippingArea;this.graphicsCore.setClippingExtent(t,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}updateSuspendResumeExtent(){n(this.scaleVisibility)||(this.suspendResumeExtent=C(this.graphicsCore.computedExtent,this.suspendResumeExtent,y,this.graphicsCore.extentPadding),this.scaleVisibility.setExtent(this.suspendResumeExtent))}setupSuspendResumeExtent(){n(this.scaleVisibility)||(h(this.graphicsCore,\"computedExtent\",(t=>this.updateSuspendResumeExtent()),!0),this.graphicsCore.watch(\"extentPadding\",(t=>this.updateSuspendResumeExtent())))}};t([p({constructOnly:!0})],v.prototype,\"owner\",void 0),t([p({constructOnly:!0})],v.prototype,\"layer\",void 0),t([p({readOnly:!0,aliasOf:\"owner.view\"})],v.prototype,\"view\",void 0),t([p({constructOnly:!0})],v.prototype,\"graphicsCore\",void 0),t([p({constructOnly:!0})],v.prototype,\"scaleVisibility\",void 0),t([p({readOnly:!0})],v.prototype,\"elevationAlignment\",void 0),t([p({readOnly:!0})],v.prototype,\"objectStates\",void 0),t([p({readOnly:!0})],v.prototype,\"watchUpdatingTracking\",void 0),t([p({readOnly:!0})],v.prototype,\"suspended\",null),t([p({readOnly:!0})],v.prototype,\"updating\",null),v=t([l(\"esri.views.3d.layers.graphics.Graphics3DGraphicLikeLayerView\")],v);const x={remove(){},pause(){},resume(){}};var E=v;export default E;\n"],"sourceRoot":""}