{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/layers/analysis/support/measurementUtils.js","../node_modules/@arcgis/core/views/3d/layers/analysis/AreaMeasurement/MeasurementData.js","../node_modules/@arcgis/core/views/3d/layers/analysis/AreaMeasurement/AreaMeasurementController.js","../node_modules/@arcgis/core/views/interactive/coordinateHelper.js","../node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometry.js","../node_modules/@arcgis/core/views/interactive/editGeometry/operations/AppendVertex.js","../node_modules/@arcgis/core/views/interactive/editGeometry/operations/SetVertexPosition.js","../node_modules/@arcgis/core/views/interactive/editGeometry/operations/CloseComponent.js","../node_modules/@arcgis/core/views/3d/layers/analysis/AreaMeasurement/AreaMeasurementPathHelper.js","../node_modules/@arcgis/core/views/3d/layers/analysis/AreaMeasurement/AreaMeasurementLayerViewData.js","../node_modules/@arcgis/core/views/3d/interactive/measurementTools/support/measurementUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/CheckerBoardTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/CheckerBoardMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/MeasurementAreaVisualElement.js","../node_modules/@arcgis/core/views/3d/layers/analysis/AreaMeasurement/AreaMeasurementView.js","../node_modules/@arcgis/core/views/3d/layers/AreaMeasurementLayerView3D.js","../node_modules/@arcgis/core/chunks/CheckerBoard.glsl.js"],"names":["z","t","e","n","r","distance","j","k","o","s","i","Math","abs","q","G","g","R","S","U","setPoint","c","a","l","rings","spatialReference","p","WGS84","W","this","positionsWorldCoords","positionsRenderCoords","positionsProjectedWorldCoords","positionsFittedRenderCoords","positionsGeographic","positionsSpherical","positionsStereographic","pathSegmentLengths","geodesicPathSegmentLengths","perimeterSegmentLengths","intersectingSegments","Set","geodesicIntersectingSegments","areaCentroidWorldCoords","_","areaCentroidRenderCoords","geodesicAreaCentroidRenderCoords","_length","_centroidRenderCoords","_planeWorldCoords","u","_worldUp","_worldTangent","_frame","_pathVersion","_validMeasurement","_tempU","_tempV","_tempVec3","_tempSphere","center","radius","_sceneView","unitNormalizer","h","renderSpatialReference","version","d","numVertices","_resize","P","f","C","m","forEachVertexPosition","L","_updatePathLengths","pathLength","normalizeDistance","_updateGeodesicPathLengths","geodesicPathLength","area","geodesicArea","perimeterLength","triangleIndices","geodesicTriangleIndices","clear","_updateArea","_updateGeodesicArea","fittingMode","length","push","v","renderCoordsHelper","T","worldUpAtPosition","worldBasisAtPosition","Error","I","_selectFittingMode","forEach","getAltitude","A","F","w","_updatePerimeterLengths","_updateIntersectingSegments","size","normalizeArea","_computeArea","y","toRenderCoords","_updateGeodesicIntersectingSegments","_computeGeodesicArea","add","x","Uint32Array","map","M","reduce","max","sqrt","V","maxRelativeErrorCoplanar","maxRelativeErrorAlmostCoplanar","cos","verticalAngleThreshold","Float64Array","_handles","view","_measurementDataManager","layerViewData","path","on","_update","update","validMeasurement","getData","_set","measurementData","constructOnly","prototype","readOnly","viewingMode","_unnormalizationInfo","B","tag","hasZ","hasM","type","valueType","X","supported","upperBoundX","lowerBoundX","pos","min","Z","valid","left","right","index","component","_pos","unnormalizeVertexPositions","vertices","edges","data","coordinateHelper","unnormalize","swapVertices","indexOf","undoStack","redoStack","components","lastOperation","accumulate","apply","pop","undo","createPoint","toArray","find","paths","isClosed","fromArray","fromPoint","editGeometry","addedVertex","originalEdge","getLastVertex","splice","updateVertexIndex","addedVertices","operation","emit","removedVertices","vertex","originalPosition","_apply","updatedVertices","createdEdge","getFirstVertex","_version","_internalGeometryChange","_initialize","areaMeasurement","initialized","_editGeometry","removeAll","_updateEditGeometryFromModelGeometry","_makeDirty","notifyChange","remove","geometry","fromGeometry","toPolygon","forEachVertex","getVertex","iterateVertices","toPoint","getVertexPositionAsPointFromIndex","equals","EventedAccessor","value","arguments","lastDraggedVertex","isValidPolygon","b","boundingSphere","bestFitPlane","planePointDistance","segmentLengthEuclidean","segmentLengthGeodesic","segmentLengthGeodesicVector","triangleAreaEuclidean","triangleAreaGeodesic","tangentFrame","fitHemisphere","E","compareSets","has","shader","get","configuration","build","OITEnabled","transparencyPassType","multipassTerrainEnabled","cullAboveGround","rctx","program","camera","projectionMatrix","setUniform2fv","setUniform4fv","color1","color2","nearFar","inverseViewport","blending","transparent","depthTest","func","depthWrite","writeDepth","colorWrite","polygonOffset","factor","units","setPipelineState","count","techniqueConfig","params","output","updateParameters","_technique","_techniqueRep","releaseAndAcquire","_material","getTechniqueConfig","bindPass","getPassParameters","_checkerBoardMaterial","_renderOccluded","_geometry","_size","_color1","_color2","applyProps","updateMaterial","geometryChanged","setParameterValues","renderOccluded","transform","position","uv","exclusive","addGeometry","recreateGeometry","_params","_path","_intersectedPath","_perimeter","_intersectedPerimeter","_projectionLines","_measurementArea","_areaLabel","_pathLengthLabel","_cursorSegmentLengthLabel","_perimeterLengthLabel","_pathSegments","_perimeterSegments","_cursorSegment","_origin","_originTransform","_cursorPositionRenderSpace","messages","viewData","areaLabel","perimeterLengthLabel","mode","geodesicMeasurementDistanceThreshold","layerView","visible","suspended","labels","cursorSegmentLength","attached","width","pathLineWidth","color","pathLineColor","intersectingLineColor","perimeterLineWidth","perimeterLineColor","projectionLineWidth","projectionLineColor","stipplePattern","projectionLineStippleSize","stippleIntegerRepeats","areaColor1","areaColor2","fontSize","unit","cursorPoint","state","_updateLabels","_updateMessageBundle","destroy","set","destroyed","_updateViewData","_updateOrigin","_updatePathSegments","_updatePerimeterSegments","_updateProjectionLines","lastPoint","_toPreferredAreaUnit","pathVersion","positionsProjected","areaCentroid","pathLengthLabelSegmentIndex","perimeterLengthLabelSegmentIndex","checkerSize","geodesicCursorSegmentLength","D","all","nonIntersecting","intersecting","_createSegments","setGeometryFromSegments","_updateAreaEuclidean","_updateAreaGeodesic","_formatAreaLabel","point","text","_formatLengthLabel","O","labelDistance","segment","sampleLocation","anchor","overlaps","toUnit","_preferredAreaUnit","_deriveLengthUnitFromAreaUnit","_preferredLengthUnit","then","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","handleRadiusHovered","handleRadiusMouse","handleRadiusTouch","fillColor","lineSubdivisions","_userUnit","_defaultUnit","layer","analysisView","analysis","analysisController","controller","extensions","attributes","uniforms","varyings","code","fragment","include","Object","freeze","__proto__"],"mappings":"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","file":"static/js/88.e4b10692.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{s as t,b as e,a as n,h as r,d as o,i as s,c as i,n as f,g as u}from\"../../../../../chunks/vec3.js\";import{c as a}from\"../../../../../chunks/vec3f64.js\";import{geodesicArea as c}from\"../../../../../geometry/geometryEngine.js\";import l from\"../../../../../geometry/Polygon.js\";import{projectPointToVector as m,projectPointToWGS84ComparableLonLat as h,projectVectorToWGS84ComparableLonLat as g}from\"../../../../../geometry/projection.js\";import p from\"../../../../../geometry/SpatialReference.js\";import{inverseGeodeticSolver as j}from\"../../../../../geometry/support/geodesicUtils.js\";import{planeFromPoints as d}from\"../../../support/mathUtils.js\";function y(o,s){const i=s.center;t(i,0,0,0);for(let t=0;t<o.length;++t)e(i,i,o[t]);n(i,i,1/o.length);let f=0;for(let t=0;t<o.length;++t)f=Math.max(f,r(i,o[t]));s.radius=Math.sqrt(f)}function M(t,e){if(t.length<3)throw new Error(\"need at least 3 points to fit a plane\");d(t[0],t[1],t[2],e)}function b(t,e){return o(t,e)+t[3]}function P(t,e,n){return m(t,R,n)&&m(e,S,n)?s(R,S):0}function w(t,e){if(!h(t,R)||!h(e,S))return 0;const n={distance:null};return j(n,[R[0],R[1]],[S[0],S[1]]),n.distance}function z(t,e,n){const r={distance:null};return j(r,[t[0],t[1]],[e[0],e[1]],n),r.distance}function k(t,e,n){const r=e[0]-t[0],o=e[1]-t[1],s=n[0]-t[0],i=n[1]-t[1];return.5*Math.abs(r*i-o*s)}function q(t,e,n,r){const o=G;return g(t,r,R)&&g(e,r,S)&&g(n,r,U)?(o.setPoint(0,0,R),o.setPoint(0,1,S),o.setPoint(0,2,U),Math.abs(c(o,\"square-meters\"))):0}function v(e,n,r){Math.abs(e[0])>Math.abs(e[1])?t(n,0,1,0):t(n,1,0,0),i(r,e,n),f(n,n),i(n,r,e),f(r,r)}function x(n,r=null,s=!0){const a=1e-6,c=(t,e)=>{if(0===e[0]&&0===e[1]&&0===e[2])return!1;for(let n=0;n<t.length;++n)if(o(e,t[n])<-a)return!1;return!0};if(0===n.length)return!1;if(1===n.length)return r&&u(r,n[0]),!0;t(W,0,0,0);for(let t=0;t<n.length;++t)e(W,W,n[t]);if(f(W,W),c(n,W))return r&&u(r,W),!0;if(!s)return!1;for(let t=0;t<n.length;++t)for(let e=0;e<n.length;++e)if(t!==e&&(i(W,n[t],n[e]),f(W,W),c(n,W)))return r&&u(r,W),!0;return!1}function E(t,e){if(t===e)return!0;if(t.size!==e.size)return!1;for(let n=0;n<t.size;++n)if(!e.has(t[n]))return!1;return!0}const R=a(),S=a(),U=a(),G=new l({rings:[[R,S,U]],spatialReference:p.WGS84}),W=a();export{M as bestFitPlane,y as boundingSphere,E as compareSets,x as fitHemisphere,b as planePointDistance,P as segmentLengthEuclidean,w as segmentLengthGeodesic,z as segmentLengthGeodesicVector,v as tangentFrame,k as triangleAreaEuclidean,q as triangleAreaGeodesic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../../../../../core/mathUtils.js\";import t from\"../../../../../core/Quantity.js\";import{e as s}from\"../../../../../chunks/earcut.js\";import{s as i,d as o}from\"../../../../../chunks/vec2.js\";import{a as r}from\"../../../../../chunks/vec2f64.js\";import{n,i as h,g as a,c as d,o as g,f as l,d as p,a as c,b as m}from\"../../../../../chunks/vec3.js\";import{c as _}from\"../../../../../chunks/vec3f64.js\";import{c as u}from\"../../../../../chunks/vec4f64.js\";import{canProjectWithoutEngine as f,canProjectToWGS84ComparableLonLat as C,projectPointToVector as S,projectPointToWGS84ComparableLonLat as L,projectDirection as R,projectVectorToVector as w}from\"../../../../../geometry/projection.js\";import{getSphericalPCPF as P,getReferenceEllipsoid as j}from\"../../../../../geometry/projectionEllipsoid.js\";import A from\"../../../../../geometry/SpatialReference.js\";import{segmentIntersects as W}from\"../../../../../geometry/support/intersectsBase.js\";import{segmentLengthGeodesicVector as v,bestFitPlane as I,fitHemisphere as U,triangleAreaEuclidean as G,triangleAreaGeodesic as z,planePointDistance as M,boundingSphere as V}from\"../support/measurementUtils.js\";import{midpoint as T}from\"../support/viewUtils.js\";import{makeOrthonormal as F,tangentFrame as y}from\"../../../support/mathUtils.js\";class k{constructor(e,t){this.positionsWorldCoords=[],this.positionsRenderCoords=[],this.positionsProjectedWorldCoords=[],this.positionsFittedRenderCoords=[],this.positionsGeographic=[],this.positionsSpherical=[],this.positionsStereographic=[],this.pathSegmentLengths=[],this.geodesicPathSegmentLengths=[],this.perimeterSegmentLengths=[],this.intersectingSegments=new Set,this.geodesicIntersectingSegments=new Set,this.areaCentroidWorldCoords=_(),this.areaCentroidRenderCoords=_(),this.geodesicAreaCentroidRenderCoords=_(),this._length=0,this._centroidRenderCoords=_(),this._planeWorldCoords=u(),this._worldUp=_(),this._worldTangent=_(),this._frame=[_(),_(),_()],this._pathVersion=-1,this._validMeasurement=!1,this._tempU=_(),this._tempV=_(),this._tempVec3=_(),this._tempSphere={center:_(),radius:0},this._sceneView=e,this.unitNormalizer=t}update(e,s,i,o){const r=this.unitNormalizer,h=this._sceneView.renderSpatialReference,a=this.unitNormalizer.spatialReference;if(this._pathVersion===e.version&&this._validMeasurement===i)return;this._pathVersion=e.version,this._validMeasurement=i;const d=e.numVertices;this._resize(d);const g=P(s.spatialReference),l=f(s.spatialReference,g)&&C(s.spatialReference),p=this.positionsGeographic,c=this.positionsWorldCoords,m=this.positionsRenderCoords,_=this.positionsSpherical;e.forEachVertexPosition(((e,t)=>{S(e,c[t],a),S(e,m[t],h),l&&(L(e,p[t]),S(e,_[t],g),n(_[t],_[t]))}));const u=this._updatePathLengths(i);if(this.pathLength=this._length>1?new t(r.normalizeDistance(u),\"meters\"):null,l){const e=this._updateGeodesicPathLengths(i,a);this.geodesicPathLength=this._length>1?new t(e,\"meters\"):null}else this.geodesicPathLength=null;if(!i)return this.area=null,this.geodesicArea=null,this.perimeterLength=null,this.triangleIndices=null,this.geodesicTriangleIndices=null,this.intersectingSegments.clear(),void this.geodesicIntersectingSegments.clear();this._updateArea(s,r,h,a,o),l&&this._updateGeodesicArea(s)}getData(){return{positionsWorldCoords:this.positionsWorldCoords,positionsRenderCoords:this.positionsRenderCoords,positionsProjectedWorldCoords:this.positionsProjectedWorldCoords,positionsFittedRenderCoords:this.positionsFittedRenderCoords,positionsGeographic:this.positionsGeographic,positionsSpherical:this.positionsSpherical,positionsStereographic:this.positionsStereographic,pathSegmentLengths:this.pathSegmentLengths,geodesicPathSegmentLengths:this.geodesicPathSegmentLengths,perimeterSegmentLengths:this.perimeterSegmentLengths,intersectingSegments:this.intersectingSegments,geodesicIntersectingSegments:this.geodesicIntersectingSegments,triangleIndices:this.triangleIndices,geodesicTriangleIndices:this.geodesicTriangleIndices,areaCentroidWorldCoords:this.areaCentroidWorldCoords,areaCentroidRenderCoords:this.areaCentroidRenderCoords,geodesicAreaCentroidRenderCoords:this.geodesicAreaCentroidRenderCoords,fittingMode:this.fittingMode,area:this.area,geodesicArea:this.geodesicArea,pathLength:this.pathLength,geodesicPathLength:this.geodesicPathLength,perimeterLength:this.perimeterLength,unitNormalizer:this.unitNormalizer}}_resize(e){for(e<this._length&&(this.positionsWorldCoords.length=e,this.positionsRenderCoords.length=e,this.positionsProjectedWorldCoords.length=e,this.positionsFittedRenderCoords.length=e,this.positionsGeographic.length=e,this.positionsSpherical.length=e,this.positionsStereographic.length=e,this.pathSegmentLengths.length=e,this.geodesicPathSegmentLengths.length=e,this.perimeterSegmentLengths.length=e,this._length=e);this._length<e;)this.positionsWorldCoords.push(_()),this.positionsRenderCoords.push(_()),this.positionsProjectedWorldCoords.push(r()),this.positionsFittedRenderCoords.push(_()),this.positionsGeographic.push(_()),this.positionsSpherical.push(_()),this.positionsStereographic.push(r()),this.pathSegmentLengths.push(0),this.geodesicPathSegmentLengths.push(0),this.perimeterSegmentLengths.push(0),++this._length}_updatePathLengths(e){const t=this.positionsWorldCoords,s=this.pathSegmentLengths;let i=0;for(let o=0;o<this._length;++o){const r=s[o]=h(t[o],t[(o+1)%this._length]);(o<this._length-1||e)&&(i+=r)}return i}_updateGeodesicPathLengths(e,t){const s=this.positionsGeographic,i=this.geodesicPathSegmentLengths;let o=0;for(let r=0;r<this._length;++r){const n=i[r]=v(s[r],s[(r+1)%this._length],t);(r<this._length-1||e)&&(o+=n)}return o}_updateArea(e,s,o,r,n){const h=e.renderCoordsHelper,_=this.positionsWorldCoords,u=this.positionsRenderCoords,f=this.positionsProjectedWorldCoords,C=this.positionsFittedRenderCoords,S=this._planeWorldCoords,L=this._centroidRenderCoords;T(u,L),h.worldUpAtPosition(L,this._worldUp),h.worldBasisAtPosition(L,0,this._worldTangent),R(L,this._worldUp,o,this._worldUp,r),R(L,this._worldTangent,o,this._worldTangent,r),_.length>2&&I(_,S),this.fittingMode=this._selectFittingMode(S,_,this._worldUp,n);let P=0;if(\"horizontal\"===this.fittingMode){let e=-1/0;u.forEach(((t,s)=>{const i=h.getAltitude(u[s]);i>e&&(e=i,P=s)}))}const j=_[P];let A=S,W=this._worldTangent;\"horizontal\"===this.fittingMode?A=this._worldUp:\"vertical\"===this.fittingMode&&(A=this._tempVec3,W=this._worldUp,F(S,this._worldUp,A)),a(this._frame[2],A),F(W,A,this._frame[0]),d(this._frame[1],this._frame[0],this._frame[2]),g(this._frame[1],this._frame[1]);const v=this._tempVec3,U=this._tempU,G=this._tempV;for(let t=0;t<this._length;++t){const e=f[t],s=C[t];l(v,_[t],j),i(e,p(this._frame[0],v),p(this._frame[1],v)),c(U,this._frame[0],e[0]),c(G,this._frame[1],e[1]),m(v,U,G),m(v,v,j),w(v,r,s,o)}this.perimeterLength=this._length>0?new t(s.normalizeDistance(this._updatePerimeterLengths()),\"meters\"):null,T(C,this.areaCentroidRenderCoords),w(this.areaCentroidRenderCoords,o,this.areaCentroidWorldCoords,r),this._updateIntersectingSegments(),this.area=0===this.intersectingSegments.size?new t(s.normalizeArea(this._computeArea()),\"square-meters\"):null}_updateGeodesicArea(e){const s=e.renderCoordsHelper,o=this.positionsSpherical,r=this.positionsStereographic,n=this._tempVec3,h=U(o,n);if(!h)return void(this.geodesicArea=null);const a=this._tempU,d=this._tempV;y(n,a,d);for(let t=0;t<this._length;++t){const e=p(o[t],a),s=p(o[t],d),h=p(o[t],n);i(r[t],e/h,s/h)}c(n,n,j(e.spatialReference).radius),s.toRenderCoords(n,P(e.spatialReference),this.geodesicAreaCentroidRenderCoords),this._updateGeodesicIntersectingSegments(),this.geodesicArea=h&&0===this.geodesicIntersectingSegments.size?new t(this._computeGeodesicArea(),\"square-meters\"):null}_updatePerimeterLengths(){const e=this.positionsProjectedWorldCoords,t=this.perimeterSegmentLengths;let s=0;for(let i=0;i<this._length;++i){s+=t[i]=o(e[i],e[(i+1)%this._length])}return s}_updateIntersectingSegments(){const e=this.positionsProjectedWorldCoords,t=this.intersectingSegments;t.clear();for(let s=0;s<this._length;++s)for(let i=s+2;i<this._length;++i){if((i+1)%this._length===s)continue;const o=e[s],r=e[(s+1)%this._length],n=e[i],h=e[(i+1)%this._length];W(o,r,n,h)&&(t.add(s),t.add(i))}}_computeArea(){const e=this.positionsProjectedWorldCoords,t=x(e,2),i=this.triangleIndices=new Uint32Array(s(t,[],2));let o=0;for(let s=0;s<i.length;s+=3)o+=G(e[i[s]],e[i[s+1]],e[i[s+2]]);return o}_updateGeodesicIntersectingSegments(){const e=this.positionsStereographic,t=this.geodesicIntersectingSegments;t.clear();for(let s=0;s<this._length;++s)for(let i=s+2;i<this._length;++i){if((i+1)%this._length===s)continue;const o=e[s],r=e[(s+1)%this._length],n=e[i],h=e[(i+1)%this._length];W(o,r,n,h)&&(t.add(s),t.add(i))}}_computeGeodesicArea(){const e=this.positionsGeographic,t=x(this.positionsStereographic,2),i=this.geodesicTriangleIndices=new Uint32Array(s(t,[],2));let o=0;for(let s=0;s<i.length;s+=3)o+=z(e[i[s]],e[i[s+1]],e[i[s+2]],A.WGS84);return o}_selectFittingMode(t,s,i,o){const r=s.map((e=>Math.abs(M(t,e)))).reduce(((e,t)=>Math.max(e,t)),0);V(s,this._tempSphere);const n=r/(2*this._tempSphere.radius),h=n<o.maxRelativeErrorCoplanar,a=n<o.maxRelativeErrorAlmostCoplanar;let d=\"horizontal\";if(h)d=\"oblique\";else if(a){d=Math.abs(p(i,t))>Math.cos(e(o.verticalAngleThreshold))?\"horizontal\":\"vertical\"}return d}}function x(e,t){const s=new Float64Array(e.length*t);for(let i=0;i<e.length;++i){const o=e[i];for(let e=0;e<t;++e)s[i*t+e]=o[e]}return s}export{k as MeasurementDataManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import r from\"../../../../../core/Handles.js\";import{destroyMaybe as s}from\"../../../../../core/maybe.js\";import{property as a}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{canProjectWithoutEngine as i}from\"../../../../../geometry/projection.js\";import{getSphericalPCPF as n,WGS84ECEFSpatialReference as m,SphericalECEFSpatialReference as p}from\"../../../../../geometry/projectionEllipsoid.js\";import{MeasurementDataManager as c}from\"./MeasurementData.js\";import{UnitNormalizer as l}from\"../support/UnitNormalizer.js\";let h=class extends t{constructor(e){super(e),this._handles=new r}initialize(){const e=this.view.spatialReference,t=n(e),r=t===p?m:t,s=!e||i(e,r)?r:e,a=new l(s);this._measurementDataManager=new c(this.view,a),this._handles.add(this.layerViewData.path.on(\"change\",(()=>this._update()))),this._update()}destroy(){this._handles=s(this._handles)}_update(){const e=this.layerViewData,t={maxRelativeErrorCoplanar:.005,maxRelativeErrorAlmostCoplanar:.01,verticalAngleThreshold:80};this._measurementDataManager.update(e.path,this.view,e.validMeasurement,t);const r=this._measurementDataManager.getData();this._set(\"measurementData\",r),e.measurementData=r}};e([a({constructOnly:!0})],h.prototype,\"view\",void 0),e([a({constructOnly:!0})],h.prototype,\"analysis\",void 0),e([a({readOnly:!0})],h.prototype,\"measurementData\",void 0),e([a({constructOnly:!0})],h.prototype,\"layerViewData\",void 0),h=e([o(\"esri.views.3d.layers.analysis.AreaMeasurement.AreaMeasurementController\")],h);export{h as AreaMeasurementController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{c as e,m as t,a as r,b as a,h as n,p as s,r as i,d as o}from\"../../chunks/vec2.js\";import{a as u,f as h,d as p}from\"../../chunks/vec2f64.js\";import{i as c,g as l,e as f}from\"../../chunks/vec3.js\";import{f as y,c as m,d}from\"../../chunks/vec3f64.js\";import{c as v,l as g}from\"../../chunks/vec4.js\";import{c as R,f as z,b as x}from\"../../chunks/vec4f64.js\";import T from\"../../geometry/Point.js\";import{getInfo as Z}from\"../../geometry/support/spatialReferenceUtils.js\";const w=u();class M{constructor(e,t){this.spatialReference=e,this.viewingMode=t,this._unnormalizationInfo=B(e,t)}tag(e){return e}createNew(){return this.tag(u())}fromPoint(e){return this.tag(h(e.x,e.y))}fromArray(e){return this.tag(h(e[0],e[1]))}toArray(e){return[e[0],e[1]]}clone(e){return this.tag(p(e))}copy(t,r){return e(r,t)}toPoint(e,t){return t.x=e[0],t.y=e[1],t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}createPoint(e){return new T({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}createPointFromArray(e){return new T({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}createDehydratedPoint(e){return{x:e[0],y:e[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:\"point\"}}lerp(e,r,a,n){return t(n,e,r,a)}addDelta(e,t,r){e[0]+=t,e[1]+=r}scale(e,t,i,o){const u=r(w,e,t),h=a(w,i,n(i,u));s(e,e,h,o-1)}rotate(e,t,r){i(e,e,t,r)}pointToArray(e){return[e.x,e.y]}getZ(e,t){return t}hasZ(){return!1}getM(e,t){return t}hasM(){return!1}unnormalize(e){j(e,this._unnormalizationInfo)}fromXYZ(e){return this.tag(h(e[0],e[1]))}toXYZ(e,t=0){return y(e[0],e[1],t)}distance(e,t){return o(e,t)}}class P{constructor(e,t,r){this.valueType=e,this.spatialReference=t,this._unnormalizationInfo=B(t,r)}distance(e,t){return 0===this.valueType?c(e,t):o(e,t)}tag(e){return e}createNew(){return this.tag(m())}fromPoint(e){return this.tag(y(e.x,e.y,0===this.valueType?e.z:e.m))}fromArray(e){return this.tag(y(e[0],e[1],e[2]||0))}toArray(e){return[e[0],e[1],e[2]]}clone(e){return this.tag(d(e))}copy(e,t){return l(t,e)}toPoint(e,t){return t.x=e[0],t.y=e[1],0===this.valueType?(t.z=e[2],t.hasZ=!0,t.hasM=!1):(t.m=e[2],t.hasZ=!1,t.hasM=!0),t.spatialReference=this.spatialReference,t}createPoint(e){return new T({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}createPointFromArray(e){return new T({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}createDehydratedPoint(e){const t=0===this.valueType,r=1===this.valueType;return{x:e[0],y:e[1],z:t?e[2]:void 0,m:r?e[2]:void 0,hasZ:t,hasM:r,spatialReference:this.spatialReference,type:\"point\"}}lerp(e,t,r,a){return f(a,e,t,r)}addDelta(e,t,r,a){e[0]+=t,e[1]+=r,0===this.valueType&&(e[2]+=a)}scale(e,t,i,o){const u=r(w,e,t),h=a(w,i,n(i,u));s(e,e,h,o-1)}rotate(e,t,r){i(e,e,t,r)}pointToArray(e){return 0===this.valueType?[e.x,e.y,e.z]:[e.x,e.y,e.m]}getZ(e,t){return 0===this.valueType?e[2]:t}hasZ(){return 0===this.valueType}getM(e,t){return 1===this.valueType?e[2]:t}hasM(){return 1===this.valueType}unnormalize(e){j(e,this._unnormalizationInfo)}fromXYZ(e,t=0,r=0){return this.tag(y(e[0],e[1],0===this.valueType?e.length>2?e[2]:t:r))}toXYZ(e,t=0){return this.tag(y(e[0],e[1],0===this.valueType?e[2]:t))}}class X{constructor(e,t){this.spatialReference=e,this._unnormalizationInfo=B(e,t)}distance(e,t){return c(e,t)}tag(e){return e}createNew(){return this.tag(R())}fromPoint(e){return this.tag(z(e.x,e.y,e.z,e.m))}fromArray(e){return this.tag(z(e[0],e[1],e[2]||0,e[3]||0))}toArray(e){return[e[0],e[1],e[2],e[3]]}clone(e){return this.tag(x(e))}copy(e,t){return v(t,e)}toPoint(e,t){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}createPoint(e){return new T({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}createPointFromArray(e){return new T({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}createDehydratedPoint(e){return{x:e[0],y:e[1],z:e[2],m:e[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:\"point\"}}lerp(e,t,r,a){return g(a,e,t,r)}addDelta(e,t,r,a){e[0]+=t,e[1]+=r,e[2]+=a}scale(e,t,i,o){const u=r(w,e,t),h=a(w,i,n(i,u));s(e,e,h,o-1)}rotate(e,t,r){i(e,e,t,r)}pointToArray(e){return[e.x,e.y,e.z,e.m]}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}unnormalize(e){j(e,this._unnormalizationInfo)}fromXYZ(e,t=0,r=0){return this.tag(z(e[0],e[1],e.length>2?e[2]:t,r))}toXYZ(e){return y(e[0],e[1],e[2])}}function A(e,t,r,a){return e&&t?new X(r,a):t?new P(1,r,a):e?new P(0,r,a):new M(r,a)}function j(e,t){if(!t.supported)return;let r=1/0,a=-1/0;const n=t.upperBoundX-t.lowerBoundX;e.forEach((e=>{let s=e.pos[0];for(;s<t.lowerBoundX;)s+=n;for(;s>t.upperBoundX;)s-=n;r=Math.min(r,s),a=Math.max(a,s),e.pos[0]=s}));const s=a-r;n-s<s&&e.forEach((e=>{e.pos[0]<0&&(e.pos[0]+=n)}))}function B(e,t){const r=Z(e);return\"global\"===t&&r?{supported:!0,lowerBoundX:r.valid[0],upperBoundX:r.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}export{M as CoordinateHelper2D,P as CoordinateHelper3D,X as CoordinateHelper4D,A as createCoordinateHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{equals as t}from\"../../../core/arrayUtils.js\";import e from\"../../../core/Evented.js\";import{isSome as s,isNone as r}from\"../../../core/maybe.js\";import i from\"../../../geometry/Polygon.js\";import n from\"../../../geometry/Polyline.js\";import{createCoordinateHelper as o}from\"../coordinateHelper.js\";class h{constructor(t){this.left=null,this.right=null,this.type=\"vertex\",this.index=null,this.component=t}get pos(){return this._pos}set pos(t){this._pos=t,this.component.unnormalizeVertexPositions()}}class c{constructor(t,e,s){this.type=\"edge\",this.component=t,this.left=e,this.right=s,e.right=this,s.left=this}}class l{constructor(t){this.vertices=[],this.edges=[],this.data=t}unnormalizeVertexPositions(){this.vertices.length<=1||this.data.coordinateHelper.unnormalize(this.vertices)}updateVertexIndex(t,e){if(0===this.vertices.length)return;const s=this.vertices[0];let r=null,i=t,n=e;do{r=i,r.index=n++,i=r.right?r.right.right:null}while(null!=i&&i!==s);r.left&&r!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(r),this.vertices.length-1)}getFirstVertex(){return 0===this.vertices.length?null:this.vertices[0]}getLastVertex(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]}isClosed(){return this.vertices.length>2&&null!==this.vertices[0].left}swapVertices(t,e){const s=this.vertices[t];this.vertices[t]=this.vertices[e],this.vertices[e]=s}iterateVertices(t){if(0===this.vertices.length)return;const e=this.vertices[0];let r=e;do{t(r,r.index),r=s(r.right)?r.right.right:null}while(r!==e&&null!=r)}}class a extends e{constructor(t){super(),this.coordinateHelper=t,this.undoStack=[],this.redoStack=[],this.components=[]}apply(t,e=1){return 0!==e&&!r(this.lastOperation)&&this.lastOperation.accumulate(t)||(t.apply(),this.undoStack.push(t),this.redoStack=[]),t}undo(){if(this.undoStack.length>0){const t=this.undoStack.pop();return t.undo(),this.redoStack.push(t),t}return null}get canUndo(){return this.undoStack.length>0}get lastOperation(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:null}redo(){if(this.redoStack.length>0){const t=this.redoStack.pop();return t.apply(),this.undoStack.push(t),t}return null}get canRedo(){return this.redoStack.length>0}toPoint(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.createPoint(this.components[0].vertices[0].pos)}toPolyline(){const t=[],e=this.coordinateHelper.toArray;return this.components.forEach(((s,r)=>{const i=[];let n=s.vertices.find((t=>null==t.left));const o=n;do{i.push(e(n.pos)),n=n.right?n.right.right:null}while(n&&n!==o);t.push(i)})),new n({paths:t,spatialReference:this.coordinateHelper.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}toPolygon(){const t=[],e=this.coordinateHelper.toArray;return this.components.forEach(((r,i)=>{const n=[],o=r.vertices[0];let h=o;const c=h;do{n.push(e(h.pos)),h=s(h.right)?h.right.right:null}while(h&&h!==c);r.isClosed()&&n.push(e(o.pos)),t.push(n)})),new i({rings:t,spatialReference:this.coordinateHelper.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,s){const r=o(e.hasZ,e.hasM,e.spatialReference,s),i=new a(r);switch(e.type){case\"polygon\":{const s=e.rings;for(let e=0;e<s.length;++e){const n=s[e],o=new l(i),a=n.length>2&&t(n[0],n[n.length-1]),p=a?n.length-1:n.length;for(let t=0;t<p;++t){const e=r.fromArray(n[t]),s=new h(o);o.vertices.push(s),s.pos=e,s.index=t}const u=o.vertices.length-1;for(let t=0;t<u;++t){const e=o.vertices[t],s=o.vertices[t+1],r=new c(o,e,s);o.edges.push(r)}if(a){const t=new c(o,o.vertices[o.vertices.length-1],o.vertices[0]);o.edges.push(t)}i.components.push(o)}}break;case\"polyline\":for(const t of e.paths){const e=new l(i),s=t.length;for(let i=0;i<s;++i){const s=r.fromArray(t[i]),n=new h(e);e.vertices.push(n),n.pos=s,n.index=i}const n=e.vertices.length-1;for(let t=0;t<n;++t){const s=e.vertices[t],r=e.vertices[t+1],i=new c(e,s,r);e.edges.push(i)}i.components.push(e)}break;case\"point\":{const t=new l(i),s=new h(t);s.index=0,s.pos=i.coordinateHelper.fromPoint(e),t.vertices.push(s),i.components.push(t)}}return i}}export{l as Component,c as Edge,a as EditGeometry,h as Vertex};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as t}from\"../../../../core/maybe.js\";import{Vertex as i,Edge as s}from\"../EditGeometry.js\";class h{constructor(e,t,i){this.editGeometry=e,this.component=t,this.pos=i,this.addedVertex=null,this.originalEdge=null,this.left=null,this.right=null}apply(){let h=\"redo\";e(this.addedVertex)&&(h=\"apply\",this.addedVertex=new i(this.component));const d=this.component.getLastVertex();if(e(d))this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{let i=null;d.right&&(this.originalEdge=d.right,i=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1)),this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,e(this.left)&&(this.left=new s(this.component,d,this.addedVertex)),this.component.edges.push(this.left),d.right=this.left,t(this.originalEdge)&&t(i)&&(e(this.right)&&(this.right=new s(this.component,this.addedVertex,i)),this.component.edges.push(this.right),i.left=this.right),this.component.updateVertexIndex(this.addedVertex,d.index+1)}const n={addedVertices:[this.addedVertex],operation:h};this.editGeometry.emit(\"change\",n)}undo(){if(e(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1),t(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null),t(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.right.left=null),t(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=this.originalEdge,this.originalEdge.right.left=this.originalEdge),t(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0);const i={removedVertices:[this.addedVertex],operation:\"undo\"};this.editGeometry.emit(\"change\",i)}accumulate(){return!1}}export{h as AppendVertex};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as t,unwrap as e}from\"../../../../core/maybe.js\";class i{constructor(t,e,i){this.editGeometry=t,this.vertex=e,this.pos=i}apply(){const e=t(this.originalPosition);e&&(this.originalPosition=this.vertex.pos),this._apply(e?\"apply\":\"redo\")}undo(){this.vertex.pos=e(this.originalPosition);const t={updatedVertices:[this.vertex],operation:\"undo\"};this.editGeometry.emit(\"change\",t)}accumulate(t){return t instanceof i&&t.vertex===this.vertex&&(this.pos=t.pos,this._apply(\"apply\"),!0)}_apply(t){this.vertex.pos=this.pos,this.editGeometry.components.forEach((t=>t.unnormalizeVertexPositions()));const e={updatedVertices:[this.vertex],operation:t};this.editGeometry.emit(\"change\",e)}}export{i as SetVertexPosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../core/maybe.js\";import{Edge as t}from\"../EditGeometry.js\";class i{constructor(e,t){this.editGeometry=e,this.component=t,this.createdEdge=null}apply(){let i=\"redo\";if(e(this.createdEdge)){i=\"apply\";const s=this.component.getFirstVertex(),o=this.component.getLastVertex();if(this.component.isClosed()||this.component.vertices.length<3||e(s)||e(o))return;this.createdEdge=new t(this.component,o,s)}this.createdEdge.left.right=this.createdEdge,this.createdEdge.right.left=this.createdEdge,this.component.edges.push(this.createdEdge);const s={operation:i};this.editGeometry.emit(\"change\",s)}undo(){if(e(this.createdEdge))return;this.component.edges.splice(this.component.edges.indexOf(this.createdEdge),1),this.createdEdge.left.right=null,this.createdEdge.right.left=null;const t={operation:\"undo\"};this.editGeometry.emit(\"change\",t)}accumulate(){return!1}}export{i as CloseComponent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../geometry.js\";import t from\"../../../../../core/Evented.js\";import i from\"../../../../../core/Handles.js\";import{isSome as r}from\"../../../../../core/maybe.js\";import{init as o}from\"../../../../../core/watchUtils.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as n}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{createCoordinateHelper as m}from\"../../../../interactive/coordinateHelper.js\";import{EditGeometry as a,Component as h}from\"../../../../interactive/editGeometry/EditGeometry.js\";export{Component,Edge,EditGeometry,Vertex}from\"../../../../interactive/editGeometry/EditGeometry.js\";import{AppendVertex as l}from\"../../../../interactive/editGeometry/operations/AppendVertex.js\";import{SetVertexPosition as c}from\"../../../../interactive/editGeometry/operations/SetVertexPosition.js\";import{CloseComponent as d}from\"../../../../interactive/editGeometry/operations/CloseComponent.js\";import p from\"../../../../../geometry/Point.js\";let y=class extends t.EventedAccessor{constructor(e={}){super(e),this._handles=new i,this._version=0,this._internalGeometryChange=!1}set areaMeasurement(e){this._set(\"areaMeasurement\",e),r(e)&&r(this.view)&&this._initialize(e,this.view)}set view(e){this._set(\"view\",e),r(e)&&r(this.areaMeasurement)&&this._initialize(this.areaMeasurement,e)}get initialized(){return r(this.areaMeasurement)&&r(this.view)}get version(){return this._version}get isValidPolygon(){return this.initialized&&this._editGeometry.components.length>0&&this._editGeometry.components[0].isClosed()}_initialize(e,t){this._handles.removeAll(),this._handles.add(o(e,\"geometry\",(()=>this._updateEditGeometryFromModelGeometry(e,t)),!0)),this._makeDirty(!0)}_makeDirty(e=!1){this.notifyChange(\"isValidPolygon\"),this.notifyChange(\"initialized\"),e&&this.notifyChange(\"numVertices\")}_updateEditGeometryFromModelGeometry(e,t){this._version++,this._internalGeometryChange||(this._handles.remove(\"EditGeometry\"),this._editGeometry=r(e.geometry)?a.fromGeometry(e.geometry,t.viewingMode):new a(m(!0,!1,t.spatialReference,t.viewingMode)),this._makeDirty(!0),this.emit(\"change\",{type:\"change\"}),this._handles.add(this._editGeometry.on(\"change\",(t=>{this._makeDirty(null!=t.addedVertices||null!=t.removedVertices),this._internalGeometryChange=!0,e.geometry=this.numVertices>0?this._editGeometry.toPolygon():null,this._internalGeometryChange=!1})),\"EditGeometry\"))}get vertices(){const e=[];return this.forEachVertex((t=>{e.push(t)})),e}get numVertices(){return this.initialized&&this._editGeometry.components.length>0?this._editGeometry.components[0].vertices.length:0}get lastPoint(){if(this.initialized&&this._editGeometry.components.length>0){const e=this._editGeometry.components[0].getLastVertex();if(r(e))return this._editGeometry.coordinateHelper.createPoint(e.pos)}return null}getVertex(e){if(!this.initialized||0===this._editGeometry.components.length||0===this._editGeometry.components[0].vertices.length)return null;const t=this._editGeometry.components[0].vertices[0];let i=t;do{if(i.index===e)return i;i=i.right.right}while(i!==t&&null!=i);return null}getVertexPositionAsPoint(e){return this._editGeometry.coordinateHelper.createPoint(e.pos)}getVertexPositionAsPointFromIndex(e){return this._editGeometry.coordinateHelper.createPoint(this.getVertex(e).pos)}forEachVertex(e){this.initialized&&this._editGeometry.components.length>0&&this._editGeometry.components[0].iterateVertices(e)}forEachVertexPosition(e){const t=this._editGeometry.coordinateHelper;this.forEachVertex(((i,r)=>{t.toPoint(i.pos,u),e(u,r)}))}clear(){r(this.areaMeasurement)&&(this.areaMeasurement.geometry=null)}add(e){if(!this.initialized)return null;0===this._editGeometry.components.length&&this._editGeometry.components.push(new h(this._editGeometry));const t=new l(this._editGeometry,this._editGeometry.components[0],this._editGeometry.coordinateHelper.fromPoint(e));return this._editGeometry.apply(t),this.emit(\"change\",{type:\"change\"}),t}close(){if(!this.initialized)return null;if(0===this._editGeometry.components.length)return null;const e=this._editGeometry.components[0],t=new d(this._editGeometry,e);return this._editGeometry.apply(t),this.emit(\"change\",{type:\"change\"}),t}ensureContains(e,t=\"\"){let i=!1;if(this._editGeometry.components.forEach((t=>{t.iterateVertices((t=>{t===e&&(i=!0)}))})),!i)throw new Error(`vertex doesnt exist ${t}`);return i}setVertexPosition(e,t){if(!this.initialized)return null;const i=new c(this._editGeometry,e,this._editGeometry.coordinateHelper.fromPoint(t));return this._editGeometry.apply(i),this.emit(\"change\",{type:\"change\"}),i}equals(e){if(this.numVertices!==e.numVertices)return!1;let t=!0;return this.forEachVertexPosition(((i,r)=>{const o=e.getVertexPositionAsPointFromIndex(r);i.equals(o)||(t=!1)})),!!t}};e([s({value:null})],y.prototype,\"areaMeasurement\",null),e([s({value:null})],y.prototype,\"view\",null),e([s()],y.prototype,\"isValidPolygon\",null),e([s()],y.prototype,\"numVertices\",null),y=e([n(\"esri.views.3d.interactive.graphics.AreaMeasurement3D.AreaMeasurement3DPathHelper\")],y);const u=new p;export{y as AreaMeasurement3DPathHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../../chunks/tslib.es6.js\";import e from\"../../../../../core/Accessor.js\";import{destroyMaybe as t}from\"../../../../../core/maybe.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{AreaMeasurement3DPathHelper as a}from\"./AreaMeasurementPathHelper.js\";import{UnitNormalizer as p}from\"../support/UnitNormalizer.js\";let i=class extends e{constructor(){super(...arguments),this.measurementData=null,this.unitNormalizer=new p,this.path=new a,this.lastDraggedVertex=null}destroy(){this.measurementData=null,this.path=t(this.path)}get validMeasurement(){return this.path.isValidPolygon}};r([o()],i.prototype,\"measurementData\",void 0),r([o()],i.prototype,\"validMeasurement\",null),r([o()],i.prototype,\"unitNormalizer\",void 0),r([o()],i.prototype,\"path\",void 0),r([o()],i.prototype,\"lastDraggedVertex\",void 0),r([o()],i.prototype,\"cursorPoint\",void 0),i=r([s(\"esri.views.3d.layers.analysis.AreaMeasurement3D.AreaMeasurementLayerViewData\")],i);export{i as AreaMeasurementLayerViewData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{s as e,b as t,a as n,h as r,d as o,i,c as s,n as a,g as f}from\"../../../../../chunks/vec3.js\";import{c as u}from\"../../../../../chunks/vec3f64.js\";import{geodesicArea as c}from\"../../../../../geometry/geometryEngine.js\";import l from\"../../../../../geometry/Polygon.js\";import{projectPointToVector as g,projectPointToWGS84ComparableLonLat as m,projectVectorToWGS84ComparableLonLat as h}from\"../../../../../geometry/projection.js\";import p from\"../../../../../geometry/SpatialReference.js\";import{inverseGeodeticSolver as d}from\"../../../../../geometry/support/geodesicUtils.js\";import{planeFromPoints as j}from\"../../../support/mathUtils.js\";var b;!function(u){function l(o,i){const s=i.center;e(s,0,0,0);for(let e=0;e<o.length;++e)t(s,s,o[e]);n(s,s,1/o.length);let a=0;for(let e=0;e<o.length;++e)a=Math.max(a,r(s,o[e]));i.radius=Math.sqrt(a)}function p(e,t){if(e.length<3)throw new Error(\"need at least 3 points to fit a plane\");j(e[0],e[1],e[2],t)}function b(e,t){return o(e,t)+e[3]}function G(e,t,n){return g(e,y,n)&&g(t,M,n)?i(y,M):0}function S(e,t){if(!m(e,y)||!m(t,M))return 0;const n={distance:null};return d(n,[y[0],y[1]],[M[0],M[1]]),n.distance}function w(e,t,n){const r={distance:null};return d(r,[e[0],e[1]],[t[0],t[1]],n),r.distance}function z(e,t,n){const r=t[0]-e[0],o=t[1]-e[1],i=n[0]-e[0],s=n[1]-e[1];return.5*Math.abs(r*s-o*i)}function L(e,t,n,r){const o=v;return h(e,r,y)&&h(t,r,M)&&h(n,r,P)?(o.setPoint(0,0,y),o.setPoint(0,1,M),o.setPoint(0,2,P),Math.abs(c(o,\"square-meters\"))):0}function k(t,n,r){Math.abs(t[0])>Math.abs(t[1])?e(n,0,1,0):e(n,1,0,0),s(r,t,n),a(n,n),s(n,r,t),a(r,r)}function q(n,r=null,i=!0){const u=1e-6,c=(e,t)=>{if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(let n=0;n<e.length;++n)if(o(t,e[n])<-u)return!1;return!0};if(0===n.length)return!1;if(1===n.length)return r&&f(r,n[0]),!0;e(E,0,0,0);for(let e=0;e<n.length;++e)t(E,E,n[e]);if(a(E,E),c(n,E))return r&&f(r,E),!0;if(!i)return!1;for(let e=0;e<n.length;++e)for(let t=0;t<n.length;++t)if(e!==t&&(s(E,n[e],n[t]),a(E,E),c(n,E)))return r&&f(r,E),!0;return!1}function x(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let n=0;n<e.size;++n)if(!t.has(e[n]))return!1;return!0}u.boundingSphere=l,u.bestFitPlane=p,u.planePointDistance=b,u.segmentLengthEuclidean=G,u.segmentLengthGeodesic=S,u.segmentLengthGeodesicVector=w,u.triangleAreaEuclidean=z,u.triangleAreaGeodesic=L,u.tangentFrame=k,u.fitHemisphere=q,u.compareSets=x}(b||(b={}));const y=u(),M=u(),P=u(),v=new l({rings:[[y,M,P]],spatialReference:p.WGS84}),E=u();var G=b;export default G;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{bindMultipassTerrainTexture as e}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as t,bindView as o}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as s}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as a,parameter as n}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as p}from\"../lib/DefaultVertexAttributeLocations.js\";import{OITBlending as l,OITDepthTest as c,OITDepthWrite as m}from\"../lib/OrderIndependentTransparency.js\";import{Program as d}from\"../lib/Program.js\";import{C as h}from\"../../../../chunks/CheckerBoard.glsl.js\";import{makePipelineState as u,defaultDepthWriteParams as f,defaultColorWriteParams as g,separateBlendingParams as b}from\"../../../webgl/renderState.js\";class y extends s{initializeProgram(r){const e=y.shader.get(),t=this.configuration,o=e.build({OITEnabled:0===t.transparencyPassType,multipassTerrainEnabled:t.multipassTerrainEnabled,cullAboveGround:t.cullAboveGround});return new d(r.rctx,o,p)}bindPass(r,o){t(this.program,o.camera.projectionMatrix),this.program.setUniform2fv(\"size\",r.size),this.program.setUniform4fv(\"color1\",r.color1),this.program.setUniform4fv(\"color2\",r.color2),o.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",o.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",o.inverseViewport),e(this.program,o))}bindDraw(r){o(this.program,r)}setPipelineState(r){const e=this.configuration,t=3===r,o=2===r;return u({blending:e.transparent?t?v:l(r):null,depthTest:{func:c(r)},depthWrite:t?e.writeDepth&&f:m(r),colorWrite:g,polygonOffset:t||o?e.polygonOffset&&T:{factor:-1,units:-25}})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}}y.shader=new i(h,(()=>import(\"./CheckerBoard.glsl.js\")));const T={factor:0,units:-25},v=b(770,1,771,771);class j extends a{constructor(){super(...arguments),this.transparent=!1,this.writeDepth=!0,this.polygonOffset=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}r([n()],j.prototype,\"transparent\",void 0),r([n()],j.prototype,\"writeDepth\",void 0),r([n()],j.prototype,\"polygonOffset\",void 0),r([n({count:4})],j.prototype,\"transparencyPassType\",void 0),r([n()],j.prototype,\"multipassTerrainEnabled\",void 0),r([n()],j.prototype,\"cullAboveGround\",void 0);export{y as CheckerBoardTechnique,j as CheckerBoardTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../lib/GLMaterial.js\";import{Material as t,materialParametersDefaults as r}from\"../lib/Material.js\";import{DefaultBufferWriter as i,PositionUVLayout as s}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as n}from\"./internal/MaterialUtil.js\";import{CheckerBoardTechniqueConfiguration as a,CheckerBoardTechnique as o}from\"../shaders/CheckerBoardTechnique.js\";class u extends t{constructor(e){super(e,c),this.techniqueConfig=new a}dispose(){}getPassParameters(){return this.params}getTechniqueConfig(e){return this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.transparencyPassType=e?e.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!e&&e.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!e&&e.cullAboveGround,this.techniqueConfig}intersect(e,t,r,i,s,a,o){return n(e,t,i,s,a,void 0,o)}getGLMaterial(e){return 0===e.output||7===e.output?new h(e):void 0}createBufferWriter(){return new i(s)}}class h extends e{constructor(e){super(e),this.updateParameters()}updateParameters(e){this._technique=this._techniqueRep.releaseAndAcquire(o,this._material.getTechniqueConfig(e),this._technique)}beginSlot(e){let t=3;return this._technique.configuration.transparent&&(t=this._technique.configuration.writeDepth?5:8),e===t}ensureParameters(e){this.updateParameters(e)}bind(e){this._technique.bindPass(this._material.getPassParameters(),e)}}const c={size:[1,1],color1:[.75,.75,.75,1],color2:[.5,.5,.5,1],transparent:!1,writeDepth:!0,polygonOffset:!1,...r};export{u as CheckerBoardMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as r}from\"../../../../core/maybe.js\";import{u as t}from\"../../../../chunks/mat4.js\";import{f as s}from\"../../../../chunks/vec3.js\";import{c as o}from\"../../../../chunks/vec3f64.js\";import{Object3DVisualElement as i}from\"./Object3DVisualElement.js\";import{Geometry as c}from\"../../webgl-engine/lib/Geometry.js\";import{CheckerBoardMaterial as a}from\"../../webgl-engine/materials/CheckerBoardMaterial.js\";class l extends i{constructor(e){super(e),this._checkerBoardMaterial=null,this._renderOccluded=4,this._geometry=null,this._size=[1,1],this._color1=[1,.5,0,.5],this._color2=[1,1,1,.5],this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.geometryChanged()}get size(){return this._size}set size(e){this._size=e,this.updateMaterial()}get color1(){return this._color1}set color1(e){this._color1=e,this.updateMaterial()}get color2(){return this._color2}set color2(e){this._color2=e,this.updateMaterial()}updateMaterial(){e(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameterValues({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded})}createExternalResources(){this._checkerBoardMaterial=new a({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:4})}destroyExternalResources(){this._checkerBoardMaterial=null}forEachExternalMaterial(r){e(this._checkerBoardMaterial)&&r(this._checkerBoardMaterial)}createGeometries(e){if(r(this._geometry)||r(this._checkerBoardMaterial))return;const i=h;t(i,this.transform);const a=this._geometry,l=[],d=o();a.position.forEach((e=>{s(d,e,i),l.push(d[0],d[1],d[2])}));const n=[];a.uv.forEach((e=>{n.push(e[0],e[1])}));const u=new c([[\"position\",{size:3,data:l,exclusive:!0}],[\"uv0\",{size:2,data:n,exclusive:!0}]],[[\"position\",a.triangleIndices],[\"uv0\",a.triangleIndices]]);e.addGeometry(u,this._checkerBoardMaterial)}geometryChanged(){this.recreateGeometry()}}const h=o();export{l as MeasurementAreaVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../intl.js\";import t from\"../../../../../core/Accessor.js\";import\"../../../../../core/has.js\";import i from\"../../../../../core/Handles.js\";import{nextHighestPowerOfTen as s}from\"../../../../../core/mathUtils.js\";import{isNone as r,isSome as n,unwrap as a}from\"../../../../../core/maybe.js\";import o from\"../../../../../core/Quantity.js\";import{formatDecimal as l}from\"../../../../../core/quantityFormatUtils.js\";import{convertUnit as h,preferredImperialAreaUnit as m,preferredMetricAreaUnit as c,preferredImperialLengthUnit as d,preferredMetricLengthUnit as u}from\"../../../../../core/unitUtils.js\";import{whenOnce as p}from\"../../../../../core/watchUtils.js\";import{property as g}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as _}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{reactionInit as L}from\"../../../../../core/accessorSupport/trackingUtils.js\";import{i as b,t as v}from\"../../../../../chunks/mat4.js\";import{c as f}from\"../../../../../chunks/mat4f64.js\";import{f as w}from\"../../../../../chunks/vec3.js\";import{c as S}from\"../../../../../chunks/vec3f64.js\";import y from\"../../../interactive/measurementTools/support/measurementUtils.js\";import{midpoint as j}from\"../../../interactive/measurementTools/support/viewUtils.js\";import{LabelVisualElement as C}from\"../../../interactive/visualElements/LabelVisualElement.js\";import{LineVisualElement as P}from\"../../../interactive/visualElements/LineVisualElement.js\";import{MeasurementAreaVisualElement as V}from\"../../../interactive/visualElements/MeasurementAreaVisualElement.js\";import{GeodesicSegment as A,EuclideanSegment as D}from\"../../../interactive/visualElements/support/Segment.js\";import{createStipplePatternSimple as R}from\"../../../webgl-engine/materials/lineStippleUtils.js\";import{onLocaleChange as M}from\"../../../../../intl/locale.js\";import{fetchMessageBundle as I}from\"../../../../../intl/messages.js\";let U=class extends t{constructor(e){super(e),this._handles=new i,this._params={...z},this._path=null,this._intersectedPath=null,this._perimeter=null,this._intersectedPerimeter=null,this._projectionLines=null,this._measurementArea=null,this._areaLabel=null,this._pathLengthLabel=null,this._cursorSegmentLengthLabel=null,this._perimeterLengthLabel=null,this._pathSegments=[],this._perimeterSegments=[],this._cursorSegment=null,this._origin=S(),this._originTransform=f(),this._cursorPositionRenderSpace=S(),this.messages=null,this.viewData=k,this.areaLabel=null,this.perimeterLengthLabel=null,this.mode=\"auto\",this.geodesicMeasurementDistanceThreshold=1e5}get visible(){return this.layerView.visible&&!this.layerView.suspended}get testData(){return{labels:{area:this._areaLabel,pathLength:this._pathLengthLabel,cursorSegmentLength:this._cursorSegmentLengthLabel,perimeterLength:this._perimeterLengthLabel}}}initialize(){const e=this.view;this._path=new P({view:e,attached:!0,width:this._params.pathLineWidth,color:this._params.pathLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPath=new P({view:e,attached:!0,width:this._params.pathLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._perimeter=new P({view:e,attached:!0,width:this._params.perimeterLineWidth,color:this._params.perimeterLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPerimeter=new P({view:e,attached:!0,width:this._params.perimeterLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._projectionLines=new P({view:e,attached:!0,width:this._params.projectionLineWidth,color:this._params.projectionLineColor,stipplePattern:R(this._params.projectionLineStippleSize),stippleIntegerRepeats:!1,polygonOffset:!0,renderOccluded:4}),this._measurementArea=new V({view:e,attached:!0,color1:this._params.areaColor1,color2:this._params.areaColor2}),this._areaLabel=new C({view:this.view,attached:!0,fontSize:16}),this._pathLengthLabel=new C({view:e,attached:!0,fontSize:12}),this._cursorSegmentLengthLabel=new C({view:e,attached:!0,fontSize:12}),this._perimeterLengthLabel=new C({view:e,attached:!0,fontSize:12});const t=this.layerView,i=t.layerViewData;this._handles.add([L((()=>[this.mode,this.visible,t.unit,i.measurementData,i.cursorPoint]),(()=>this._update())),L((()=>{var t;return null==(t=e.state)?void 0:t.camera}),(()=>this._updateLabels())),M((async()=>this._updateMessageBundle()))]),this._updateMessageBundle()}destroy(){this._measurementArea.destroy(),this._measurementArea=null,this._path.destroy(),this._path=null,this._intersectedPath.destroy(),this._intersectedPath=null,this._perimeter.destroy(),this._perimeter=null,this._intersectedPerimeter.destroy(),this._intersectedPerimeter=null,this._areaLabel.destroy(),this._areaLabel=null,this._pathLengthLabel.destroy(),this._pathLengthLabel=null,this._cursorSegmentLengthLabel.destroy(),this._cursorSegmentLengthLabel=null,this._perimeterLengthLabel.destroy(),this._perimeterLengthLabel=null,this.set(\"view\",null)}async whenMessages(){await p(this,\"messages\")}_update(){if(this.destroyed)return;const e=this.layerView.layerViewData.measurementData;r(e)||(this._updateViewData(e,this.layerView.layerViewData.path,this.layerView.layerViewData.cursorPoint),this._updateOrigin(),this._updatePathSegments(),this._updatePerimeterSegments(),this._updateArea(),this._updateProjectionLines(),this._updateLabels())}_updateViewData(e,t,i){const r=t.isValidPolygon,a=t.lastPoint,l=n(a)&&n(i)?new o(y.segmentLengthGeodesic(a,i),\"meters\"):null,m=n(a)&&n(i)?new o(e.unitNormalizer.normalizeDistance(y.segmentLengthEuclidean(a,i,e.unitNormalizer.spatialReference)),\"meters\"):null;let c;if(\"auto\"===this.mode){c=\"euclidean\";(e.geodesicPathLength?e.geodesicPathLength.value:0)+(!r&&n(l)?l.value:0)>this.geodesicMeasurementDistanceThreshold&&(c=\"geodesic\")}else c=this.mode;null==e.geodesicPathLength&&(c=\"euclidean\");const d=\"geodesic\"===c,u=d?e.geodesicArea:e.area;let p=1;if(u){const t=this._toPreferredAreaUnit(u,this.layerView.unit);p=s(Math.sqrt(t.value)/Math.sqrt(300)),p*=Math.sqrt(h(1,t.unit,\"square-meters\")),p/=e.unitNormalizer.normalizeDistance(1)}const g={validMeasurement:r,path:t,pathVersion:t.version,cursorPoint:i,measurementData:e,mode:c,positionsGeographic:e.positionsGeographic,positionsRenderCoords:e.positionsRenderCoords,positionsProjected:e.positionsProjectedWorldCoords,positionsFittedRenderCoords:e.positionsFittedRenderCoords,intersectingSegments:d?e.geodesicIntersectingSegments:e.intersectingSegments,triangleIndices:d?e.geodesicTriangleIndices:e.triangleIndices,fittingMode:e.fittingMode,areaCentroid:d?e.geodesicAreaCentroidRenderCoords:e.areaCentroidRenderCoords,pathLengthLabelSegmentIndex:r?0:t.numVertices-2,perimeterLengthLabelSegmentIndex:0,checkerSize:p,geodesicCursorSegmentLength:l,cursorSegmentLength:m};this._set(\"viewData\",g)}_updateOrigin(){const e=this.viewData;j(e.positionsRenderCoords,this._origin),b(this._originTransform),v(this._originTransform,this._originTransform,this._origin),this._measurementArea.transform=this._originTransform,this._projectionLines.transform=this._originTransform}_createSegments(e){const t=this.viewData,i=t.path,s=this.view.renderCoordsHelper.spatialReference,r=t.mode,n=[],a=[],o=[],l=t.validMeasurement?i.numVertices:i.numVertices-1;for(let h=0;h<l;++h){const l=t[e][h],m=t[e][(h+1)%i.numVertices];let c=null;switch(r){case\"euclidean\":c=new D(l,m);break;case\"geodesic\":c=new A(l,m,s)}t.intersectingSegments.has(h)?o.push(c):a.push(c),n.push(c)}return{all:n,nonIntersecting:a,intersecting:o}}_updatePathSegments(){const e=this.visible,t=this.viewData,i=this._createSegments(\"positionsRenderCoords\"),s=t.path,r=!s.isValidPolygon,a=t.cursorPoint,o=this.view.renderCoordsHelper,l=o.spatialReference,h=t.mode;if(this._cursorSegment=null,s.numVertices>0&&r&&n(a)){if(o.toRenderCoords(a,this._cursorPositionRenderSpace)){const e=t.positionsRenderCoords[s.numVertices-1],r=this._cursorPositionRenderSpace;let n=null;switch(h){case\"euclidean\":n=new D(e,r);break;case\"geodesic\":n=new A(e,r,l)}i.nonIntersecting.push(n),this._cursorSegment=n}}this._path.setGeometryFromSegments(i.nonIntersecting,this._origin),this._path.visible=e,this._intersectedPath.setGeometryFromSegments(i.intersecting,this._origin),this._intersectedPath.visible=e,this._pathSegments=i.all}_updatePerimeterSegments(){const e=this.visible&&\"euclidean\"===this.viewData.mode,t=this._createSegments(\"positionsFittedRenderCoords\");this._perimeter.setGeometryFromSegments(t.nonIntersecting,this._origin),this._perimeter.visible=e,this._intersectedPerimeter.setGeometryFromSegments(t.intersecting,this._origin),this._intersectedPerimeter.visible=e,this._perimeterSegments=t.all}_updateArea(){const e=this.viewData;switch(e.mode){case\"euclidean\":this._updateAreaEuclidean(e);break;case\"geodesic\":this._updateAreaGeodesic()}}_updateAreaEuclidean(e){const t=this.visible;e.validMeasurement&&0===e.intersectingSegments.size&&e.triangleIndices?(this._measurementArea.geometry={uv:e.positionsProjected,position:e.positionsFittedRenderCoords,triangleIndices:e.triangleIndices},this._measurementArea.size=[e.checkerSize,e.checkerSize],this._measurementArea.visible=t):this._measurementArea.visible=!1}_updateAreaGeodesic(){this._measurementArea.visible=!1}_updateProjectionLines(){const e=this.viewData,t=this.visible,i=e.path,s=e.mode;if(i.numVertices>0&&e.validMeasurement&&\"euclidean\"===s){const s=[];for(let t=0;t<i.numVertices;++t){const i=S();w(i,e.positionsRenderCoords[t],this._origin);const r=S();w(r,e.positionsFittedRenderCoords[t],this._origin),s.push([i,r])}this._projectionLines.geometry=s,this._projectionLines.visible=t}else this._projectionLines.geometry=null,this._projectionLines.visible=!1}_updateLabels(){if(this.destroyed)return;const e=this.viewData,t=e.path;if(!t)return;const i=e.measurementData,s=e.mode,r=!t.isValidPolygon,o=this.visible,l=this._formatAreaLabel(this.messages,\"geodesic\"===s?i.geodesicArea:i.area,this.layerView.unit);n(l)?(this._areaLabel.geometry={type:\"point\",point:e.areaCentroid},this._areaLabel.text=l,this._areaLabel.visible=e.validMeasurement&&0===e.intersectingSegments.size&&o):this._areaLabel.visible=!1,this._set(\"areaLabel\",a(l));const h=this._formatLengthLabel(this.messages,\"geodesic\"===s?i.geodesicPathLength:i.pathLength,this.layerView.unit);if(n(h)&&e.pathLengthLabelSegmentIndex>=0&&e.pathLengthLabelSegmentIndex<this._pathSegments.length){const i=this._pathSegments[e.pathLengthLabelSegmentIndex],s=n(this._cursorSegment)?this._cursorSegment:O;this._pathLengthLabel.distance=this._params.labelDistance,this._pathLengthLabel.geometry={type:\"corner\",left:i,right:s},this._pathLengthLabel.text=h,this._pathLengthLabel.visible=r&&t.numVertices>0&&o}else this._pathLengthLabel.visible=!1;const m=\"geodesic\"===s?e.geodesicCursorSegmentLength:e.cursorSegmentLength;if(n(m)){const e=this._formatLengthLabel(this.messages,m,this.layerView.unit);this._cursorSegmentLengthLabel.distance=this._params.labelDistance,this._cursorSegmentLengthLabel.geometry=n(this._cursorSegment)?{type:\"segment\",segment:this._cursorSegment,sampleLocation:\"end\"}:null,this._cursorSegmentLengthLabel.anchor=\"bottom\",this._cursorSegmentLengthLabel.text=a(e),this._cursorSegmentLengthLabel.visible=r&&0!==m.value&&o}else this._cursorSegmentLengthLabel.visible=!1;this._cursorSegmentLengthLabel.overlaps(this._pathLengthLabel)&&(this._cursorSegmentLengthLabel.visible=!1),this._pathLengthLabel.overlaps(this._areaLabel)&&(this._pathLengthLabel.visible=!1);const c=\"geodesic\"===e.mode,d=c?i.geodesicPathLength:i.perimeterLength,u=a(null!=d?this._formatLengthLabel(this.messages,d,this.layerView.unit):null);if(this._set(\"perimeterLengthLabel\",a(u)),e.validMeasurement&&0===e.intersectingSegments.size){this._perimeterLengthLabel.distance=this._params.labelDistance,this._perimeterLengthLabel.anchor=\"top\",this._perimeterLengthLabel.text=u,this._perimeterLengthLabel.visible=!0;let t=!0;for(let i=0;i<e.path.numVertices;++i){const s=(e.perimeterLengthLabelSegmentIndex+i)%e.path.numVertices,r=c?this._pathSegments[s]:this._perimeterSegments[s];if(t=!0,this._perimeterLengthLabel.geometry={type:\"segment\",segment:r,sampleLocation:\"center\"},!this._perimeterLengthLabel.overlaps(this._areaLabel))break;t=!1}this._perimeterLengthLabel.visible=t&&o}else this._perimeterLengthLabel.visible=!1}_toPreferredAreaUnit(e,t){return e.toUnit(this._preferredAreaUnit(e,t))}_preferredAreaUnit(e,t){switch(t){case\"metric\":return c(e.value,e.unit);case\"imperial\":return m(e.value,e.unit);default:return t}}_preferredLengthUnit(e,t){const i=this._deriveLengthUnitFromAreaUnit(t);switch(i){case\"metric\":return u(e.value,e.unit);case\"imperial\":return d(e.value,e.unit);default:return i}}_deriveLengthUnitFromAreaUnit(e){switch(e){case\"metric\":return\"metric\";case\"imperial\":return\"imperial\";case\"square-inches\":return\"inches\";case\"square-feet\":return\"feet\";case\"square-yards\":return\"yards\";case\"square-miles\":return\"miles\";case\"square-us-feet\":return\"us-feet\";case\"square-millimeters\":return\"millimeters\";case\"square-centimeters\":return\"centimeters\";case\"square-decimeters\":return\"decimeters\";case\"square-meters\":return\"meters\";case\"square-kilometers\":return\"kilometers\";case\"acres\":return\"imperial\";case\"ares\":case\"hectares\":return\"metric\"}throw new Error(\"unhandled area unit\")}_formatAreaLabel(e,t,i){return e&&t&&l(e,t,this._preferredAreaUnit(t,i))}_formatLengthLabel(e,t,i){return e&&t&&l(e,t,this._preferredLengthUnit(t,i))}_updateMessageBundle(){I(\"esri/core/t9n/Units\").then((e=>{this.messages=e,this.view&&this._update()}))}};e([g()],U.prototype,\"view\",void 0),e([g()],U.prototype,\"messages\",void 0),e([g()],U.prototype,\"analysis\",void 0),e([g()],U.prototype,\"viewData\",void 0),e([g()],U.prototype,\"layerView\",void 0),e([g({readOnly:!0})],U.prototype,\"areaLabel\",void 0),e([g({readOnly:!0})],U.prototype,\"perimeterLengthLabel\",void 0),e([g()],U.prototype,\"mode\",void 0),e([g({readOnly:!0})],U.prototype,\"visible\",null),e([g()],U.prototype,\"geodesicMeasurementDistanceThreshold\",void 0),U=e([_(\"esri.views.3d.layers.analysis.AreaMeasurement.AreaMeasurementView\")],U);const z={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:1,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,handleRadiusHovered:10,handleRadiusMouse:10,handleRadiusTouch:25,pathLineColor:[1,.5,0,1],pathLineWidth:3,intersectingLineColor:[1,.2,0,1],perimeterLineColor:[1,.5,0,1],perimeterLineWidth:2,projectionLineColor:[1,.5,0,1],projectionLineWidth:2,projectionLineStippleSize:5,areaColor1:[1,.5,0,.5],areaColor2:[1,1,1,.5],fillColor:[1,.5,0,.5],lineSubdivisions:64,labelDistance:25},k={validMeasurement:!1,path:null,pathVersion:-1,cursorPoint:null,measurementData:null,mode:null,positionsGeographic:null,positionsRenderCoords:null,positionsProjected:null,positionsFittedRenderCoords:null,intersectingSegments:null,triangleIndices:null,fittingMode:null,areaCentroid:null,pathLengthLabelSegmentIndex:null,perimeterLengthLabelSegmentIndex:null,checkerSize:null,geodesicCursorSegmentLength:null,cursorSegmentLength:null},O=new D(S(),S());export{U as AreaMeasurementView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{unwrapOr as t,isSome as r,destroyMaybe as a}from\"../../../core/maybe.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{defaultUnitPropertyMetadata as o}from\"../../../properties/defaultUnit.js\";import{LayerView3D as n}from\"./LayerView3D.js\";import{AreaMeasurementController as l}from\"./analysis/AreaMeasurement/AreaMeasurementController.js\";import{AreaMeasurementLayerViewData as p}from\"./analysis/AreaMeasurement/AreaMeasurementLayerViewData.js\";import{AreaMeasurementView as y}from\"./analysis/AreaMeasurement/AreaMeasurementView.js\";import h from\"../../layers/LayerView.js\";let u=class extends(n(h)){constructor(e){super(e),this.type=\"area-measurement-3d\",this.layerViewData=new p,this._userUnit=null}set unit(e){this._userUnit=e}get unit(){return t(this._userUnit,this._defaultUnit)}get result(){if(r(this.layerViewData.measurementData)){const e=this.layerViewData.measurementData;return{area:e.area,geodesicArea:e.geodesicArea,pathLength:e.pathLength,geodesicPathLength:e.geodesicPathLength,perimeterLength:e.perimeterLength}}return{area:null,geodesicArea:null,pathLength:null,geodesicPathLength:null,perimeterLength:null}}initialize(){this.layerViewData.path.view=this.view,this.layerViewData.path.areaMeasurement=this.layer,this.analysisView=new y({view:this.view,analysis:this.layer,layerView:this}),this.analysisController=new l({view:this.view,analysis:this.layer,layerViewData:this.layerViewData})}destroy(){this.analysisController=a(this.analysisController),this.analysisView=a(this.analysisView)}get testData(){return{view:this.analysisView,controller:this.analysisController}}};e([s()],u.prototype,\"type\",void 0),e([s()],u.prototype,\"analysisView\",void 0),e([s()],u.prototype,\"analysisController\",void 0),e([s()],u.prototype,\"unit\",null),e([s()],u.prototype,\"layer\",void 0),e([s()],u.prototype,\"result\",null),e([s()],u.prototype,\"layerViewData\",void 0),e([s(o)],u.prototype,\"_defaultUnit\",void 0),e([s()],u.prototype,\"_userUnit\",void 0),u=e([i(\"esri.views.3d.layers.AreaMeasurementLayerView3D\")],u);var m=u;export default m;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ReadLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{ColorConversion as r}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as i}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as d}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function o(o){const t=new d;return t.extensions.add(\"GL_OES_standard_derivatives\"),t.attributes.add(\"position\",\"vec3\"),t.attributes.add(\"uv0\",\"vec2\"),t.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),t.varyings.add(\"vUV\",\"vec2\"),o.multipassTerrainEnabled&&t.varyings.add(\"depth\",\"float\"),t.vertex.code.add(i`\n    void main(void) {\n      vUV = uv0;\n      ${o.multipassTerrainEnabled?\"depth = (view * vec4(position, 1.0)).z;\":\"\"}\n      gl_Position = proj * view * vec4(position, 1.0);\n    }\n  `),o.multipassTerrainEnabled&&(t.fragment.include(e),t.include(a,o)),t.fragment.uniforms.add(\"size\",\"vec2\").add(\"color1\",\"vec4\").add(\"color2\",\"vec4\"),t.fragment.include(r),t.fragment.code.add(i`\n    void main() {\n      ${o.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n      vec2 uvScaled = vUV / (2.0 * size);\n\n      vec2 uv = fract(uvScaled - 0.25);\n      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n      float t = mix(abs(ab.x + ab.y), 0.5, fade);\n\n      gl_FragColor = mix(color2, color1, t);\n      ${o.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    }\n  `),t}var t=Object.freeze({__proto__:null,build:o});export{t as C,o as b};\n"],"sourceRoot":""}