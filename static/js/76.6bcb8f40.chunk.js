(this.webpackJsonparcgis=this.webpackJsonparcgis||[]).push([[76],{1176:function(e,t,n){"use strict";n.r(t),n.d(t,"LineOfSightLayerView3D",(function(){return U}));var i=n(2),r=n(5),s=n(6),a=n(7),o=n(0),c=n(3),l=n(1),u=(n(17),n(18),n(15),n(10)),b=n(572),h=n(8),d=n.n(h),O=n(16),y=(n(126),n(30)),f=n(57),p=n(191),j=n(23),v=n(300),_=n(4),g=n(9),m=n(79),C=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).inputPoints={isValid:!1,observer:Object(g.e)(),target:Object(g.e)(),observerAdjusted:Object(g.e)(),targetAdjusted:Object(g.e)()},r.computationResult={start:Object(g.e)(),end:Object(g.e)(),intersection:Object(g.e)(),isValid:!1,isTargetVisible:!1},r.result=null,r}return Object(r.a)(n,[{key:"updateComputationResults",value:function(){this.notifyChange("computationResult")}},{key:"updateInputPoints",value:function(){this.notifyChange("inputPoints")}}]),n}(y.a);Object(o.a)([Object(l.b)()],C.prototype,"target",void 0),Object(o.a)([Object(l.b)()],C.prototype,"inputPoints",void 0),Object(o.a)([Object(l.b)()],C.prototype,"computationResult",void 0),Object(o.a)([Object(l.b)()],C.prototype,"result",void 0),C=Object(o.a)([Object(u.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightAnalysis")],C);var w=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return n}(y.a);Object(o.a)([Object(l.b)()],w.prototype,"target",void 0),Object(o.a)([Object(l.b)()],w.prototype,"intersectedGraphic",void 0),Object(o.a)([Object(l.b)()],w.prototype,"intersectedLocation",void 0),Object(o.a)([Object(l.b)()],w.prototype,"visible",void 0),w=Object(o.a)([Object(u.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightResult")],w);var k=n(144),E=n(446),V=n(97),A=n(56),R=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._tasks=V.a,r._handles=new f.a,r._analysisHandles=new f.a,r}return Object(r.a)(n,[{key:"initialize",value:function(){var e,t=this,n=null==(e=this.view.resourceController)?void 0:e.scheduler;n&&(this._tasks=n.registerTask(V.b.LINE_OF_SIGHT_TOOL)),this._handles.add([Object(v.d)((function(){return t.layer.observer}),(function(e){return t._onObserverChange(e)})),this._connectAnalyses(),this._connectTargets()]),this._intersector=new k.a(this.view.state.viewingMode),this._intersector.options.hud=!1,this._intersector.options.store=0}},{key:"destroy",value:function(){this._handles.destroy(),this._analysisHandles.destroy(),this._analyses.removeAll()}},{key:"updating",get:function(){return this._tasks.updating}},{key:"priority",get:function(){return this._tasks.priority},set:function(e){this._tasks.priority=e}},{key:"_analyses",get:function(){return this.layerViewData.analyses}},{key:"_observerEngineLocation",get:function(){return this.layerViewData.observerEngineLocation},set:function(e){this.layerViewData.observerEngineLocation=e}},{key:"_screenPixelSize",get:function(){return this.view.state.camera.computeScreenPixelSizeAt(this._observerEngineLocation)}},{key:"getLineOfSightComputationDependencies",value:function(e){return{inputPoints:e.inputPoints}}},{key:"computeAnalysis",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.analysis,i=n.inputPoints,r=n.computationResult,s=i.observerAdjusted,a=i.targetAdjusted,o=r.start,c=r.end;Object(_.m)(o,s),Object(_.m)(c,a),t||this._canComputeAnalysis(n)?this._computeAnalysisIntersection(e):this._interpolateAnalysisIntersection(e),n.updateComputationResults()}},{key:"_adjustStartEndPositions",value:function(e){var t=this._screenPixelSize,n=this.view,i=e.inputPoints,r=i.observer,s=i.target,a=i.observerAdjusted,o=i.targetAdjusted,c=L;Object(_.l)(c,s,r);var l=t;Object(_.t)(c,c),Object(_.g)(c,c,Math.min(l,1)),Object(_.h)(a,r,c),Object(_.l)(c,r,s);var u=n.state.camera.computeScreenPixelSizeAt(s);Object(_.t)(c,c),Object(_.g)(c,c,Math.min(u,1)),Object(_.h)(o,s,c)}},{key:"_computeAnalysisIntersection",value:function(e){var t=e.analysis,n=e.interpolationInfo,i=this.view,r=i.sceneIntersectionHelper,s=i.renderCoordsHelper;if(!Object(c.i)(r)){var a=this._intersector,o=t.computationResult,l=t.inputPoints,u=l.observer,b=l.target,h=o.start,d=o.end,O=Object(m.e)(h,d,I);r.intersectToolIntersectorRay(O,a);var y=o.intersection,f=L,p=!!a.results.min&&a.results.min.getIntersectionPoint(y),j=!0;if(p){Object(_.m)(n.originalIntersection,y),Object(_.m)(n.originalObserver,h),Object(_.m)(n.originalTarget,d),s.fromRenderCoords(y,f,i.spatialReference);var v=1-Object(_.p)(d,b)/Object(_.p)(h,b);j=Object(_.p)(u,y)>=v*Object(_.p)(u,b)}var g=new A.a(f,i.spatialReference);t.result=new w({target:t.target,intersectedGraphic:j?null:Object(E.a)(a.results.min,i),intersectedLocation:j?null:g,visible:!!p&&j}),o.isValid=l.isValid=!0,o.isTargetVisible=j}}},{key:"_interpolateAnalysisIntersection",value:function(e){var t=e.analysis,n=e.interpolationInfo,i=t.computationResult,r=t.inputPoints,s=i.start,a=i.end,o=i.intersection,c=n.originalIntersection,l=n.originalObserver,u=n.originalTarget;if(Object(_.m)(o,c),r.isValid){var b=L,h=Object(_.p)(l,c)/Object(_.p)(l,u);Object(_.C)(b,s,l),Object(_.g)(b,b,1-h),Object(_.h)(o,o,b),Object(_.C)(b,a,u),Object(_.g)(b,b,h),Object(_.h)(o,o,b),i.isValid=!0}else t.result=null,i.isValid=!1,i.isTargetVisible=!1}},{key:"_canComputeAnalysis",value:function(e){var t=this.layer.observer,n=this.view.frustum;if(Object(c.i)(t)||Object(c.i)(e.target)||Object(c.i)(n))return!1;var i=e.inputPoints,r=i.observerAdjusted,s=i.targetAdjusted,a=n.intersectsPoint(r),o=n.intersectsPoint(s);return a&&o}},{key:"_onObserverChange",value:function(e){if(Object(c.i)(e))this.layer.targets.removeAll();else{var t=Object(g.e)();this.view.renderCoordsHelper.toRenderCoords(e,t),this._observerEngineLocation=t,this.priority=V.b.LINE_OF_SIGHT_TOOL_INTERACTIVE}}},{key:"_onObserverChangeForAnalysis",value:function(e){e.inputPoints.isValid=!1}},{key:"_onObserverEngineForAnalysis",value:function(e,t){var n=e.inputPoints;Object(_.m)(n.observer,t),this._adjustStartEndPositions(e),e.updateInputPoints(),this.priority=V.b.LINE_OF_SIGHT_TOOL_INTERACTIVE}},{key:"_onTargetLocationChange",value:function(e,t){var n=e.inputPoints;n.isValid=!1,this.view.renderCoordsHelper.toRenderCoords(t,n.target),this._adjustStartEndPositions(e),e.updateInputPoints(),this.priority=V.b.LINE_OF_SIGHT_TOOL_INTERACTIVE}},{key:"_connectAnalysisToTarget",value:function(e){var t=this;return Object(v.d)((function(){return{analysis:e,target:e.target}}),(function(e){var n=e.analysis,i=e.target;Object(c.j)(i)&&t._onTargetLocationChange(n,i)}))}},{key:"_connectAnalysisToObserver",value:function(e){var t=this;return Object(v.d)((function(){return{analysis:e,observer:t.layer.observer}}),(function(e){var n=e.analysis;t._onObserverChangeForAnalysis(n)}))}},{key:"_connectAnalysisToObserverEngine",value:function(e){var t=this;return Object(v.d)((function(){return{analysis:e,observer:t._observerEngineLocation}}),(function(e){var n=e.analysis,i=e.observer;t._onObserverEngineForAnalysis(n,i)}))}},{key:"_connectAnalysisForCompute",value:function(e){var t=this,n=c.o,i={analysis:e,interpolationInfo:{originalIntersection:Object(g.e)(),originalObserver:Object(g.e)(),originalTarget:Object(g.e)()}};return Object(p.a)([Object(v.d)((function(){return t.getLineOfSightComputationDependencies(e)}),(function(){n=Object(c.a)(n),n=Object(j.i)(function(){var e=Object(O.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.m)(t._tasks.schedule((function(){return t.computeAnalysis(i)}),n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),Object(p.b)((function(){return n=Object(c.a)(n)}))])}},{key:"_connectAnalysis",value:function(e){var t=this._analysisHandles;t.has(e)||t.add([this._connectAnalysisToTarget(e),this._connectAnalysisToObserver(e),this._connectAnalysisToObserverEngine(e),this._connectAnalysisForCompute(e)])}},{key:"_disconnectAnalysis",value:function(e){this._analysisHandles.remove(e)}},{key:"_onAnalysesCollectionChange",value:function(e){var t=this;e.added.forEach((function(e){return t._connectAnalysis(e)})),e.removed.forEach((function(e){return t._disconnectAnalysis(e)}))}},{key:"_onTargetsChange",value:function(e){var t=this;return this._analyses.removeAll(),e.items.length>0&&e.forEach((function(e){return t._addTarget(e)})),e.on("change",(function(e){return t._onTargetCollectionChange(e)}))}},{key:"_onTargetCollectionChange",value:function(e){var t=this;e.added.forEach((function(e){return t._addTarget(e)})),e.removed.forEach((function(e){return t._removeTarget(e)}))}},{key:"_addTarget",value:function(e){var t=this._analyses;t.some((function(t){return t.target===e}))||t.add(new C({target:e}))}},{key:"_removeTarget",value:function(e){var t=this._analyses,n=t.find((function(t){return t.target===e}));t.remove(n)}},{key:"_connectAnalyses",value:function(){var e=this,t=null;return Object(p.a)([Object(v.d)((function(){return e._analyses}),(function(n){t=Object(c.r)(t),t=n.on("change",(function(t){return e._onAnalysesCollectionChange(t)})),n.forEach((function(t){return e._connectAnalysis(t)}))})),Object(p.b)((function(){return t=Object(c.r)(t)}))])}},{key:"_connectTargets",value:function(){var e=this,t=null;return Object(p.a)([Object(v.d)((function(){return e.layer.targets}),(function(n){t=Object(c.r)(t),t=e._onTargetsChange(n)})),Object(p.b)((function(){return t=Object(c.r)(t)}))])}}]),n}(y.a);Object(o.a)([Object(l.b)({constructOnly:!0})],R.prototype,"layer",void 0),Object(o.a)([Object(l.b)({constructOnly:!0})],R.prototype,"layerViewData",void 0),Object(o.a)([Object(l.b)({constructOnly:!0})],R.prototype,"view",void 0),Object(o.a)([Object(l.b)()],R.prototype,"updating",null),Object(o.a)([Object(l.b)()],R.prototype,"priority",null),Object(o.a)([Object(l.b)()],R.prototype,"_analyses",null),Object(o.a)([Object(l.b)()],R.prototype,"_observerEngineLocation",null),Object(o.a)([Object(l.b)()],R.prototype,"_screenPixelSize",null),Object(o.a)([Object(l.b)()],R.prototype,"_tasks",void 0),R=Object(o.a)([Object(u.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightController")],R);var L=Object(g.e)(),I=Object(m.c)(),T=n(53),P=n(49),S=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).innerWidth=2,r.outerWidth=8,r.visibleInnerColor=new P.a([3,252,111,1]),r.visibleOuterColor=new P.a([3,252,111,.15]),r.occludedInnerColor=new P.a([252,3,69,1]),r.occludedOuterColor=new P.a([252,3,69,.1]),r.undefinedInnerColor=new P.a([255,255,255,1]),r.undefinedOuterColor=new P.a([127,127,127,.2]),r}return n}(y.a);Object(o.a)([Object(l.b)({type:Number})],S.prototype,"innerWidth",void 0),Object(o.a)([Object(l.b)({type:Number})],S.prototype,"outerWidth",void 0),Object(o.a)([Object(l.b)({type:P.a})],S.prototype,"visibleInnerColor",void 0),Object(o.a)([Object(l.b)({type:P.a})],S.prototype,"visibleOuterColor",void 0),Object(o.a)([Object(l.b)({type:P.a})],S.prototype,"occludedInnerColor",void 0),Object(o.a)([Object(l.b)({type:P.a})],S.prototype,"occludedOuterColor",void 0),Object(o.a)([Object(l.b)({type:P.a})],S.prototype,"undefinedInnerColor",void 0),Object(o.a)([Object(l.b)({type:P.a})],S.prototype,"undefinedOuterColor",void 0),S=Object(o.a)([Object(u.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightConfiguration")],S);var D=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).analyses=new T.a,e.configuration=new S,e.observerEngineLocation=Object(g.e)(),e}return n}(y.a);Object(o.a)([Object(l.b)()],D.prototype,"analyses",void 0),Object(o.a)([Object(l.b)({type:S})],D.prototype,"configuration",void 0),Object(o.a)([Object(l.b)()],D.prototype,"observerEngineLocation",void 0),D=Object(o.a)([Object(u.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightLayerViewData")],D);var G=n(14),H=n(31),M=n(787),F=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._handle=null,r._analysisHandles=new f.a,r}return Object(r.a)(n,[{key:"initialize",value:function(){this._handle=this._connectAnalyses()}},{key:"destroy",value:function(){this._handle=Object(c.r)(this._handle),this._analysisHandles=Object(c.e)(this._analysisHandles)}},{key:"_analyses",get:function(){return this.layerViewData.analyses}},{key:"_configuration",get:function(){return this.layerViewData.configuration}},{key:"createLineOfSightVisualization",value:function(){var e=this._configuration,t={view:this.view,attached:!0,width:e.outerWidth,innerWidth:e.innerWidth};return{visibleLineVisualElement:new M.a(Object(G.a)(Object(G.a)({},t),{},{color:P.a.toUnitRGBA(e.visibleOuterColor),innerColor:P.a.toUnitRGBA(e.visibleInnerColor)})),occludedLineVisualElement:new M.a(Object(G.a)(Object(G.a)({},t),{},{color:P.a.toUnitRGBA(e.occludedOuterColor),innerColor:P.a.toUnitRGBA(e.occludedInnerColor)})),undefinedLineVisualElement:new M.a(Object(G.a)(Object(G.a)({},t),{},{color:P.a.toUnitRGBA(e.undefinedOuterColor),innerColor:P.a.toUnitRGBA(e.undefinedInnerColor)}))}}},{key:"destroyLineOfSightVisualization",value:function(e){e.visibleLineVisualElement=Object(c.e)(e.visibleLineVisualElement),e.occludedLineVisualElement=Object(c.e)(e.occludedLineVisualElement),e.undefinedLineVisualElement=Object(c.e)(e.undefinedLineVisualElement)}},{key:"updateLineOfSightVisualization",value:function(e,t){var n=this._configuration,i=e.computationResult,r=e.inputPoints,s=i.start,a=i.end,o=i.intersection,c=i.isValid,l=i.isTargetVisible,u=r.observer,b=B;b[12]=u[0],b[13]=u[1],b[14]=u[2];var h=Object(_.l)(z,s,u),d=Object(_.l)(x,a,u),O=Object(_.l)(W,o,u),y=t.visibleLineVisualElement,f=t.occludedLineVisualElement,p=t.undefinedLineVisualElement;y.geometry=null,f.geometry=null,p.geometry=null,c?l?(y.geometry=[[Object(g.f)(h),Object(g.f)(d)]],y.transform=b,y.color=P.a.toUnitRGBA(n.visibleOuterColor)):(y.geometry=[[Object(g.f)(h),Object(g.f)(O)]],y.transform=b,y.color=P.a.toUnitRGBA(n.occludedOuterColor),f.geometry=[[Object(g.f)(O),Object(g.f)(d)]],f.transform=b):(p.geometry=[[Object(g.f)(h),Object(g.f)(d)]],p.transform=b)}},{key:"getLineOfSightVisualizationDependencies",value:function(e){var t=e.computationResult,n=this._configuration;return{computationResult:t,occludedOuterColor:n.occludedOuterColor,visibleOuterColor:n.visibleOuterColor}}},{key:"_connectAnalysis",value:function(e){var t=this,n=this._analysisHandles;if(!n.has(e)){var i=this.createLineOfSightVisualization();n.add([Object(v.d)((function(){return t.getLineOfSightVisualizationDependencies(e)}),(function(){return t.updateLineOfSightVisualization(e,i)})),Object(p.b)((function(){return t.destroyLineOfSightVisualization(i)}))])}}},{key:"_disconnectAnalysis",value:function(e){this._analysisHandles.remove(e)}},{key:"_connectAnalyses",value:function(){var e=this,t=null;return Object(p.a)([Object(v.d)((function(){return e._analyses}),(function(n){t=Object(c.r)(t),t=n.on("change",(function(t){return e._onAnalysesCollectionChange(t)})),e._onAnalysesCollectionChange({target:n,added:n.items,removed:[],moved:[]})})),Object(p.b)((function(){return t=Object(c.r)(t)}))])}},{key:"_onAnalysesCollectionChange",value:function(e){var t=this;e.added.forEach((function(e){return t._connectAnalysis(e)})),e.removed.forEach((function(e){return t._disconnectAnalysis(e)}))}}]),n}(y.a);Object(o.a)([Object(l.b)({constructOnly:!0})],F.prototype,"layer",void 0),Object(o.a)([Object(l.b)({constructOnly:!0})],F.prototype,"view",void 0),Object(o.a)([Object(l.b)({constructOnly:!0})],F.prototype,"layerViewData",void 0),Object(o.a)([Object(l.b)()],F.prototype,"_analyses",null),Object(o.a)([Object(l.b)()],F.prototype,"_configuration",null),F=Object(o.a)([Object(u.a)("esri.views.3d.layers.analysis.LineOfSight.LineOfSightView")],F);var z=Object(g.e)(),x=Object(g.e)(),W=Object(g.e)(),B=Object(H.d)(),N=n(571),U=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.apply(this,arguments)).type="line-of-sight-3d",e._layerViewData=new D,e}return Object(r.a)(n,[{key:"initialize",value:function(){var e=this.view,t=this.layer,n=this._layerViewData;this._analysisController=new R({layer:t,layerViewData:n,view:e}),this._analysisView=new F({layer:t,layerViewData:n,view:e})}},{key:"destroy",value:function(){this._analysisController=Object(c.e)(this._analysisController),this._analysisView=Object(c.e)(this._analysisView)}},{key:"results",get:function(){return this._layerViewData.analyses.map((function(e){return e.result}))}},{key:"priority",get:function(){return this._analysisController.priority},set:function(e){this._analysisController.priority=e}},{key:"getResultForTarget",value:function(e){var t=this._layerViewData.analyses.find((function(t){return t.target===e})),n=Object(c.c)(t,(function(e){return e.result}));return Object(c.t)(n,null)}},{key:"isUpdating",value:function(){return Object(c.m)(this._analysisController,!1,(function(e){return e.updating}))}}]),n}(Object(b.a)(N.a));Object(o.a)([Object(l.b)({readOnly:!0})],U.prototype,"type",void 0),Object(o.a)([Object(l.b)()],U.prototype,"layer",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],U.prototype,"results",null),Object(o.a)([Object(l.b)()],U.prototype,"priority",null),Object(o.a)([Object(l.b)()],U.prototype,"_layerViewData",void 0),Object(o.a)([Object(l.b)()],U.prototype,"_analysisController",void 0),Object(o.a)([Object(l.b)()],U.prototype,"_analysisView",void 0);var J=U=Object(o.a)([Object(u.a)("esri.views.3d.layers.LineOfSightLayerView3D")],U);t.default=J},752:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(2),r=n(5),s=n(6),a=n(7),o=n(3),c=n(26),l=n(31),u=n(786),b=n(163),h=n(279),d=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e.view))._resources=null,r._transform=Object(l.d)(),r}return Object(r.a)(n,[{key:"object",get:function(){return Object(o.j)(this._resources)?this._resources.object:null}},{key:"transform",get:function(){return this._transform},set:function(e){Object(c.d)(this._transform,e),Object(o.j)(this._resources)&&(this._resources.object.transformation=this._transform)}},{key:"recreate",value:function(){this.attached&&this.createResources()}},{key:"recreateGeometry",value:function(){if(!Object(o.i)(this._resources)){var e=this._resources.object,t=this.view._stage;t.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),t.addMany(e.geometries)}}},{key:"createResources",value:function(){this.destroyResources();var e=this.view._stage;if(e){var t=new h.a({isPickable:!1,updatePolicy:1});e.add(t);var n=new b.a({castShadow:!1});n.transformation=this._transform,this.createExternalResources(),this.createGeometries(n),e.addMany(n.geometries),this.forEachExternalMaterial((function(t){return e.add(t)})),e.add(n),t.add(n),this.visible||n.setVisible(!1),this._resources={layer:t,object:n}}}},{key:"destroyResources",value:function(){var e=this.view._stage;!Object(o.i)(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((function(t){e.remove(t),t.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}},{key:"updateVisibility",value:function(e){Object(o.i)(this._resources)||this._resources.object.setVisible(e)}}]),n}(u.a)},786:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(2),r=n(5),s=function(){function e(t){var n=this;Object(i.a)(this,e),this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t,this.view.watch("ready",(function(e){n._resourcesCreated&&(e?n._createResources():n._destroyResources())}))}return Object(r.a)(e,[{key:"applyProps",value:function(e){var t=!1;for(var n in e)n in this?"attached"===n?t=e[n]:this[n]=e[n]:console.error("Cannot set unknown property",n);this.attached=t}},{key:"destroy",value:function(){this.attached=!1}},{key:"attached",get:function(){return this._attached},set:function(e){e!==this._attached&&this.view._stage&&(this._attached=e,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}},{key:"visible",get:function(){return this._visible},set:function(e){e!==this._visible&&(this._visible=e,this.attached&&this.updateVisibility(e))}},{key:"_createResources",value:function(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}},{key:"_destroyResources",value:function(){this.destroyResources(),this._resourcesCreated=!1}}]),e}()},787:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(2),r=n(5),s=n(6),a=n(7),o=n(3),c=n(26),l=n(31),u=n(4),b=n(9),h=n(54),d=n(203),O=n(752),y=n(347),f=n(344),p=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e))._renderOccluded=4,r._width=1,r._color=Object(d.c)(1,0,1,1),r._innerWidth=1,r._innerColor=null,r._stipplePattern=null,r._stippleOffColor=null,r._stippleIntegerRepeats=!1,r._writeDepthEnabled=!0,r._falloff=0,r._polygonOffset=!1,r.applyProps(e),r}return Object(r.a)(n,[{key:"setGeometryFromExtent",value:function(e){var t=this.view.spatialReference,n=Object(b.e)(),i=Object(b.e)(),r=100,s=[];Object(u.y)(n,e[0],e[1],r),this.view.renderCoordsHelper.toRenderCoords(n,t,i),s.push([i[0],i[1],i[2]]),Object(u.y)(n,e[2],e[1],r),this.view.renderCoordsHelper.toRenderCoords(n,t,i),s.push([i[0],i[1],i[2]]),Object(u.y)(n,e[2],e[3],r),this.view.renderCoordsHelper.toRenderCoords(n,t,i),s.push([i[0],i[1],i[2]]),Object(u.y)(n,e[0],e[3],r),this.view.renderCoordsHelper.toRenderCoords(n,t,i),s.push([i[0],i[1],i[2]]),Object(u.y)(n,e[0],e[1],r),this.view.renderCoordsHelper.toRenderCoords(n,t,i),s.push([i[0],i[1],i[2]]),Object(u.y)(n,e[0],e[1],r),this.view.renderCoordsHelper.toRenderCoords(n,t,i),s.push([i[0],i[1],i[2]]),this.geometry=[s]}},{key:"setGeometryFromFrustum",value:function(e){var t=[];e.lines.forEach((function(e){t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}},{key:"setGeometryFromBoundedPlane",value:function(e){var t=[],n=e.origin,i=e.basis1,r=e.basis2,s=.5,a=Object(b.e)(),o=Object(b.e)(),c=Object(b.e)(),l=Object(b.e)();a[0]=n[0]-i[0]*s-r[0]*s,a[1]=n[1]-i[1]*s-r[1]*s,a[2]=n[2]-i[2]*s-r[2]*s,o[0]=n[0]-i[0]*s+r[0]*s,o[1]=n[1]-i[1]*s+r[1]*s,o[2]=n[2]-i[2]*s+r[2]*s,c[0]=n[0]+i[0]*s+r[0]*s,c[1]=n[1]+i[1]*s+r[1]*s,c[2]=n[2]+i[2]*s+r[2]*s,l[0]=n[0]+i[0]*s-r[0]*s,l[1]=n[1]+i[1]*s-r[1]*s,l[2]=n[2]+i[2]*s-r[2]*s,t.push([a[0],a[1],a[2]]),t.push([o[0],o[1],o[2]]),t.push([c[0],c[1],c[2]]),t.push([l[0],l[1],l[2]]),t.push([a[0],a[1],a[2]]),this.geometry=[t]}},{key:"setGeometryFromSegment",value:function(e){var t=e.endRenderSpace;Object(c.i)(j),Object(c.t)(j,j,t),this.transform=j;var n=e.createRenderGeometry(t,this.view.renderCoordsHelper).points;this.geometry=[n]}},{key:"setGeometryFromSegments",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.b;Object(c.i)(j),Object(c.t)(j,j,n),this.transform=j,this.geometry=e.map((function(e){return e.createRenderGeometry(n,t.view.renderCoordsHelper).points}))}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.recreateGeometry()}},{key:"width",get:function(){return this._width},set:function(e){e!==this._width&&(this._width=e,this._updateMaterial())}},{key:"color",get:function(){return this._color},set:function(e){Object(h.g)(e,this._color)||(Object(h.c)(this._color,e),this._updateMaterial())}},{key:"innerWidth",get:function(){return this._innerWidth},set:function(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}},{key:"innerColor",get:function(){return this._innerColor},set:function(e){Object(o.j)(e)?!Object(o.i)(this._innerColor)&&Object(h.g)(e,this._innerColor)||(this._innerColor=Object(h.c)(Object(d.b)(),e),this._updateMaterial()):Object(o.j)(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}},{key:"stipplePattern",get:function(){return this._stipplePattern},set:function(e){var t=Object(o.j)(e)!==Object(o.j)(this._stipplePattern);this._stipplePattern=e,t?this.recreate():this._updateMaterial()}},{key:"stippleOffColor",get:function(){return this._stippleOffColor},set:function(e){(Object(o.i)(e)||Object(o.i)(this._stippleOffColor)||!Object(h.g)(e,this._stippleOffColor))&&(this._stippleOffColor=Object(o.j)(e)?Object(d.a)(e):null,this._updateMaterial())}},{key:"stippleIntegerRepeats",get:function(){return this._stippleIntegerRepeats},set:function(e){this._stippleIntegerRepeats!==e&&(this._stippleIntegerRepeats=e,this._updateMaterial())}},{key:"writeDepthEnabled",get:function(){return this._writeDepthEnabled},set:function(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}},{key:"falloff",get:function(){return this._falloff},set:function(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}},{key:"createExternalResources",value:function(){this._material=new f.a(this.materialParameters)}},{key:"destroyExternalResources",value:function(){this._material=null}},{key:"createGeometries",value:function(e){var t=this._createLineGeometries();if(0!==t.length)for(var n=0;n<t.length;++n){var i=Object(y.a)(t[n]);e.addGeometry(i,this._material)}}},{key:"forEachExternalMaterial",value:function(e){e(this._material)}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,stippleIntegerRepeats:this._stippleIntegerRepeats,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}},{key:"_updateMaterial",value:function(){this.attached&&this._material.setParameterValues(this.materialParameters)}},{key:"_createLineGeometries",value:function(){var e=this.geometry;if(Object(o.i)(e)||0===e.length)return[];var t=[];return e.forEach((function(e){var n=e.length,i=new Float64Array(3*n);e.forEach((function(e,t){i[3*t+0]=e[0],i[3*t+1]=e[1],i[3*t+2]=e[2]}));var r={attributeData:{position:i},removeDuplicateStartEnd:0};t.push(r)})),t}}]),n}(O.a),j=Object(l.d)()}}]);
//# sourceMappingURL=76.6bcb8f40.chunk.js.map