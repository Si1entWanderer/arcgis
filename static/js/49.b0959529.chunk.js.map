{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/interactive/Manipulator3D.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ShadedColorMaterial.js","../node_modules/@arcgis/core/views/3d/interactive/manipulatorUtils.js","../node_modules/@arcgis/core/views/3d/interactive/analysisTools/slice/sliceToolConfig.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/SlicePlaneMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/SlicePlaneMaterial.js","../node_modules/@arcgis/core/widgets/Slice/SlicePlane.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/SlicePlaneVisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/analysisTools/slice/sliceToolUtils.js","../node_modules/@arcgis/core/views/3d/interactive/graphics/Slice/SliceController.js","../node_modules/@arcgis/core/views/3d/interactive/graphics/Slice/SliceView.js","../node_modules/@arcgis/core/views/3d/layers/analysis/Slice/SliceLayerViewData.js","../node_modules/@arcgis/core/views/3d/layers/SliceLayerView3D.js","../node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js","../node_modules/@arcgis/core/portal/support/resourceExtension.js","../node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js","../node_modules/@arcgis/core/layers/support/I3SLayerDefinitions.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js","../node_modules/@arcgis/core/layers/buildingSublayers/BuildingComponentSublayer.js","../node_modules/@arcgis/core/layers/buildingSublayers/BuildingSublayer.js","../node_modules/@arcgis/core/layers/support/capabilities.js","../node_modules/@arcgis/core/layers/support/I3SIndexInfo.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElement.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js","../node_modules/@arcgis/core/chunks/ImageMaterial.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js","../node_modules/@arcgis/core/chunks/ShadedColorMaterial.glsl.js","../node_modules/@arcgis/core/chunks/SlicePlaneMaterial.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js"],"names":["a","B","U","_","v","H","E","X","x","y","z","spatialReference","S","e","r","shader","get","i","this","configuration","t","build","output","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","screenSizeEnabled","shadingEnabled","OITEnabled","transparencyPassType","multipassTerrainEnabled","cullAboveGround","b","rctx","P","n","color","l","shadingTint","p","shadingDirection","s","program","camera","projectionMatrix","setUniform4fv","setUniform2fv","nearFar","inverseViewport","o","blendColor","w","setUniform3fv","setUniformMatrix4fv","viewInverseTransposeMatrix","origin","rebindTextures","blending","transparent","h","m","culling","cullFace","depthTest","func","depthWrite","writeDepth","T","u","colorWrite","polygonOffset","g","setPipelineState","f","j","arguments","d","c","count","prototype","Map","updateParameters","_technique","_techniqueRep","releaseAndAcquire","q","_material","getTechniqueConfig","_output","bindPass","getPassParameters","C","screenSize","vec3f","vertexBufferLayout","createBuffer","indices","length","transformation","invTranspTransformation","vertexAttributes","has","Error","size","getField","data","Math","cos","backgroundColor","gridColor","setUniform1f","gridWidth","constructionContext","params","_renderOccluded","_gridWidth","_gridColor","_backgroundColor","applyProps","_updateMaterial","materialParameters","createSquareGeometry","addGeometry","renderOccluded","setParameterValues","type","position","heading","tilt","width","height","equals","readOnly","json","read","write","Number","nonNullable","range","min","max","normalize","Ge","getLogger","xe","worldUpAtPosition","D","basis1","ct","round","ft","tt","Pe","view","attached","se","writeDepthEnabled","geometry","basis2","lt","PI","V","_handles","_internalChange","_currentSlicePlane","state","add","layerView","layerViewData","excludedLayers","on","item","error","title","id","preventDefault","includes","_initialize","set","all","activeController","push","watch","_updateSlicePlaneFromBoundedPlane","_updateLayerViews","_updateActiveController","_updateViewSlicePlane","allLayerViews","analysis","_updateBoundedPlaneFromSlicePlane","_set","active","lastIndexOf","splice","delete","destroy","slicePlane","plane","A","toRenderCoords","worldBasisAtPosition","F","wkid","renderCoordsHelper","console","warn","tiltEnabled","Ee","Fe","fromRenderCoords","k","visible","forEach","layers","indexOf","layer","sublayerViews","sublayer","basemapTerrain","excludeGroundSurface","_gridVisualElement","_outlineVisualElement","_updateMaterials","ve","re","oe","_updatePlane","transform","editable","stipplePattern","showGrid","value","_get","cast","analysisView","analysisController","_initialized","resolve","destroyed","promise","whenReady","controller","aliasOf","Blob","url","png","jpeg","jpg","bmp","gif","txt","xml","svg","zip","pbf","gz","origins","String","writer","resources","verifyItemRelativeUrls","writtenUrls","rootPath","originIdOf","portalItem","resourceFromPath","path","O","toUpdate","toKeep","resource","I","pendingOperations","then","itemRelativeUrl","catch","toAdd","content","finish","R","JSON","stringify","toJSON","default","responseType","nodesPerPage","rootIndex","lodSelectionMetricType","factor","source","baseColorFactor","baseColorTexture","metallicRoughnessTexture","metallicFactor","roughnessFactor","alphaMode","alphaCutoff","doubleSided","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","pbrMetallicRoughness","opaque","mask","blend","Boolean","none","back","front","reader","index","dds","ktx2","basis","atlas","Float32","UInt64","UInt32","UInt16","UInt8","draco","offset","triangle","_resources","_transform","object","createResources","_stage","removeMany","geometries","removeAllGeometries","createGeometries","setVisible","addMany","destroyResources","isPickable","updatePolicy","castShadow","createExternalResources","forEachExternalMaterial","remove","dispose","destroyExternalResources","Q","L","nodePages","materialDefinitions","textureSetDefinitions","geometryDefinitions","serviceUpdateTimeStamp","fields","associatedLayer","outFields","listMode","renderer","definitionExpression","popupEnabled","popupTemplate","layerType","parsedUrl","query","associatedFeatureServiceItem","associatedLayerID","layerId","name","displayField","createPopupTemplate","signal","_fetchService","indexInfo","rootNode","apiKey","addResolvingPromise","Promise","token","fieldsIndex","getFeatureType","feature","domains","domain","types","typeIdField","capabilities","supportsZ","supportsM","isVersioned","geometryType","returnGeometry","returnZ","where","sqlFormat","_getAssociatedLayerForQuery","queryExtent","createQuery","queryFeatureCount","queryFeatures","features","sourceLayer","queryObjectIds","supportsLabelingInfo","supportsRenderer","supportsPopupTemplate","supportsLayerQuery","loaded","_loadAssociatedLayerForQuery","load","LoadableMixin","service","enabled","allowNull","target","Point","modelName","isEmpty","opacity","alias","ignoreOrigin","attachment","supportsContentType","supportsExifInfo","supportsKeywords","supportsName","supportsSize","supportsAttachment","editing","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateByAnonymous","supportsUpdateByOthers","supportsUpdateWithoutM","supportsUploadWithItemId","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryAttachments","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","queryRelated","supportsCount","supportsOrderBy","supportsPagination","maxRecordCount","maxRecordCountFactor","standardMaxRecordCount","supportsCacheHint","supportsCentroid","supportsDisjointSpatialRelationship","supportsDistance","supportsDistinct","supportsExtent","supportsFormatPBF","supportsGeometryProperties","supportsHavingClause","supportsHistoricMoment","supportsMaxRecordCountFactor","supportsPercentileStatistics","supportsQuantization","supportsQuantizationEditMode","supportsQueryByOthers","supportsQueryGeometry","supportsResultType","supportsSqlExpression","supportsStandardizedQueriesOnly","supportsTopFeaturesQuery","supportsStatistics","tileMaxRecordCount","floor","rootPage","pageSize","lodMetric","urlPrefix","split","pop","pageError","nodeError","_attached","_resourcesCreated","_visible","_createResources","_destroyResources","updateVisibility","_width","_color","_innerWidth","_innerColor","_stipplePattern","_stippleOffColor","_stippleIntegerRepeats","_writeDepthEnabled","_falloff","_polygonOffset","lines","endpoint","endRenderSpace","createRenderGeometry","points","map","_geometry","recreateGeometry","recreate","_createLineGeometries","stippleOffColor","isClosed","falloff","innerColor","innerWidth","stippleIntegerRepeats","Float64Array","attributeData","removeDuplicateStartEnd","include","linearDepth","vertex","uniforms","attributes","varyings","code","fragment","float","Object","freeze","__proto__","perScreenPixelRatio","extensions","stencilWrite","sceneHasOcludees","stencilTest","enableOffset","_occludeePipelineState","pipeline","supportsEdges","techniqueConfig","relativeElevation","material","updateTexture","textureId","hasOccludees","_updateOccludeeState","bindTextures","bindTextureScale","getPipelineState","initTextureTransparent"],"mappings":"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","file":"static/js/49.b0959529.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import{neverReached as e}from\"../../../core/compilerUtils.js\";import t from\"../../../core/Evented.js\";import{deg2rad as i}from\"../../../core/mathUtils.js\";import{isSome as s,isNone as o,unwrapOr as r,unwrap as n}from\"../../../core/maybe.js\";import{createScreenPointArray as a,createRenderScreenPointArray3 as c,screenPointObjectToArray as l,castRenderScreenPointArray as h}from\"../../../core/screenUtils.js\";import{once as d}from\"../../../core/accessorSupport/utils.js\";import{f as u}from\"../../../chunks/mat3.js\";import{c as _}from\"../../../chunks/mat3f64.js\";import{d as g,h as m,m as f,i as p}from\"../../../chunks/mat4.js\";import{c as v}from\"../../../chunks/mat4f64.js\";import{j as b}from\"../../../chunks/vec2.js\";import{b as y,t as j,m as L,a as S,g as R,h as w,s as O,f as T}from\"../../../chunks/vec3.js\";import{c as E,Z as A}from\"../../../chunks/vec3f64.js\";import{canProjectWithoutEngine as D,projectPoint as F,sphericalPCPFtoLonLatElevation as z,computeLatLonToENURotation as k}from\"../../../geometry/projection.js\";import{getReferenceEllipsoid as P}from\"../../../geometry/projectionEllipsoid.js\";import{containsPointObject as I}from\"../../../geometry/support/aaBoundingRect.js\";import{distance2 as M,fromPoints as C,closestRayDistance2 as x,create as B}from\"../../../geometry/support/lineSegment.js\";import{fromPositionAndNormal as W,intersectRay as V,create as H}from\"../../../geometry/support/plane.js\";import{create as U}from\"../../../geometry/support/ray.js\";import{sv3d as G}from\"../../../geometry/support/vectorStacks.js\";import{clonePoint as Z}from\"../../../layers/graphics/hydratedFeatures.js\";import{getElevationAtPoint as q}from\"../support/ElevationProvider.js\";import{fromScreen as J}from\"../support/geometryUtils/ray.js\";import K from\"../webgl-engine/lib/Camera.js\";import{Object3D as N}from\"../webgl-engine/lib/Object3D.js\";import{WebGLLayer as Q}from\"../webgl-engine/lib/WebGLLayer.js\";import X from\"../../../geometry/Point.js\";class Y{constructor(e){this.idHint=0,this.camera=new K,this._elevation={offset:0,override:null},this.collisionType={type:\"point\"},this.collisionPriority=0,this._renderObjects=[],this.autoScaleRenderObjects=!0,this._available=!0,this._noDisplayCount=0,this._radius=10,this._worldSized=!1,this.focusMultiplier=2,this.touchMultiplier=2.5,this.worldOriented=!1,this._modelTransform=v(),this._worldFrame=null,this._renderLocation=E(),this._renderLocationDirty=!0,this._location=new X({x:0,y:0,z:0}),this._elevationAlignedLocation=new X,this._elevationAlignedLocationDirty=!0,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.cursor=null,this._grabbing=!1,this.dragging=!1,this._hovering=!1,this._selected=!1,this._state=0,this._focused=!1,this.events=new t.EventEmitter,this._screenLocation={screenPointArray:a(),renderScreenPointArray:c(),pixelSize:0},this._screenLocationDirty=!0,this._applyObjectTransform=null,this._engineResourcesAddedToStage=!1,this._engineResources=null,this._attached=!1,this._engineLayer=null,this._materialIdReferences=null,this._location.spatialReference=e.view.spatialReference;for(const t in e)this[t]=e[t];this.view.state&&this.view.state.camera&&this.camera.copyFrom(this.view.state.camera)}destroy(){this._removeResourcesFromStage(),this._engineResources=null,this.view=null,this.camera=null}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this._elevationAlignedLocationDirty=!0,this._renderLocationDirty=!0,this._updateEngineObject()}get renderObjects(){return this._renderObjects}set renderObjects(e){this._removeResourcesFromStage(),this._engineResources=null,this._renderObjects=e.slice(),this._updateEngineObject()}set available(e){e!==this._available&&(this._available=e,this._updateEngineObject())}get available(){return this._available}disableDisplay(){return this._noDisplayCount++,1===this._noDisplayCount&&this._updateEngineObject(),{remove:d((()=>{this._noDisplayCount--,0===this._noDisplayCount&&this._updateEngineObject()}))}}set radius(e){e!==this._radius&&(this._radius=e,this._updateEngineObject())}get radius(){return this._radius}set worldSized(e){e!==this._worldSized&&(this._worldSized=e,this._updateEngineObject())}get worldSized(){return this._worldSized}get modelTransform(){return this._modelTransform}set modelTransform(e){$(e)&&(this._screenLocationDirty=!0),g(this._modelTransform,e),this._updateEngineObject()}get renderLocation(){return this._renderLocationDirty&&(this._renderLocationDirty=!1,this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation,this._renderLocation),this.worldOriented?(this._worldFrame||(this._worldFrame=v()),ee(this.view,this._renderLocation,this._worldFrame)):this._worldFrame&&(this._worldFrame=null)),this._renderLocation}set renderLocation(e){this.view.renderCoordsHelper.fromRenderCoords(e,this._location),this.elevationAlignedLocation=this._location}get location(){return this._location}set location(e){Z(e,this._location),this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!0,this._updateEngineObject(),this.events.emit(\"location-update\",{location:this._location})}get elevationAlignedLocation(){return this._elevationAlignedLocationDirty?(this._evaluateElevationAlignment(),this._updateElevationAlignedLocation(),this._elevationAlignedLocation):this._elevationAlignedLocation}set elevationAlignedLocation(e){Z(e,this._location),this._evaluateElevationAlignment(),this._location.z-=this._elevation.offset,this._updateElevationAlignedLocation(),this._updateEngineObject(),this.events.emit(\"location-update\",{location:this._location})}_updateElevationAlignedLocation(){this._elevationAlignedLocation.x=this.location.x,this._elevationAlignedLocation.y=this.location.y;const e=s(this._elevation.override)?this._elevation.override:this.location.z||0;this._elevationAlignedLocation.z=e+this._elevation.offset,this._elevationAlignedLocation.spatialReference=this.location.spatialReference,this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!1}grabbableForEvent(){return!0}get grabbing(){return this._grabbing}set grabbing(e){e!==this._grabbing&&(this._grabbing=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get hovering(){return this._hovering}set hovering(e){e!==this._hovering&&(this._hovering=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get selected(){return this._selected}set selected(e){e!==this._selected&&(this._selected=e,this._updateEngineObject(),this.events.emit(\"select-changed\",{action:e?\"select\":\"deselect\"}))}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,this._updateEngineObject())}updateStateEnabled(e,t){t?this.state|=e:this.state&=~e}_setFocused(e){e!==this._focused&&(this._focused=e,this.events.emit(\"focus-changed\",{action:!0===e?\"focus\":\"unfocus\"}))}get focused(){return this._focused}get screenLocation(){return this.ensureScreenLocation(),this._screenLocation}ensureScreenLocation(){if(!this._screenLocationDirty)return;this._screenLocation.pixelSize=this.camera.computeScreenPixelSizeAt(this.renderLocation),this._screenLocationDirty=!1;let e;if($(this._modelTransform)){const t=this._calculateModelTransformOffset(_e);e=y(t,t,this.renderLocation)}else e=this.renderLocation;this.camera.projectToRenderScreen(e,this._screenLocation.renderScreenPointArray),this.camera.renderToScreen(this._screenLocation.renderScreenPointArray,this._screenLocation.screenPointArray)}get applyObjectTransform(){return this._applyObjectTransform}set applyObjectTransform(e){this._applyObjectTransform=e,this._screenLocationDirty=!0,this._updateEngineObject()}intersectionDistance(t,i){if(!this.available)return null;const s=l(t,te),r=this._getCollisionRadius(i),n=-1*this.collisionPriority;switch(this.collisionType.type){case\"point\":if(b(this.screenLocation.screenPointArray,s)<r*r)return this.screenLocation.renderScreenPointArray[2]+n;break;case\"line\":{const e=this.collisionType.paths,t=this._getWorldToScreenObjectScale(),i=this._calculateObjectTransform(t,ne),a=r*this.screenLocation.pixelSize,c=J(this.camera,s,se);if(o(c))return null;for(const s of e){if(0===s.length)continue;const e=L(ce,s[0],i);for(let t=1;t<s.length;t++){const o=L(le,s[t],i),r=x(C(e,o,ie),c);if(null!=r&&r<a*a){const t=y(G.get(),e,o);S(t,t,.5);const i=h(G.get());return this.camera.projectToRenderScreen(t,i),i[2]+n}R(e,o)}}break}case\"disc\":{var a;const e=this.collisionType.direction,t=null!=(a=this.collisionType.offset)?a:A,i=this._getWorldToScreenObjectScale(),c=this._calculateObjectTransform(i,ne),l=r*this.screenLocation.pixelSize,h=J(this.camera,s,se);if(o(h))return null;const d=u(oe,c),_=j(de,e,d),g=L(ue,t,c);W(g,_,ae);const m=he;if(V(ae,h,m)&&w(m,g)<l*l)return this.screenLocation.renderScreenPointArray[2]+n;break}case\"ribbon\":{const{paths:e,direction:t}=this.collisionType,i=this._getWorldToScreenObjectScale(),a=this._calculateObjectTransform(i,ne),c=r*this.camera.computeScreenPixelSizeAt(this.renderLocation),l=J(this.camera,s,se);if(o(l))return null;const d=u(oe,a),_=j(de,t,d),g=this._calculateModelTransformPosition(ue);W(g,_,ae);const m=he;if(!V(ae,l,m))break;for(const s of e){if(0===s.length)continue;const e=L(ce,s[0],a);for(let t=1;t<s.length;t++){const i=L(le,s[t],a),o=M(C(e,i,ie),m);if(null!=o&&o<c*c){const t=y(G.get(),e,i);S(t,t,.5);const s=h(G.get());return this.camera.projectToRenderScreen(t,s),s[2]+n}R(e,i)}}break}default:e(this.collisionType)}return null}attach(e={manipulator3D:{}}){var t;if(!this.view._stage)return;const i=e.manipulator3D;if(o(i.engineLayerId)){const e=new Q({isPickable:!1,updatePolicy:1});this.view._stage.add(e),i.engineLayerId=e.id,this._engineLayer=e}else null!=(t=this.view._stage)&&t.getObject&&(this._engineLayer=this.view._stage.getObject(i.engineLayerId));i.engineLayerReferences=(i.engineLayerReferences||0)+1,this._materialIdReferences=i.materialIdReferences,o(this._materialIdReferences)&&(this._materialIdReferences=new Map,i.materialIdReferences=this._materialIdReferences),this.camera.copyFrom(this.view.state.camera),this._attached=!0,this._updateEngineObject(),D(this._location.spatialReference,this.view.spatialReference)||(this.location=new X({x:0,y:0,z:0,spatialReference:this.view.spatialReference}))}detach(e={manipulator3D:{}}){const t=e.manipulator3D;t.engineLayerReferences--;const i=0===t.engineLayerReferences;i&&(t.engineLayerId=null),this._removeResourcesFromStage(i),this._engineResources=null,this._engineLayer=null,this._materialIdReferences=null,this._attached=!1}onViewChange(){this.camera.copyFrom(this.view.state.camera),this._screenLocationDirty=!0,this._updateEngineObject()}onElevationChange(e){F(this.location,ge,e.spatialReference),I(e.extent,ge)&&(this.location=this._location)}_evaluateElevationAlignment(e=this.location){if(o(this.elevationInfo))return!1;let t=null,i=0;const s=r(this.elevationInfo.offset,0);switch(this.elevationInfo.mode){case\"on-the-ground\":t=r(q(this.view.elevationProvider,e,\"ground\"),0);break;case\"relative-to-ground\":i=r(q(this.view.elevationProvider,e,\"ground\"),0)+s;break;case\"relative-to-scene\":i=r(q(this.view.elevationProvider,e,\"scene\"),0)+s;break;case\"absolute-height\":i=s}return(i!==this._elevation.offset||t!==this._elevation.override)&&(this._elevation.offset=i,this._elevation.override=t,!0)}_updateEngineObject(){if(!this._attached)return;if(!this.available)return void this._removeResourcesFromStage();const e=this._getWorldToScreenObjectScale(),t=ne;if(!0===this.autoScaleRenderObjects){const i=this._getFocusedSize(this._radius,this.focused)*e;this._calculateObjectTransform(i,t)}else this._calculateObjectTransform(e,t);const{objectsByState:i}=this._ensureEngineResources(),s=(this.focused?2:1)|(this.selected?8:4),o=this._noDisplayCount>0;for(const{stateMask:r,objects:n}of i){if(o){for(const e of n)e.setVisible(!1);continue}const e=!(0!=(15&r))||(s&r)==(15&r),i=!(0!=(65520&r))||(this.state&r)==(65520&r);if(e&&i)for(const s of n)s.setVisible(!0),s.transformation=t;else for(const t of n)t.setVisible(!1)}}_ensureEngineResources(){if(o(this._engineResources)){const e=n(this._engineLayer),t=[],i=new Set;this.renderObjects.forEach((({material:e})=>{i.has(e)||(t.push(e),i.add(e))}));const s=(e,t)=>{const{geometry:i,material:s,transform:o}=t;Array.isArray(i)?i.forEach((t=>e.addGeometry(t,s,o))):e.addGeometry(i,s,o)},o=new Map;this._renderObjects.forEach((e=>{const t=new N({castShadow:!1});s(t,e);const i=e.stateMask||0,r=o.get(i)||[];r.push(t),o.set(i,r)}));const r=[];o.forEach(((e,t)=>r.push({stateMask:t,objects:e}))),this._engineResources={objectsByState:r,layer:e,materials:t}}return this._addResourcesToStage(),this._engineResources}_addResourcesToStage(){if(this._engineResourcesAddedToStage||o(this._engineResources))return;const{objectsByState:e,layer:t,materials:i}=this._engineResources;i.forEach((e=>{const t=n(this._materialIdReferences),i=t.get(e.id)||0;0===i&&this.view._stage.add(e),t.set(e.id,i+1)})),e.forEach((({objects:e})=>{t.addMany(e),this.view._stage.addMany(e)})),this._engineResourcesAddedToStage=!0}_removeResourcesFromStage(e=!1){if(!this._engineResourcesAddedToStage||o(this._engineResources))return;const{objectsByState:t,layer:i,materials:s}=this._engineResources;t.forEach((({objects:e})=>{i.removeMany(e),this.view._stage.removeMany(e)})),s.forEach((e=>{const t=n(this._materialIdReferences),i=t.get(e.id);1===i?(this.view._stage.remove(e),t.delete(e.id)):t.set(e.id,i-1)})),e&&this.view._stage.remove(i),this._engineResourcesAddedToStage=!1}_getCollisionRadius(e){return this._getFocusedSize(this.radius,!0)*(\"touch\"===e?this.touchMultiplier:1)}_getFocusedSize(e,t){return e*(t?this.focusMultiplier:1)}_getWorldToScreenObjectScale(){return this._worldSized?1:this.screenLocation.pixelSize}_calculateModelTransformPosition(e){const t=this._getWorldToScreenObjectScale(),i=this._calculateObjectTransform(t,re);return O(e,i[12],i[13],i[14])}_calculateModelTransformOffset(e){const t=this._calculateModelTransformPosition(e);return T(e,t,this.renderLocation)}_calculateObjectTransform(e,t){return m(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1),this._worldFrame&&f(t,t,this._worldFrame),f(t,t,this._modelTransform),t[12]+=this.renderLocation[0],t[13]+=this.renderLocation[1],t[14]+=this.renderLocation[2],t[15]=1,s(this._applyObjectTransform)&&this._applyObjectTransform(t),t}get test(){let e=!1;if(s(this._engineResources))for(const t in this._engineResources.objectsByState){const i=this._engineResources.objectsByState[t];for(const t of i.objects)if(t.isVisible){e=!0;break}if(e)break}return{areAnyResourcesVisible:e}}}function $(e){return 0!==e[12]||0!==e[13]||0!==e[14]}function ee(e,t,s){switch(e.viewingMode){case\"local\":return p(s),!0;case\"global\":{const o=P(e.renderCoordsHelper.spatialReference);return z(t,0,ce,0,o.radius),k(i(ce[1]),i(ce[0]),s),!0}}}const te=a(),ie=B(),se=U(),oe=_(),re=v(),ne=v(),ae=H(),ce=E(),le=E(),he=E(),de=E(),ue=E(),_e=E(),ge=new X({x:0,y:0,z:0,spatialReference:null});export{Y as Manipulator3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{c as r}from\"../../../../chunks/vec4f64.js\";import{bindScreenSizeScalingUniforms as i}from\"../core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{bindSliceUniformsWithOrigin as t}from\"../core/shaderLibrary/Slice.glsl.js\";import{bindMultipassTerrainTexture as o}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as s,bindView as a,bindCameraPosition as n}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as l}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as p}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as d,parameter as c}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{blendingDefault as h,OITBlending as m,OITDepthWrite as u,OITPolygonOffset as g}from\"../lib/OrderIndependentTransparency.js\";import{Program as b}from\"../lib/Program.js\";import{S as f}from\"../../../../chunks/ShadedColorMaterial.glsl.js\";import{makePipelineState as v,cullingParams as y,defaultDepthWriteParams as T,defaultColorWriteParams as E}from\"../../../webgl/renderState.js\";class S extends p{initializeProgram(e){const r=S.shader.get(),i=this.configuration,t=r.build({output:i.output,slicePlaneEnabled:i.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,screenSizeEnabled:i.screenSizeEnabled,shadingEnabled:i.shadingEnabled,OITEnabled:0===i.transparencyPassType,multipassTerrainEnabled:i.multipassTerrainEnabled,cullAboveGround:i.cullAboveGround});return new b(e.rctx,t,P)}bindPass(e,r){const{screenSizeEnabled:t,shadingEnabled:a}=this.configuration,{color:n,shadingTint:l,shadingDirection:p}=e;s(this.program,r.camera.projectionMatrix),this.program.setUniform4fv(\"color\",n),r.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",r.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",r.inverseViewport),o(this.program,r)),a&&(this.program.setUniform4fv(\"shadedColor\",this.blendColor(w,l,n)),this.program.setUniform3fv(\"shadingDirection\",p),this.program.setUniformMatrix4fv(\"viewNormal\",r.camera.viewInverseTransposeMatrix)),t&&i(this.program,e,r)}bindDraw(e){a(this.program,e),n(this.program,e.origin,e.camera.viewInverseTransposeMatrix),t(this.program,this.configuration,e),this.program.rebindTextures()}blendColor(e,r,i){const t=1-r[3],o=r[3]+i[3]*t;return 0===o?(e[3]=o,e):(e[0]=(r[0]*r[3]+i[0]*i[3]*t)/o,e[1]=(r[1]*r[3]+i[1]*i[3]*t)/o,e[2]=(r[2]*r[3]+i[2]*i[3]*t)/o,e[3]=i[3],e)}setPipelineState(e){const r=this.configuration,i=3===e,t=2===e;return v({blending:0!==r.output&&7!==r.output||!r.transparent?null:i?h:m(e),culling:y(r.cullFace),depthTest:{func:t?513:r.shadingEnabled?515:513},depthWrite:i?r.writeDepth&&T:u(e),colorWrite:E,polygonOffset:i||t?null:g})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}}S.shader=new l(f,(()=>import(\"./ShadedColorMaterial.glsl.js\")));class j extends d{constructor(){super(...arguments),this.output=0,this.cullFace=0,this.slicePlaneEnabled=!1,this.transparent=!1,this.writeDepth=!0,this.screenSizeEnabled=!0,this.shadingEnabled=!0,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([c({count:8})],j.prototype,\"output\",void 0),e([c({count:3})],j.prototype,\"cullFace\",void 0),e([c()],j.prototype,\"slicePlaneEnabled\",void 0),e([c()],j.prototype,\"transparent\",void 0),e([c()],j.prototype,\"writeDepth\",void 0),e([c()],j.prototype,\"screenSizeEnabled\",void 0),e([c()],j.prototype,\"shadingEnabled\",void 0),e([c({count:4})],j.prototype,\"transparencyPassType\",void 0),e([c()],j.prototype,\"multipassTerrainEnabled\",void 0),e([c()],j.prototype,\"cullAboveGround\",void 0);const P=new Map([[\"position\",0],[\"normal\",1],[\"offset\",2]]),w=r();export{S as ShadedColorMaterialTechnique,j as ShadedColorMaterialTechniqueConfiguration,P as ShadedColorMaterialVertexAttrLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{n as e,s as t,a as r,b as i}from\"../../../../chunks/vec3.js\";import{c as s}from\"../../../../chunks/vec3f64.js\";import{center as a,scale as n}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as o}from\"../../../../geometry/support/buffer/BufferView.js\";import{newLayout as u}from\"../../support/buffer/InterleavedLayout.js\";import c from\"../lib/GLMaterial.js\";import{Material as h,materialParametersDefaults as f}from\"../lib/Material.js\";import{assert as l}from\"../lib/Util.js\";import{writeDefaultAttributes as p,writePosition as m}from\"./internal/bufferWriterUtils.js\";import{intersectTriangleGeometry as d}from\"./internal/MaterialUtil.js\";import{ShadedColorMaterialTechniqueConfiguration as b,ShadedColorMaterialVertexAttrLocations as g,ShadedColorMaterialTechnique as q}from\"../shaders/ShadedColorMaterialTechnique.js\";class v extends h{constructor(e){super(e,C),this.supportsEdges=!0,this.techniqueConfig=new b,this._vertexAttributeLocations=g}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.screenSizeEnabled=this.params.screenSizeEnabled,this.techniqueConfig.shadingEnabled=this.params.shadingEnabled,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,this.techniqueConfig}getPassParameters(){return this.params}intersect(e,s,o,u,c,h,f){if(this.params.screenSizeEnabled){const o=e.vertexAttributes.get(\"offset\"),l={applyToVertex:(e,s,a,n)=>{const c=t(P,o.data[3*n+0],o.data[3*n+1],o.data[3*n+2]),h=t(x,e,s,a);return r(c,c,this.params.screenSize*u.camera.computeRenderPixelSizeAt(c)),i(h,h,c),[h[0],h[1],h[2]]},applyToAabb:e=>{const t=a(e,P);return n(e,this.params.screenSize*u.camera.computeRenderPixelSizeAt(t))}};d(e,s,u,c,h,l,f)}else d(e,s,u,c,h,void 0,f)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output?new E(e):void 0}createBufferWriter(){return new S(this.params.screenSizeEnabled)}}class E extends c{constructor(e){super(e),this.updateParameters()}updateParameters(e){this._technique=this._techniqueRep.releaseAndAcquire(q,this._material.getTechniqueConfig(this._output,e),this._technique)}beginSlot(e){if(4===this._output)return 3===e;let t=3;return this._technique.configuration.transparent&&(t=this._technique.configuration.writeDepth?5:8),e===t}ensureParameters(e){this.updateParameters(e)}bind(e){this._technique.bindPass(this._material.getPassParameters(),e)}}const C={color:[1,1,1,1],shadingTint:[0,0,0,.25],shadingDirection:e(s(),[.5,-.5,-.5]),transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:0,screenSizeEnabled:!1,screenSize:14,shadingEnabled:!0,...f};class S{constructor(e){this.screenSizeEnabled=e;const t=u().vec3f(\"position\").vec3f(\"normal\");this.screenSizeEnabled&&t.vec3f(\"offset\"),this.vertexBufferLayout=t}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices.get(\"position\").length}write(e,t,r,i){if(p(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,r,i),this.screenSizeEnabled){if(!t.vertexAttributes.has(\"offset\"))throw new Error(\"offset vertex attribute required for screenSizeEnabled ShadedColorMaterial\");{const s=t.vertexAttributes.get(\"offset\"),a=t.indices.get(\"offset\");l(3===s.size);const n=r.getField(\"offset\",o);if(!n)throw new Error(\"unable to acquire view for offset\");m(a,s.data,e.invTranspTransformation,n,i)}}}}const P=s(),x=s();export{v as ShadedColorMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";import{a as r}from\"../../../chunks/mat4.js\";import{f as n,c as o,m as c,n as a}from\"../../../chunks/vec3.js\";import{f as i}from\"../../../chunks/vec4f64.js\";import{sv3d as s,sm4d as l}from\"../../../geometry/support/vectorStacks.js\";import{hydrateGeometry as m}from\"../../../layers/graphics/hydratedFeatures.js\";import{Manipulator3D as u}from\"./Manipulator3D.js\";import{computeCentroid as p}from\"../layers/graphics/graphicUtils.js\";import g from\"../webgl-engine/lib/GeometryUtil.js\";import{ColorMaterial as f}from\"../webgl-engine/materials/ColorMaterial.js\";import{ShadedColorMaterial as h}from\"../webgl-engine/materials/ShadedColorMaterial.js\";function d(e,t=4,r=!0){const n=i(e[0],e[1],e[2],e.length>3?e[3]:1),o=e[3]<1;return r?new h({color:n,transparent:o,writeDepth:!0,cullFace:2,renderOccluded:t}):new f({color:n,transparent:o,writeDepth:!0,cullFace:2,renderOccluded:t})}function j(e,t=4){const r=i(e[0],e[1],e[2],4===e.length?e[3]:1);return new f({color:r,transparent:!0,writeDepth:!0,cullFace:1,renderOccluded:t})}function w(e,t,r){return new u({view:e,renderObjects:[{geometry:g.createSphereGeometry(1,32,32),material:d(i(t[0],t[1],t[2],null!=r?r:1))}]})}function y(e,t,a,i){const m=n(s.get(),e,a),u=b(m,o(s.get(),i,m),a,l.get());r(u,u);const p=c(s.get(),t,u);return Math.atan2(p[1],p[0])}function b(e,t,r,n){const c=a(s.get(),e),i=a(s.get(),t),l=o(s.get(),c,i);return n[0]=c[0],n[1]=c[1],n[2]=c[2],n[3]=0,n[4]=i[0],n[5]=i[1],n[6]=i[2],n[7]=0,n[8]=l[0],n[9]=l[1],n[10]=l[2],n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function O(t,r){const n=t.getViewForGraphic(r);return e(n)&&\"computeAttachmentOrigin\"in n?n.computeAttachmentOrigin(r,t.spatialReference):null}function v(t,r,n){const o=O(t,n);e(o)?r.elevationAlignedLocation=o:F(r,n.geometry)}function F(e,r){if(t(r))return;const n=\"mesh\"===r.type?r.anchor:p(r);t(n)||(e.location=m(n))}export{y as calculateInputRotationTransform,b as calculateTranslateRotateFromBases,d as createManipulatorMaterial,j as createManipulatorOutlineMaterial,w as createSphereManipulator,O as getGraphicAttachmentOrigin,v as placeAtGraphic};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport o from\"../../../../../core/has.js\";import{deg2rad as t}from\"../../../../../core/mathUtils.js\";const r=o(\"mac\")?\"Meta\":\"Control\",s=\"Shift\",a=2,c=1.15,m=1.15,h=1.1,e=2500,i=.02,f=Math.cos(t(45)),p=Math.cos(t(5)),M=.95,j=.3,l=.7,n=[1,.5,0],x=2,C=1,S=[...n,l],U=[0,0,0,.04],b=[...n,.5],d=[...n,1],g=[1,1,1,1],k=[1,.8,.6,1],q=[1,.93,.86,1],u=[...n,1],v=[...n,1],w=3,y=11,z=22.5,A=40,B=48,D=2.25,E=4,F=1,G=.3,H=6,I=4,J=12,K=40,L=27,N=1600,O=.4;export{a as DISPLAY_FOCUS_MULTIPLIER,b as GRID_COLOR,n as HANDLE_COLOR,l as HANDLE_OPACITY,i as INITIAL_DEPTH_OFFSET_FRAC,O as INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION,U as PLANE_BACKGROUND_COLOR,N as PLANE_MIN_BASIS_SCREEN_LEN2,S as PLANE_OUTLINE_COLOR,C as PLANE_OUTLINE_WIDTH,x as PLANE_PREVIEW_OUTLINE_WIDTH,e as POINTER_MOVE_TIMER_MS,M as PREVIEW_FADE_DOT_THRESHOLD,j as PREVIEW_FADE_DURATION_SECONDS,H as RESIZE_HANDLE_CORNER_INPUT_RADIUS,E as RESIZE_HANDLE_CORNER_WIDTH,I as RESIZE_HANDLE_EDGE_INPUT_RADIUS,G as RESIZE_HANDLE_EDGE_PADDING_FRAC,F as RESIZE_HANDLE_EDGE_WIDTH,d as ROTATE_HEADING_CALLOUT_COLOR,L as ROTATE_HEADING_DISC_RADIUS,h as ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER,K as ROTATE_HEADING_OFFSET_DISTANCE,J as ROTATE_HEADING_TIP_LENGTH,k as SHIFT_RESTART_ARROW_CAP_COLOR,B as SHIFT_RESTART_ARROW_LENGTH,D as SHIFT_RESTART_ARROW_OUTLINE_WIDTH,g as SHIFT_RESTART_ARROW_TIP_COLOR,u as SHIFT_RESTART_CALLOUT_COLOR,A as SHIFT_RESTART_OFFSET_DISTANCE,v as SHIFT_RESTART_OUTLINE_COLOR,m as SHIFT_RESTART_TIP_FOCUS_MULTIPLIER,z as SHIFT_RESTART_TIP_LENGTH,y as SHIFT_RESTART_TIP_RADIUS,q as SHIFT_RESTART_TUBE_COLOR,c as SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER,w as SHIFT_RESTART_TUBE_RADIUS,p as SMALL_ANGLE_DOT_THRESHOLD,f as VERTICAL_DOT_THRESHOLD,r as forceHorizontalModifier,s as forceVerticalModifier};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{bindProjectionMatrix as r,bindView as e}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Default3D as t}from\"../lib/DefaultVertexAttributeLocations.js\";import{Program as a}from\"../lib/Program.js\";import{S as s}from\"../../../../chunks/SlicePlaneMaterial.glsl.js\";import{makePipelineState as l,separateBlendingParams as n,defaultColorWriteParams as m}from\"../../../webgl/renderState.js\";class d extends o{initializeProgram(r){const e=d.shader.get().build();return new a(r.rctx,e,t)}bindPass(e,i){r(this.program,i.camera.projectionMatrix),this.program.setUniform4fv(\"backgroundColor\",e.backgroundColor),this.program.setUniform4fv(\"gridColor\",e.gridColor),this.program.setUniform1f(\"gridWidth\",e.gridWidth)}bindDraw(r){e(this.program,r),this.program.rebindTextures()}initializePipeline(){return l({blending:n(1,1,771,771),depthTest:{func:513},colorWrite:m})}}d.shader=new i(s,(()=>import(\"./SlicePlaneMaterial.glsl.js\")));export{d as SlicePlaneMaterialTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{autoDispose as r}from\"../lib/AutoDisposable.js\";import e from\"../lib/GLMaterial.js\";import{Material as i,materialParametersDefaults as s}from\"../lib/Material.js\";import{DefaultBufferWriter as o,PositionUVLayout as a}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as n}from\"./internal/MaterialUtil.js\";import{SlicePlaneMaterialTechnique as u}from\"../shaders/SlicePlaneMaterialTechnique.js\";class l extends i{constructor(t){super(t,m)}intersect(t,r,e,i,s,o,a){return n(t,r,i,s,o,void 0,a)}createBufferWriter(){return new o(a)}getGLMaterial(t){return 0===t.output?new c(t):void 0}}class c extends e{constructor(t){super(t),this._technique=new u(this._techniqueRep.constructionContext,null),this.updateParameters()}updateParameters(){}beginSlot(t){return 8===t}bind(t){this._technique.bindPass(this._material.params,t)}}t([r()],c.prototype,\"_technique\",void 0);const m={backgroundColor:[1,0,0,.5],gridColor:[0,1,0,.5],gridWidth:4,...s};export{l as SlicePlaneMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{clone as e}from\"../../core/lang.js\";import{isSome as i}from\"../../core/maybe.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{cast as s}from\"../../core/accessorSupport/decorators/cast.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{ensureNumber as h}from\"../../core/accessorSupport/ensureType.js\";import{persistable as a}from\"../../core/accessorSupport/decorators/persistable.js\";import{cyclicalDeg as n}from\"../../views/3d/support/mathUtils.js\";import m from\"../../geometry/Point.js\";var l;let c=l=class extends o{constructor(t){super(t),this.type=\"plane\",this.position=null,this.heading=0,this.tilt=0,this.width=10,this.height=10}clone(){return new l({position:e(this.position),heading:this.heading,tilt:this.tilt,width:this.width,height:this.height})}equals(t){return this.heading===t.heading&&this.tilt===t.tilt&&i(this.position)&&i(t.position)&&this.position.equals(t.position)&&this.width===t.width&&this.height===t.height}};t([r({readOnly:!0,json:{read:!1,write:!0}})],c.prototype,\"type\",void 0),t([r({type:m}),a()],c.prototype,\"position\",void 0),t([r({type:Number,nonNullable:!0,range:{min:0,max:360}}),a(),s((t=>n.normalize(h(t),0,!0)))],c.prototype,\"heading\",void 0),t([r({type:Number,nonNullable:!0,range:{min:0,max:360}}),a(),s((t=>n.normalize(h(t),0,!0)))],c.prototype,\"tilt\",void 0),t([r({type:Number,nonNullable:!0}),a()],c.prototype,\"width\",void 0),t([r({type:Number,nonNullable:!0}),a()],c.prototype,\"height\",void 0),c=l=t([p(\"esri.widgets.Slice.SlicePlane\")],c);var d=c;export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../../../../core/maybe.js\";import{c as e}from\"../../../../chunks/vec4.js\";import{f as t}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as i}from\"./Object3DVisualElement.js\";import a from\"../../webgl-engine/lib/GeometryUtil.js\";import{SlicePlaneMaterial as s}from\"../../webgl-engine/materials/SlicePlaneMaterial.js\";class d extends i{constructor(r){super(r),this._material=null,this._renderOccluded=4,this._gridWidth=1,this._gridColor=t(1,0,0,1),this._backgroundColor=t(1,0,0,1),this.applyProps(r)}get renderOccluded(){return this._renderOccluded}set renderOccluded(r){r!==this._renderOccluded&&(this._renderOccluded=r,this._updateMaterial())}get gridWidth(){return this._gridWidth}set gridWidth(r){this._gridWidth!==r&&(this._gridWidth=r,this._updateMaterial())}get gridColor(){return this._gridColor}set gridColor(r){e(this._gridColor,r),this._updateMaterial()}get backgroundColor(){return this._backgroundColor}set backgroundColor(r){e(this._backgroundColor,r),this._updateMaterial()}createExternalResources(){this._material=new s(this.materialParameters)}destroyExternalResources(){this._material=null}forEachExternalMaterial(e){r(this._material)&&e(this._material)}createGeometries(e){if(r(this._material)){const r=a.createSquareGeometry();e.addGeometry(r,this._material)}}get materialParameters(){return{backgroundColor:this._backgroundColor,gridWidth:this._gridWidth,gridColor:this._gridColor,renderOccluded:this._renderOccluded}}_updateMaterial(){r(this._material)&&this._material.setParameterValues(this.materialParameters)}}export{d as SlicePlaneVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport\"../../../../../geometry.js\";import{neverReached as e}from\"../../../../../core/compilerUtils.js\";import t from\"../../../../../core/Logger.js\";import{rad2deg as s,deg2rad as i}from\"../../../../../core/mathUtils.js\";import{isSome as r,isNone as o}from\"../../../../../core/maybe.js\";import{castRenderScreenPointArray3 as n}from\"../../../../../core/screenUtils.js\";import{r as a,i as c,s as l,m,b as g,t as d,w as u}from\"../../../../../chunks/mat4.js\";import{c as p}from\"../../../../../chunks/mat4f64.js\";import{r as f}from\"../../../../../chunks/quat.js\";import{a as b,g as h,d as w,c as y,n as j,b as M,l as k,f as P,p as v,s as O}from\"../../../../../chunks/vec3.js\";import{a as T,c as U,f as R}from\"../../../../../chunks/vec3f64.js\";import{r as S,f as L,a as A,n as E,u as F,i as G}from\"../../../../../chunks/boundedPlane.js\";import{fromVectorsAndPoint as C,fromPositionAndNormal as I}from\"../../../../../geometry/support/plane.js\";import{create as x}from\"../../../../../geometry/support/ray.js\";import{angleAroundAxis as z}from\"../../../../../geometry/support/vector.js\";import{sv3d as D,sm4d as B,sq4d as V}from\"../../../../../geometry/support/vectorStacks.js\";import{Manipulator3D as q}from\"../../Manipulator3D.js\";import{calculateTranslateRotateFromBases as H}from\"../../manipulatorUtils.js\";import{SMALL_ANGLE_DOT_THRESHOLD as N,RESIZE_HANDLE_EDGE_PADDING_FRAC as W,PLANE_MIN_BASIS_SCREEN_LEN2 as $,INITIAL_PLANE_HALF_SIZE_VIEW_PROPORTION as J,SHIFT_RESTART_OFFSET_DISTANCE as K,SHIFT_RESTART_ARROW_TIP_COLOR as Q,SHIFT_RESTART_ARROW_CAP_COLOR as X,SHIFT_RESTART_TUBE_COLOR as Y,SHIFT_RESTART_OUTLINE_COLOR as Z,SHIFT_RESTART_CALLOUT_COLOR as _,SHIFT_RESTART_TIP_RADIUS as ee,ROTATE_HEADING_CALLOUT_COLOR as te,PLANE_OUTLINE_COLOR as se,PLANE_OUTLINE_WIDTH as ie,PLANE_BACKGROUND_COLOR as re,GRID_COLOR as oe,RESIZE_HANDLE_CORNER_INPUT_RADIUS as ne,RESIZE_HANDLE_EDGE_INPUT_RADIUS as ae,ROTATE_HEADING_TIP_LENGTH as ce,VERTICAL_DOT_THRESHOLD as le,SHIFT_RESTART_TUBE_RADIUS as me,SHIFT_RESTART_TIP_LENGTH as ge,SHIFT_RESTART_TUBE_FOCUS_MULTIPLIER as de,SHIFT_RESTART_TIP_FOCUS_MULTIPLIER as ue,SHIFT_RESTART_ARROW_OUTLINE_WIDTH as pe,ROTATE_HEADING_OFFSET_DISTANCE as fe,ROTATE_HEADING_DISC_RADIUS as be,ROTATE_HEADING_DISC_RADIUS_FOCUS_MULTIPLIER as he,HANDLE_COLOR as we,DISPLAY_FOCUS_MULTIPLIER as ye,RESIZE_HANDLE_EDGE_WIDTH as je,SHIFT_RESTART_ARROW_LENGTH as Me,RESIZE_HANDLE_CORNER_WIDTH as ke}from\"./sliceToolConfig.js\";import{LineVisualElement as Pe}from\"../../visualElements/LineVisualElement.js\";import{SlicePlaneVisualElement as ve}from\"../../visualElements/SlicePlaneVisualElement.js\";import{fromRender as Oe}from\"../../../support/geometryUtils/ray.js\";import{Geometry as Te}from\"../../../webgl-engine/lib/Geometry.js\";import Ue from\"../../../webgl-engine/lib/GeometryUtil.js\";import{ColorMaterial as Re}from\"../../../webgl-engine/materials/ColorMaterial.js\";import{ImageMaterial as Se}from\"../../../webgl-engine/materials/ImageMaterial.js\";import{NativeLineMaterial as Le}from\"../../../webgl-engine/materials/NativeLineMaterial.js\";import{RibbonLineMaterial as Ae}from\"../../../webgl-engine/materials/RibbonLineMaterial.js\";import Ee from\"../../../../../widgets/Slice/SlicePlane.js\";import Fe from\"../../../../../geometry/Point.js\";const Ge=t.getLogger(\"esri.views.3d.interactive.analysisTools.slice.sliceToolUtils\");function Ce(e,t,s,i,r,o,n,a){return Ie(t,n.worldUpAtPosition(e,D.get()),r,o,a.basis1,a.basis2),b(a.basis1,a.basis1,s),b(a.basis2,a.basis2,i),h(a.origin,e),C(a.basis2,a.basis1,a.origin,a.plane),a}function Ie(e,t,s,i,r,o){const n=w(e,t),a=D.get(),c=D.get();switch(0===i?Math.abs(n)>le?1:2:i){case 2:{const i=Math.abs(n)<=N?e:s.viewUp;y(a,i,t),h(c,t);break}case 1:y(a,s.viewUp,t),y(c,t,a);break;case 3:{const i=Math.abs(n)<=N?t:s.viewUp;y(a,i,e),y(c,e,a);break}}const l=y(D.get(),a,c);w(l,s.viewForward)>0&&b(c,c,-1),j(r,a),j(o,c)}function xe(e,t,s){const i=t.worldUpAtPosition(e.origin,D.get()),r=e.basis1,o=ct(e,i),n=Math.round(o/ft)*ft;return S(e,n-o,r,s)}function ze(e,t,s,i,r,o){const n=h(D.get(),r.origin);M(n,n,b(D.get(),r.basis1,e.direction[0]<0?1:-1)),M(n,n,b(D.get(),r.basis2,e.direction[1]<0?1:-1));const a=k(r.basis1),c=k(r.basis2),l=P(D.get(),s,n),m=P(D.get(),t,n);let g=0,d=0;if(Ze(e)){const t=Ye(r),s=Ye(o);g=a-.5*e.direction[0]*w(r.basis1,m)/a,d=c-.5*e.direction[1]*w(r.basis2,m)/c;const i=s/t;g*=i,d*=i}const u=g+.5*e.direction[0]*w(r.basis1,l)/a,p=d+.5*e.direction[1]*w(r.basis2,l)/c,f=b(D.get(),r.basis1,u/a),y=b(D.get(),r.basis2,p/c);(u<=0||Qe(o.origin,f,i)<=$)&&h(f,o.basis1),(p<=0||Qe(o.origin,y,i)<=$)&&h(y,o.basis2);const j=h(D.get(),n);return M(j,j,b(D.get(),f,e.direction[0]<0?-1:1)),M(j,j,b(D.get(),y,e.direction[1]<0?-1:1)),L(j,f,y,o)}function De(e,t){return J*Math.min(t.width,t.height)*t.computeRenderPixelSizeAt(e)}function Be(e,t,s,i){const r=y(D.get(),t,s);return y(r,r,t),I(e,r,i)}function Ve(e,t){return H(e.basis1,e.basis2,e.origin,t)}function qe(e,t,s,i){const r=t.worldUpAtPosition(e.origin,D.get()),o=D.get();switch(s){case 1:h(o,r);break;case 2:h(o,e.basis1)}return I(e.origin,o,i)}function He(e,t,s,i){const r=Ke(s,2),o=B.get();a(o,t,r.edge*Math.PI/2);const c=j(D.get(),r.basis);let l=b(D.get(),c,r.direction*i.computeScreenPixelSizeAt(r.position)*K);M(l,l,r.position);const m=i.projectToRenderScreen(l,n(D.get())),g=Ne(i,m);Oe(i,m,pt),j(pt.direction,pt.direction);const d=D.get();!g&&G(s,pt,d)&&(l=d),o[12]=0,o[13]=0,o[14]=0,e.modelTransform=o,e.renderLocation=T(l),g?e.state|=ut:e.state&=~ut}function Ne(e,t){const[s,i,r,o]=e.viewport,n=Math.min(r,o)/16;let a=!0;return t[0]<s+n?(t[0]=s+n,a=!1):t[0]>s+r-n&&(t[0]=s+r-n,a=!1),t[1]<i+n?(t[1]=i+n,a=!1):t[1]>i+o-n&&(t[1]=i+o-n,a=!1),a}function We(e,t,s,i){const r=k(i.basis1),o=k(i.basis2),n=Xe(i),g=Ye(i),d=O(D.get(),0,0,0);M(d,b(D.get(),i.basis1,t.direction[0]),b(D.get(),i.basis2,t.direction[1])),M(d,i.origin,d);let u=0,p=1;if(Ze(t))1===t.direction[0]&&-1===t.direction[1]?u=ft:1===t.direction[0]&&1===t.direction[1]?u=Math.PI:-1===t.direction[0]&&1===t.direction[1]&&(u=3*Math.PI/2),p=g;else{const e=0!==t.direction[0]?1:2;u=1===e?ft:0,p=(1===e?o:r)-n}const f=c(B.get());a(f,f,u),l(f,f,O(D.get(),p,p,p)),m(f,s,f),f[12]=0,f[13]=0,f[14]=0,e.modelTransform=f,e.renderLocation=d}function $e(e,t,s,i){const r=i.worldUpAtPosition(s.origin,D.get()),o=Ke(s,0),n=c(B.get());a(n,n,o.edge*Math.PI/2),g(n,n,-ct(s,r)),m(n,t,n),n[12]=0,n[13]=0,n[14]=0,e.modelTransform=n,e.renderLocation=o.position}function Je(e,t,s){const i=Ke(s,1),r=c(B.get());a(r,r,i.edge*Math.PI/2),g(r,r,ft),m(r,t,r),r[12]=0,r[13]=0,r[14]=0,e.modelTransform=r,e.renderLocation=i.position}function Ke(e,t){switch(t){case 0:return{basis:e.basis1,direction:1,position:M(D.get(),e.origin,e.basis1),edge:t};case 1:return{basis:e.basis2,direction:1,position:M(D.get(),e.origin,e.basis2),edge:t};case 2:return{basis:e.basis1,direction:-1,position:P(D.get(),e.origin,e.basis1),edge:t};case 3:return{basis:e.basis2,direction:-1,position:P(D.get(),e.origin,e.basis2),edge:t}}}function Qe(e,t,s){const i=s.projectToRenderScreen(M(D.get(),e,t),n(D.get())),r=s.projectToRenderScreen(P(D.get(),e,t),n(D.get()));return v(P(i,i,r))}function Xe(e){const t=k(e.basis1),s=k(e.basis2);return W*Math.min(t,s)}function Ye(e){return Xe(e)}function Ze(e){return 0!==e.direction[0]&&0!==e.direction[1]}function _e(e,t=1){const s=0===t?K:0,i=[R(s,0,-Me/2),R(s,0,Me/2)],r=nt(i,!0),o=(e,t)=>rt(i,i,{tubeRadius:me,tipRadius:ee,tipLength:ge,tubeFocusMultiplier:de,tipFocusMultiplier:ue,padding:e,bothEnds:!0,flat:null,focusTipLength:!0,addCap:t}),n=o(0,!1),a=o(pe,!0),c=new Re({color:Q,cullFace:2,renderOccluded:16}),l=new Re({color:X,cullFace:2,renderOccluded:16}),m=new Re({color:Y,cullFace:2,renderOccluded:16}),g=new Re({color:Z,transparent:!0,writeDepth:!1,cullFace:1,renderOccluded:2}),d=Ue.createPolylineGeometry([[s,0,0],[s-K,0,0]]),u=Ue.createPolylineGeometry([[s,0,0],[s-K,0,0]]),p=new Le({color:_,renderOccluded:4});return new q({view:e,renderObjects:[...n.normal.map((({part:e,geometry:t,transform:s})=>({geometry:t,material:\"tip\"===e?c:\"cap\"===e?l:m,transform:s,stateMask:1|dt}))),...a.normal.map((({geometry:e,transform:t})=>({geometry:e,material:g,transform:t,stateMask:1|dt}))),{geometry:d,material:p,stateMask:1|dt|ut},...n.focused.map((({part:e,geometry:t,transform:s})=>({geometry:t,material:\"tip\"===e?c:\"cap\"===e?l:m,transform:s,stateMask:2|dt}))),...a.focused.map((({geometry:e,transform:t})=>({geometry:e,material:g,transform:t,stateMask:2|dt}))),{geometry:u,material:p,stateMask:2|dt|ut}],autoScaleRenderObjects:!1,collisionType:{type:\"line\",paths:[r]},collisionPriority:1,radius:ee,state:dt})}function et(e,t){const s=new Se({transparent:!0,writeDepth:!1,textureId:t.id,renderOccluded:16}),i=fe,r=be,o=r*he,n=e=>{const t=new Uint32Array([0,1,2,2,3,0]);return new Te([[\"position\",{size:3,data:[i-e,-e,0,i+e,-e,0,i+e,e,0,i-e,e,0],exclusive:!0}],[\"uv0\",{size:2,data:[0,0,1,0,1,1,0,1]}]],[[\"position\",t],[\"uv0\",t]])},a=Ue.createPolylineGeometry([[0,0,0],[i-r,0,0]]),c=Ue.createPolylineGeometry([[0,0,0],[i-o,0,0]]),l=new Le({color:te,renderOccluded:4}),m=[{geometry:n(r),material:s,stateMask:1|dt},{geometry:a,material:l,stateMask:1|dt},{geometry:n(o),material:s,stateMask:2|dt},{geometry:c,material:l,stateMask:2|dt}];return new q({view:e,renderObjects:m,autoScaleRenderObjects:!1,collisionType:{type:\"disc\",direction:[0,0,1],offset:[i,0,0]},collisionPriority:1,radius:r/2,state:dt})}function tt(e){return new Pe({view:e,attached:!0,color:se,width:ie,writeDepthEnabled:!1,renderOccluded:4,geometry:[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]]]})}function st(e){return new ve({view:e,attached:!0,backgroundColor:[...re],gridColor:oe,gridWidth:4,renderOccluded:4})}function it(e,t){const s=Ze(t),i=s?[R(1,0,0),R(0,0,0),R(0,1,0)]:[R(1,0,0),R(-1,0,0)],r=Ue.createPolylineGeometry(i),o=[...we,1],n=e=>new Ae({color:o,width:e,renderOccluded:4}),a=()=>new Le({color:o,renderOccluded:4}),c=s?ke:je,l=c*ye,m=je,g=e=>e>1?n(e):a(),d=[{geometry:r,material:g(c),stateMask:1|bt},{geometry:r,material:g(l),stateMask:2|bt},{geometry:r,material:g(m),stateMask:ht}],u=new q({view:e,renderObjects:d,collisionType:{type:\"line\",paths:[i]},autoScaleRenderObjects:!1,worldSized:!0,radius:s?ne:ae,idHint:s?1:2});return u.state=bt,u}function rt(e,t,s){const i=i=>{const o=(i?t:e).slice(0),n=P(D.get(),o[0],o[1]);j(n,n);const a=P(D.get(),o[o.length-1],o[o.length-2]);if(j(a,a),s.padding>0){const e=b(U(),a,-s.padding);if(o[o.length-1]=M(e,e,o[o.length-1]),s.bothEnds){const e=b(U(),n,-s.padding);o[0]=M(e,e,o[0])}}const g=i?s.tipFocusMultiplier:1,h=s.tipLength*(s.focusTipLength?g:1),w=s.tipRadius*g,y=c(B.get());if(s.padding>0){const e=h/4,t=O(D.get(),0,e,0),i=1+s.padding/e;d(y,y,t),l(y,y,O(D.get(),i,i,i)),d(y,y,b(t,t,-1/i))}const k=c(p()),v=R(0,1,0),T=u(p(),f(V.get(),v,a));T[12]=o[o.length-1][0],T[13]=o[o.length-1][1],T[14]=o[o.length-1][2],m(T,T,y);const S=[{part:\"tube\",geometry:ot(s.tubeRadius*(i?s.tubeFocusMultiplier:1)+s.padding,s.flat,o),transform:k}];let L,A;if(r(s.flat)?L=Ue.createExtrudedTriangle(h,w,w,s.flat.thickness):(L=Ue.createConeGeometry(h,w,24,!1,!1,!0),A=Ue.createConeGeometry(h,w,24,!1,!0,!1)),S.push({part:\"tip\",geometry:L,transform:T}),A&&S.push({part:\"cap\",geometry:A,transform:T}),s.bothEnds){const e=u(p(),f(V.get(),v,n));e[12]=o[0][0],e[13]=o[0][1],e[14]=o[0][2],m(e,e,y),S.push({part:\"tip\",geometry:L,transform:e}),A&&S.push({part:\"cap\",geometry:A,transform:e})}return S};return{normal:i(!1),focused:i(!0)}}function ot(e,t,s){const i=[];if(r(t))i.push([e,t.thickness/2],[-e,t.thickness/2],[-e,-t.thickness/2],[e,-t.thickness/2]);else{const t=12;for(let s=0;s<t;s++){const r=s/t*2*Math.PI;i.push([Math.cos(r)*e,Math.sin(r)*e])}}return Ue.createPathExtrusionGeometry(i,s,[],[],!1)}function nt(e,t){const s=P(U(),e[e.length-1],e[e.length-2]);if(j(s,s),b(s,s,ce),M(s,s,e[e.length-1]),t){const t=P(U(),e[0],e[1]);return j(t,t),b(t,t,ce),M(t,t,e[0]),[t,...e,s]}return[...e,s]}function at(e,t,i,n=new Ee){if(o(e))return null;const a=r(n.position)?n.position:new Fe;t.fromRenderCoords(e.origin,a,i),n.position=a;const c=t.worldUpAtPosition(e.origin,D.get()),l=t.worldBasisAtPosition(e.origin,1,D.get());return n.width=2*k(e.basis1),n.height=2*k(e.basis2),n.tilt=s(ct(e,c)),n.heading=s(lt(e,c,l)),n}function ct(e,t){return z(t,e.basis2,e.basis1)+ft}function lt(e,t,s){return z(e.basis1,s,t)-ft}function mt(e,t,s=A()){return o(e)||o(e.position)?null:t.toRenderCoords(e.position,s.origin)?(t.worldBasisAtPosition(s.origin,0,s.basis1),t.worldBasisAtPosition(s.origin,1,s.basis2),C(s.basis2,s.basis1,s.origin,s.plane),S(s,-i(e.heading),E(s),s),S(s,i(e.tilt),s.basis1,s),b(s.basis1,s.basis1,e.width/2),b(s.basis2,s.basis2,e.height/2),F(s),s):(Ge.error(`Failed to project slice plane position, projection from ${e.position.spatialReference.wkid} is not supported`),null)}function gt(t){switch(t.type){case\"building-scene\":case\"csv\":case\"direct-line-measurement\":case\"area-measurement\":case\"feature\":case\"geo-rss\":case\"geojson\":case\"graphics\":case\"group\":case\"integrated-mesh\":case\"kml\":case\"line-of-sight\":case\"map-notes\":case\"ogc-feature\":case\"point-cloud\":case\"route\":case\"slice\":case\"scene\":case\"stream\":case\"voxel\":case\"subtype-group\":case\"unknown\":case\"unsupported\":case\"wfs\":case null:return!1;case\"base-dynamic\":case\"base-elevation\":case\"base-tile\":case\"bing-maps\":case\"elevation\":case\"imagery\":case\"imagery-tile\":case\"map-image\":case\"open-street-map\":case\"tile\":case\"vector-tile\":case\"wcs\":case\"web-tile\":case\"wms\":case\"wmts\":return!0;default:return e(t.type),!1}}const dt=16,ut=32,pt=x(),ft=Math.PI/2,bt=16,ht=32;export{dt as DidPointerMoveRecentlyFlag,ut as IsShiftEdgeOnScreenFlag,nt as addArrowTips,Ve as calculateBoundedPlaneTranslateRotate,Ye as calculateDiagonalResizeHandleScale,De as calculatePlaneHalfSize,Xe as calculateResizeHandlePadding,Qe as calculateScreenSpaceBasisLength2,rt as createArrowGeometry,st as createGridVisualElement,tt as createOutlineVisualElement,Ce as createPlane,it as createResizeManipulator,et as createRotateManipulator,qe as createRotatePlane,_e as createShiftManipulator,Be as createShiftPlane,xe as forceHorizontalOrVertical,gt as isAlwaysDrapedLayer,Ze as isDiagonalResizeHandle,Ie as normalToBases,at as planeToShape,bt as resizeNormal,ht as resizeOutlineOnly,ze as resizePlane,mt as shapeToPlane,We as updateResizeHandle,$e as updateRotateHeadingHandle,Je as updateRotateTiltHandle,He as updateShiftRestartHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import i from\"../../../../../core/Accessor.js\";import t from\"../../../../../core/Handles.js\";import a from\"../../../../../core/Logger.js\";import{isNone as r,isSome as l}from\"../../../../../core/maybe.js\";import{whenOnce as s}from\"../../../../../core/watchUtils.js\";import{property as n}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{a as c}from\"../../../../../chunks/boundedPlane.js\";import d from\"../../../../../layers/Layer.js\";import h from\"../../../../../layers/buildingSublayers/BuildingComponentSublayer.js\";import{isAlwaysDrapedLayer as y,shapeToPlane as u,forceHorizontalOrVertical as p,planeToShape as w}from\"../../analysisTools/slice/sliceToolUtils.js\";import v from\"../../../../../widgets/Slice/SlicePlane.js\";const V=a.getLogger(\"esri.views.3d.interactive.graphics.Slice.SliceController\");let f=class extends i{constructor(e){super(e),this._handles=new t,this._internalChange=!1,this._currentSlicePlane=null,this.state=\"pending\"}get ready(){return\"ready\"===this.state}initialize(){this._handles.add(this.layerView.layerViewData.excludedLayers.on(\"before-add\",(e=>{const i=e.item;null!=i&&(i instanceof d||i instanceof h)?i instanceof d&&y(i)?(V.error(\"excludedLayers\",`Layer '${i.title}, id:${i.id}' of type '${i.type}' can not be individually excluded from slicing. Use 'excludeGroundSurface' instead.`),e.preventDefault()):this.layerView.layerViewData.excludedLayers.includes(i)&&e.preventDefault():(V.error(\"excludedLayers\",\"Invalid layer type, layer must derive from Layer or BuildingComponentSublayer\"),e.preventDefault())}))),this._handles.add(s(this.view,\"ready\",(()=>this._initialize()),!0))}_initialize(){switch(this.state){case\"pending\":break;case\"destroyed\":return;case\"ready\":throw new Error(\"state error\")}C(this.view,this),this._handles.add([this.layerView.layerViewData.watch(\"plane\",(()=>{this._internalChange||this._updateSlicePlaneFromBoundedPlane(),this._updateLayerViews()}),!0),this.layerView.layerViewData.watch(\"excludeGroundSurface\",(()=>this._updateLayerViews()),!0),this.layerView.layerViewData.excludedLayers.on(\"change\",(()=>this._updateLayerViews())),this.layerView.watch([\"active\",\"visible\"],(()=>{this._updateActiveController(),this._updateViewSlicePlane()}),!0),this.view.allLayerViews.on(\"change\",(()=>this._updateLayerViews()))]),this._handles.add([this.analysis.watch(\"plane\",(()=>{this._internalChange||(this._updateBoundedPlaneFromSlicePlane(),this._updateViewSlicePlane())}),!0)],\"analysis\"),this._set(\"state\",\"ready\"),this._updateActiveController(),this._updateBoundedPlaneFromSlicePlane(),this._updateViewSlicePlane()}destroy(){switch(this.state){case\"destroyed\":case\"pending\":return}this.layerView.active=!1,P(this.view,this),this._handles.destroy(),this.view.slicePlane=null,this.set(\"view\",null),this._set(\"state\",\"destroyed\")}async whenReady(){return await s(this,\"ready\"),this}_updateBoundedPlaneFromSlicePlane(){const e=this.analysis.plane,i=this._currentSlicePlane;if(r(i)&&r(e)||l(i)&&l(e)&&e.equals(i))return;let t=null,a=null;l(e)&&(t=u(e,this.view.renderCoordsHelper,c()),l(t)?a={heading:e.heading,tilt:e.tilt,position:e.position,width:e.width,height:e.height}:console.warn(\"Failed slice plane conversion.\")),this._currentSlicePlane=a,l(t)&&!this.analysis.tiltEnabled&&p(t,this.view.renderCoordsHelper,t),this._internalChange=!0,this.layerView.layerViewData.plane=t,this._internalChange=!1}_updateSlicePlaneFromBoundedPlane(){const e=this.layerView.layerViewData.plane,i=w(e,this.view.renderCoordsHelper,this.view.spatialReference,new v);let t=null;l(i)&&(t={heading:i.heading,tilt:i.tilt,position:i.position,width:i.width,height:i.height}),this._currentSlicePlane=t,l(e)&&(this.analysis.tiltEnabled||p(e,this.view.renderCoordsHelper,e)),this._internalChange=!0,this.analysis.plane=i,this._internalChange=!1,this._updateViewSlicePlane()}_updateActiveController(){if(_)return;const e=S(this.view);if(this.layerView.active)l(e.activeController)&&e.activeController!==this?(_=!0,e.activeController.layerView.active=!1,_=!1):l(e.activeController)&&e.activeController,this._updateLayerViews(),e.activeController=this;else{if(l(e.activeController)&&e.activeController!==this)return;l(e.activeController)&&e.activeController===this&&(e.activeController=null,this._updateLayerViews())}}_updateViewSlicePlane(){\"ready\"===this.state&&g(this.view)}_updateLayerViews(){const e=l(this.layerView.layerViewData.plane)&&this.layerView.visible&&this.layerView.active,i=[],t=e=>{\"layers\"in e?e.layers.forEach(t):i.push(e)};this.layerView.layerViewData.excludedLayers.forEach(t),this.view.allLayerViews.forEach((t=>{\"slicePlaneEnabled\"in t&&(t.slicePlaneEnabled=e&&i.indexOf(t.layer)<0),\"sublayerViews\"in t&&t.sublayerViews.forEach((t=>{t.slicePlaneEnabled=e&&i.indexOf(t.sublayer)<0}))})),null!=this.view.basemapTerrain&&(this.view.basemapTerrain.slicePlaneEnabled=e&&!this.layerView.layerViewData.excludeGroundSurface)}};e([n({readOnly:!0})],f.prototype,\"state\",void 0),e([n()],f.prototype,\"view\",void 0),e([n()],f.prototype,\"analysis\",void 0),e([n()],f.prototype,\"layerView\",void 0),e([n()],f.prototype,\"ready\",null),f=e([o(\"esri.views.3d.interactive.graphics.Slice.SliceController\")],f);const m=new Map;let _=!1;function g(e){const i=S(e).activeController;l(i)&&l(i.layerView.layerViewData.plane)&&i.layerView.visible?e.slicePlane=i.layerView.layerViewData.plane:e.slicePlane=null}function C(e,i){m.has(e)||m.set(e,{all:[],activeController:null}),m.get(e).all.push(i)}function S(e){return m.get(e)}function P(e,i){if(!m.has(e))throw new Error(\"view expected in global slice register\");const t=m.get(e),a=t.all.lastIndexOf(i);if(-1===a)throw new Error(\"controller expected in global slice register\");t.all.splice(a,1),0===t.all.length&&m.delete(e)}export{f as SliceController};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Accessor.js\";import i from\"../../../../../core/Handles.js\";import{isNone as s,destroyMaybe as a,isSome as r}from\"../../../../../core/maybe.js\";import{whenOnce as l}from\"../../../../../core/watchUtils.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as n}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{v as h,m as d}from\"../../../../../chunks/mat4.js\";import{s as p,l as u}from\"../../../../../chunks/vec3.js\";import{sm4d as c,sv3d as m}from\"../../../../../geometry/support/vectorStacks.js\";import{PLANE_OUTLINE_WIDTH as y,PLANE_PREVIEW_OUTLINE_WIDTH as w,PLANE_OUTLINE_COLOR as _,PLANE_BACKGROUND_COLOR as V,GRID_COLOR as g}from\"../../analysisTools/slice/sliceToolConfig.js\";import{createGridVisualElement as v,createOutlineVisualElement as E,calculateBoundedPlaneTranslateRotate as b}from\"../../analysisTools/slice/sliceToolUtils.js\";import{createStipplePatternSimple as f}from\"../../../webgl-engine/materials/lineStippleUtils.js\";let j=class extends t{constructor(e){super(e),this._handles=new i,this._gridVisualElement=null,this._outlineVisualElement=null,this.state=\"pending\"}get ready(){return\"ready\"===this.state}set showGrid(e){this._set(\"showGrid\",e),this._updateMaterials()}set editable(e){this._set(\"editable\",e),this._updateMaterials()}initialize(){this._initialize()}async _initialize(){switch(this.state){case\"pending\":break;case\"destroyed\":return;case\"ready\":throw new Error(\"state error\")}if(await l(this.view,\"ready\",!0),s(this.layerView.layerViewData))throw new Error(\"expected internal object to be valid\");this._gridVisualElement=v(this.view),this._outlineVisualElement=E(this.view),this._handles.add([this.analysis.watch(\"opacity\",(()=>this._updateMaterials()),!0)],\"analysis\"),this._handles.add([this.layerView.watch(\"visible\",(()=>this._updateMaterials()),!0),this.layerView.layerViewData.watch(\"plane\",(()=>this._updatePlane()),!0),this.layerView.watch(\"active\",(()=>this._updateMaterials()),!0)],\"internal\"),this._updatePlane(),this._set(\"state\",\"ready\")}destroy(){switch(this.state){case\"destroyed\":case\"pending\":return}this._handles.destroy(),this._gridVisualElement=a(this._gridVisualElement),this._outlineVisualElement=a(this._outlineVisualElement),this.set(\"view\",null),this._set(\"state\",\"destroyed\")}async whenReady(){return await l(this,\"ready\"),this}_update(){switch(this.state){case\"pending\":case\"destroyed\":return}}_updatePlane(){const e=this.layerView.layerViewData.plane,t=r(e)?b(e,c.get()):null;if(this._outlineVisualElement.width=y,r(e)){const i=p(m.get(),u(e.basis1),u(e.basis2),1),s=h(c.get(),i),a=d(s,t,s);this._outlineVisualElement.transform=a,this._gridVisualElement.transform=a}this._updateMaterials()}_updateMaterials(){const e=this.layerView.layerViewData.plane&&this.analysis.visible,t=this.layerView.active,i=[_[0],_[1],_[2],_[3]];this._outlineVisualElement.color=i,this._outlineVisualElement.width=this.editable?y:w,this._outlineVisualElement.stipplePattern=t?null:f(5);const s=[V[0],V[1],V[2],V[3]],a=!!r(this.layerView.layerViewData)&&this.showGrid?g:[0,0,0,0];this._gridVisualElement.backgroundColor=s,this._gridVisualElement.gridColor=a,this._gridVisualElement.visible=e,this._outlineVisualElement.visible=e}};e([o({readOnly:!0})],j.prototype,\"state\",void 0),e([o()],j.prototype,\"view\",void 0),e([o()],j.prototype,\"analysis\",void 0),e([o()],j.prototype,\"layerView\",void 0),e([o()],j.prototype,\"ready\",null),e([o({value:!1})],j.prototype,\"showGrid\",null),e([o({value:!0})],j.prototype,\"editable\",null),j=e([n(\"esri.views.3d.interactive.graphics.Slice.SliceView\")],j);export{j as SliceView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import r from\"../../../../../core/Accessor.js\";import o from\"../../../../../core/Collection.js\";import{referenceSetter as s,castForReferenceSetter as t}from\"../../../../../core/collectionUtils.js\";import{property as c}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/Logger.js\";import{subclass as p}from\"../../../../../core/accessorSupport/decorators/subclass.js\";let i=class extends r{constructor(){super(...arguments),this.plane=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get(\"excludedLayers\")||new o}set excludedLayers(e){this._set(\"excludedLayers\",s(e,this._get(\"excludedLayers\")))}};e([c()],i.prototype,\"plane\",void 0),e([c()],i.prototype,\"excludeGroundSurface\",void 0),e([c({cast:t})],i.prototype,\"excludedLayers\",null),i=e([p(\"esri.views.3d.interactive.graphics.Slice.SliceInternal\")],i);export{i as SliceLayerViewData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import{createDeferred as e}from\"../../../core/promiseUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/Logger.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import{SliceController as r}from\"../interactive/graphics/Slice/SliceController.js\";import{SliceView as a}from\"../interactive/graphics/Slice/SliceView.js\";import{LayerView3D as o}from\"./LayerView3D.js\";import{SliceLayerViewData as l}from\"./analysis/Slice/SliceLayerViewData.js\";import n from\"../../layers/LayerView.js\";let y=class extends(o(n)){constructor(){super(...arguments),this.type=\"slice-3d\",this.analysisView=null,this.analysisController=null,this._initialized=e(),this.layerViewData=new l,this.active=!0,this.showGrid=!1,this.editable=!1}initialize(){this.analysisView=new a({view:this.view,analysis:this.layer,layerView:this}),this.analysisController=new r({view:this.view,analysis:this.layer,layerView:this}),this._initialized.resolve()}destroy(){this.analysisView.destroy(),this.analysisView=null,this.analysisController.destroy(),this.analysisController=null}async when(){return this.destroyed?null:(await this._initialized.promise,this.destroyed?null:(await this.analysisView.whenReady(),this.destroyed?null:(await this.analysisController.whenReady(),this)))}get testData(){return{view:this.analysisView,controller:this.analysisController}}};i([s()],y.prototype,\"type\",void 0),i([s()],y.prototype,\"layerViewData\",void 0),i([s()],y.prototype,\"layer\",void 0),i([s()],y.prototype,\"active\",void 0),i([s({aliasOf:\"analysisView.showGrid\"})],y.prototype,\"showGrid\",void 0),i([s({aliasOf:\"analysisView.editable\"})],y.prototype,\"editable\",void 0),y=i([t(\"esri.views.3d.layers.SliceLayerView3D\")],y);var p=y;export default p;export{y as SliceLayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nfunction i(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}export{i as isMultiOriginJSONMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{getPathExtension as i}from\"../../core/urlUtils.js\";function p(i){return o[n(i)]||e}function n(i){return i instanceof Blob?i.type:t(i.url)}function t(p){const n=i(p);return g[n]||a}const o={},a=\"text/plain\",e=o[a],g={png:\"image/png\",jpeg:\"image/jpeg\",jpg:\"image/jpg\",bmp:\"image/bmp\",gif:\"image/gif\",json:\"application/json\",txt:\"text/plain\",xml:\"application/xml\",svg:\"image/svg+xml\",zip:\"application/zip\",pbf:\"application/vnd.mapbox-vector-tile\",gz:\"application/gzip\"};for(const l in g)o[g[l]]=l;export{p as getResourceContentExtension};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as r,get as e}from\"../../maybe.js\";import{isMultiOriginJSONMixin as o}from\"../../multiOriginJSONSupportUtils.js\";import{isAbsolute as i,isBlobProtocol as n,join as s,getPathExtension as u}from\"../../urlUtils.js\";import{generateUUID as p}from\"../../uuid.js\";import{getOwnPropertyMetadata as a}from\"../metadata.js\";import{nameToId as c}from\"../PropertyOrigin.js\";import{propertyJSONMeta as l}from\"./property.js\";import{getResourceContentExtension as f}from\"../../../portal/support/resourceExtension.js\";import{r as m,t as y,i as h,p as d}from\"../../../chunks/persistableUrlUtils.js\";function g(r){const e=t(r)&&r.origins?r.origins:[void 0];return(t,o)=>{const i=w(r,t,o);for(const r of e){const e=l(t,r,o);for(const t in i)e[t]=i[t]}}}function w(r,e,o){if(t(r)&&\"resource\"===r.type)return v(r,e,o);switch(t(r)&&r.type?r.type:\"other\"){case\"other\":return{read:!0,write:!0};case\"url\":{const{read:t,write:r}=d;return{read:t,write:r}}}}function v(e,s,u){const p=a(s,u);return{type:String,read:(t,r,e)=>{const o=m(t,r,e);return p.type===String?o:\"function\"==typeof p.type?new p.type({url:o}):void 0},write:{writer(s,a,l,f){if(!f||!f.resources)return\"string\"==typeof s?void(a[l]=y(s,f)):void(a[l]=s.write({},f));const m=P(s),d=m?y(m,{...f,verifyItemRelativeUrls:f&&f.verifyItemRelativeUrls?{writtenUrls:f.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},1):null,g=p.type!==String&&(!o(this)||f&&f.origin&&this.originIdOf(u)>c(f.origin));f&&f.portalItem&&t(d)&&!i(d)?g?j(this,u,s,d,a,l,f,e):I(d,a,l,f):f&&f.portalItem&&(r(d)||t(h(d))||n(d)||g)?U(this,u,s,d,a,l,f,e):a[l]=d}}}}function U(t,r,o,i,u,a,c,l){const m=p(),y=S(o,i,c),h=s(e(l,\"prefix\"),m),d=`${h}.${f(y)}`,g=c.portalItem.resourceFromPath(d);n(i)&&c.resources.pendingOperations.push(b(i).then((t=>{g.path=`${h}.${f(t)}`,u[a]=g.itemRelativeUrl})).catch((()=>{}))),O(t,r,g,y,c.resources.toAdd),u[a]=g.itemRelativeUrl}function j(t,r,e,o,i,n,s,p){const a=s.portalItem.resourceFromPath(o),c=S(e,o,s);f(c)===u(a.path)?(O(t,r,a,c,s.resources.toUpdate),i[n]=o):U(t,r,e,o,i,n,s,p)}function I(t,r,e,o){o.resources.toKeep.push({resource:o.portalItem.resourceFromPath(t)}),r[e]=t}function O(t,r,e,o,i){i.push({resource:e,content:o,finish:e=>{R(t,r,e)}})}function S(t,r,e){return\"string\"==typeof t?{url:r}:new Blob([JSON.stringify(t.toJSON(e))],{type:\"application/json\"})}async function b(t){const r=(await import(\"../../../request.js\")).default,{data:e}=await r(t,{responseType:\"blob\"});return e}function P(t){return r(t)?null:\"string\"==typeof t?t:t.url}function R(t,r,e){\"string\"==typeof t[r]?t[r]=e.url:t[r].url=e.url}export{g as persistable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{enumeration as r}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let s=class extends t{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};e([o({type:Number})],s.prototype,\"nodesPerPage\",void 0),e([o({type:Number})],s.prototype,\"rootIndex\",void 0),e([o({type:String})],s.prototype,\"lodSelectionMetricType\",void 0),s=e([p(\"esri.layer.support.I3SNodePageDefinition\")],s);let i=class extends t{constructor(){super(...arguments),this.factor=1}};e([o({type:Number,json:{read:{source:\"textureSetDefinitionId\"}}})],i.prototype,\"id\",void 0),e([o({type:Number})],i.prototype,\"factor\",void 0),i=e([p(\"esri.layer.support.I3SMaterialTexture\")],i);let a=class extends t{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};e([o({type:[Number]})],a.prototype,\"baseColorFactor\",void 0),e([o({type:i})],a.prototype,\"baseColorTexture\",void 0),e([o({type:i})],a.prototype,\"metallicRoughnessTexture\",void 0),e([o({type:Number})],a.prototype,\"metallicFactor\",void 0),e([o({type:Number})],a.prototype,\"roughnessFactor\",void 0),a=e([p(\"esri.layer.support.I3SMaterialPBRMetallicRoughness\")],a);let l=class extends t{constructor(){super(...arguments),this.alphaMode=\"opaque\",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace=\"none\",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};e([r({opaque:\"opaque\",mask:\"mask\",blend:\"blend\"})],l.prototype,\"alphaMode\",void 0),e([o({type:Number})],l.prototype,\"alphaCutoff\",void 0),e([o({type:Boolean})],l.prototype,\"doubleSided\",void 0),e([r({none:\"none\",back:\"back\",front:\"front\"})],l.prototype,\"cullFace\",void 0),e([o({type:i})],l.prototype,\"normalTexture\",void 0),e([o({type:i})],l.prototype,\"occlusionTexture\",void 0),e([o({type:i})],l.prototype,\"emissiveTexture\",void 0),e([o({type:[Number]})],l.prototype,\"emissiveFactor\",void 0),e([o({type:a})],l.prototype,\"pbrMetallicRoughness\",void 0),l=e([p(\"esri.layer.support.I3SMaterialDefinition\")],l);let n=class extends t{};e([o({type:String,json:{read:{source:[\"name\",\"index\"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],n.prototype,\"name\",void 0),e([r({jpg:\"jpg\",png:\"png\",dds:\"dds\",\"ktx-etc2\":\"ktx-etc2\",ktx2:\"ktx2\",basis:\"basis\"})],n.prototype,\"format\",void 0),n=e([p(\"esri.layer.support.I3STextureFormat\")],n);let u=class extends t{constructor(){super(...arguments),this.atlas=!1}};e([o({type:[n]})],u.prototype,\"formats\",void 0),e([o({type:Boolean})],u.prototype,\"atlas\",void 0),u=e([p(\"esri.layer.support.I3STextureSetDefinition\")],u);let y=class extends t{};e([r({Float32:\"Float32\",UInt64:\"UInt64\",UInt32:\"UInt32\",UInt16:\"UInt16\",UInt8:\"UInt8\"})],y.prototype,\"type\",void 0),e([o({type:Number})],y.prototype,\"component\",void 0),y=e([p(\"esri.layer.support.I3SGeometryAttribute\")],y);let d=class extends t{};e([r({draco:\"draco\"})],d.prototype,\"encoding\",void 0),e([o({type:[String]})],d.prototype,\"attributes\",void 0),d=e([p(\"esri.layer.support.I3SGeometryCompressedAttributes\")],d);let c=class extends t{constructor(){super(...arguments),this.offset=0}};e([o({type:Number})],c.prototype,\"offset\",void 0),e([o({type:y})],c.prototype,\"position\",void 0),e([o({type:y})],c.prototype,\"normal\",void 0),e([o({type:y})],c.prototype,\"uv0\",void 0),e([o({type:y})],c.prototype,\"color\",void 0),e([o({type:y})],c.prototype,\"uvRegion\",void 0),e([o({type:y})],c.prototype,\"featureId\",void 0),e([o({type:y})],c.prototype,\"faceRange\",void 0),e([o({type:d})],c.prototype,\"compressedAttributes\",void 0),c=e([p(\"esri.layer.support.I3SGeometryBuffer\")],c);let m=class extends t{};e([r({triangle:\"triangle\"})],m.prototype,\"topology\",void 0),e([o()],m.prototype,\"geometryBuffers\",void 0),m=e([p(\"esri.layer.support.I3SGeometryDefinition\")],m);export{y as I3SGeometryAttribute,c as I3SGeometryBuffer,d as I3SGeometryCompressedAttributes,m as I3SGeometryDefinition,l as I3SMaterialDefinition,a as I3SMaterialPBRMetallicRoughness,i as I3SMaterialTexture,s as I3SNodePageDefinition,n as I3STextureFormat,u as I3STextureSetDefinition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as s}from\"../../../../core/maybe.js\";import{d as r}from\"../../../../chunks/mat4.js\";import{c as t}from\"../../../../chunks/mat4f64.js\";import{VisualElement as o}from\"./VisualElement.js\";import{Object3D as i}from\"../../webgl-engine/lib/Object3D.js\";import{WebGLLayer as a}from\"../../webgl-engine/lib/WebGLLayer.js\";class c extends o{constructor(e){super(e.view),this._resources=null,this._transform=t()}get object(){return e(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(s){r(this._transform,s),e(this._resources)&&(this._resources.object.transformation=this._transform)}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(s(this._resources))return;const e=this._resources.object,r=this.view._stage;r.removeMany(e.geometries),e.removeAllGeometries(),this.createGeometries(e),this.visible||e.setVisible(this.visible),r.addMany(e.geometries)}createResources(){this.destroyResources();const e=this.view._stage;if(!e)return;const s=new a({isPickable:!1,updatePolicy:1});e.add(s);const r=new i({castShadow:!1});r.transformation=this._transform,this.createExternalResources(),this.createGeometries(r),e.addMany(r.geometries),this.forEachExternalMaterial((s=>e.add(s))),e.add(r),s.add(r),this.visible||r.setVisible(!1),this._resources={layer:s,object:r}}destroyResources(){const e=this.view._stage;!s(this._resources)&&e&&(e.remove(this._resources.object),e.remove(this._resources.layer),this.forEachExternalMaterial((s=>{e.remove(s),s.dispose()})),e.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){s(this._resources)||this._resources.object.setVisible(e)}}export{c as Object3DVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../PopupTemplate.js\";import\"../../renderers/ClassBreaksRenderer.js\";import\"../../renderers/DictionaryRenderer.js\";import\"../../renderers/DotDensityRenderer.js\";import\"../../renderers/HeatmapRenderer.js\";import\"../../renderers/Renderer.js\";import\"../../renderers/SimpleRenderer.js\";import\"../../renderers/UniqueValueRenderer.js\";import\"../../renderers/support/jsonUtils.js\";import{webSceneRendererTypes as t}from\"../../renderers/support/types.js\";import o from\"../../request.js\";import s from\"../../core/Error.js\";import{JSONMap as i}from\"../../core/jsonMap.js\";import a from\"../../core/Loadable.js\";import p from\"../../core/Logger.js\";import{isSome as n,isNone as l}from\"../../core/maybe.js\";import{EsriPromiseMixin as d}from\"../../core/Promise.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{enumeration as u}from\"../../core/accessorSupport/decorators/enumeration.js\";import{reader as c}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as m}from\"../../core/accessorSupport/decorators/subclass.js\";import h from\"../../geometry/Extent.js\";import f from\"../../geometry/SpatialReference.js\";import g from\"../FeatureLayer.js\";import j from\"./BuildingSublayer.js\";import{zeroCapabilities as v}from\"../support/capabilities.js\";import{popupEnabled as b}from\"../support/commonProperties.js\";import{defineFieldProperties as L}from\"../support/fieldProperties.js\";import F from\"../support/FieldsIndex.js\";import{fetchIndexInfo as S}from\"../support/I3SIndexInfo.js\";import{I3SNodePageDefinition as I,I3SMaterialDefinition as O,I3STextureSetDefinition as w,I3SGeometryDefinition as x}from\"../support/I3SLayerDefinitions.js\";import T from\"../../rest/support/Query.js\";import{createPopupTemplate as q}from\"../../support/popupUtils.js\";import P from\"../../symbols/support/ElevationInfo.js\";const D=p.getLogger(\"esri.layers.buildingSublayers.BuildingComponentSublayer\"),Q=L();let R=class extends(a.LoadableMixin(d(j))){constructor(e){super(e),this.type=\"building-component\",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.fields=null,this.associatedLayer=null,this.outFields=null,this.listMode=\"show\",this.renderer=null,this.definitionExpression=null,this.popupEnabled=!0,this.popupTemplate=null,this.layerType=\"3d-object\"}get parsedUrl(){return this.layer?{path:`${this.layer.parsedUrl.path}/sublayers/${this.id}`,query:this.layer.parsedUrl.query}:null}get fieldsIndex(){return new F(this.fields)}readAssociatedLayer(e,r){const t=this.layer.associatedFeatureServiceItem,o=r.associatedLayerID;return n(t)&&\"number\"==typeof o?new g({portalItem:t,layerId:o}):null}get objectIdField(){if(null!=this.fields)for(const e of this.fields)if(\"oid\"===e.type)return e.name;return null}get displayField(){return n(this.associatedLayer)?this.associatedLayer.displayField:null}get defaultPopupTemplate(){return this.createPopupTemplate()}load(e){const r=n(e)?e.signal:null,t=this._fetchService(r).then((()=>{this.indexInfo=S(this.parsedUrl.path,this.rootNode,this.nodePages,this.apiKey,D,r)}));return this.addResolvingPromise(t),Promise.resolve(this)}createPopupTemplate(e){return q(this,e)}async _fetchService(e){const r=(await o(this.parsedUrl.path,{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e})).data;this.read(r,{origin:\"service\",url:this.parsedUrl})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,r){var t,o,s,i;const a=null==(t=this.getFeatureType(null==r?void 0:r.feature))||null==(o=t.domains)?void 0:o[e];return a&&\"inherited\"!==a.type?a:null!=(s=null==(i=this.getField(e))?void 0:i.domain)?s:null}getFeatureType(e){return e&&n(this.associatedLayer)?this.associatedLayer.getFeatureType(e):null}get types(){return n(this.associatedLayer)?this.associatedLayer.types:[]}get typeIdField(){return n(this.associatedLayer)?this.associatedLayer.typeIdField:null}get geometryType(){return\"3d-object\"===this.layerType?\"mesh\":\"point\"}get profile(){return\"3d-object\"===this.layerType?\"mesh-pyramids\":\"points\"}get capabilities(){const e=n(this.associatedLayer)&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:v,{query:r,data:{supportsZ:t,supportsM:o,isVersioned:s}}=e;return{query:r,data:{supportsZ:t,supportsM:o,isVersioned:s}}}createQuery(){const e=new T;return\"mesh\"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||\"1=1\",e.sqlFormat=\"standard\",e}queryExtent(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryExtent(e||this.createQuery(),r)))}queryFeatureCount(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryFeatureCount(e||this.createQuery(),r)))}queryFeatures(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryFeatures(e||this.createQuery(),r))).then((e=>{if(null!=e&&e.features)for(const r of e.features)r.layer=this.layer,r.sourceLayer=this;return e}))}queryObjectIds(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryObjectIds(e||this.createQuery(),r)))}getFieldUsageInfo(e){return this.fieldsIndex.has(e)?{supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1}:{supportsLabelingInfo:!1,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:n(this.associatedLayer)}}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return n(e)&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),l(this.associatedLayer))throw new s(\"buildingscenelayer:query-not-available\",\"BuildingSceneLayer component layer queries are not available without an associated feature layer\",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new s(\"buildingscenelayer:query-not-available\",\"BuildingSceneLayer associated feature layer could not be loaded\",{layer:this,error:e})}return this.associatedLayer}};e([y({readOnly:!0})],R.prototype,\"parsedUrl\",null),e([y({type:I,readOnly:!0})],R.prototype,\"nodePages\",void 0),e([y({type:[O],readOnly:!0})],R.prototype,\"materialDefinitions\",void 0),e([y({type:[w],readOnly:!0})],R.prototype,\"textureSetDefinitions\",void 0),e([y({type:[x],readOnly:!0})],R.prototype,\"geometryDefinitions\",void 0),e([y({readOnly:!0})],R.prototype,\"serviceUpdateTimeStamp\",void 0),e([y({readOnly:!0})],R.prototype,\"store\",void 0),e([y({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],R.prototype,\"rootNode\",void 0),e([y({readOnly:!0})],R.prototype,\"attributeStorageInfo\",void 0),e([y(Q.fields)],R.prototype,\"fields\",void 0),e([y({readOnly:!0})],R.prototype,\"fieldsIndex\",null),e([y({readOnly:!0,type:g})],R.prototype,\"associatedLayer\",void 0),e([c(\"service\",\"associatedLayer\",[\"associatedLayerID\"])],R.prototype,\"readAssociatedLayer\",null),e([y(Q.outFields)],R.prototype,\"outFields\",void 0),e([y({type:String,readOnly:!0})],R.prototype,\"objectIdField\",null),e([y({readOnly:!0,type:String,json:{read:!1}})],R.prototype,\"displayField\",null),e([y({readOnly:!0,type:String,aliasOf:\"layer.apiKey\"})],R.prototype,\"apiKey\",void 0),e([y({readOnly:!0,type:h,aliasOf:\"layer.fullExtent\"})],R.prototype,\"fullExtent\",void 0),e([y({readOnly:!0,type:f,aliasOf:\"layer.spatialReference\"})],R.prototype,\"spatialReference\",void 0),e([y({readOnly:!0,aliasOf:\"layer.version\"})],R.prototype,\"version\",void 0),e([y({readOnly:!0,type:P,aliasOf:\"layer.elevationInfo\"})],R.prototype,\"elevationInfo\",void 0),e([y({readOnly:!0,type:Number,aliasOf:\"layer.minScale\"})],R.prototype,\"minScale\",void 0),e([y({readOnly:!0,type:Number,aliasOf:\"layer.maxScale\"})],R.prototype,\"maxScale\",void 0),e([y({type:[\"hide\",\"show\"],json:{write:!0}})],R.prototype,\"listMode\",void 0),e([y({types:t,json:{origins:{service:{read:{source:\"drawingInfo.renderer\"}}},name:\"layerDefinition.drawingInfo.renderer\",write:!0},value:null})],R.prototype,\"renderer\",void 0),e([y({type:String,json:{origins:{service:{read:!1,write:!1}},name:\"layerDefinition.definitionExpression\",write:{enabled:!0,allowNull:!0}}})],R.prototype,\"definitionExpression\",void 0),e([y(b)],R.prototype,\"popupEnabled\",void 0),e([y({type:r,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\"}}})],R.prototype,\"popupTemplate\",void 0),e([y({readOnly:!0,type:String,json:{origins:{service:{read:{source:\"store.normalReferenceFrame\"}}},read:!1}})],R.prototype,\"normalReferenceFrame\",void 0),e([y({readOnly:!0,json:{read:!1}})],R.prototype,\"defaultPopupTemplate\",null),e([y()],R.prototype,\"types\",null),e([y()],R.prototype,\"typeIdField\",null),e([y({json:{write:!1}}),u(new i({\"3DObject\":\"3d-object\",Point:\"point\"}))],R.prototype,\"layerType\",void 0),e([y()],R.prototype,\"geometryType\",null),e([y()],R.prototype,\"profile\",null),e([y({readOnly:!0,json:{read:!1}})],R.prototype,\"capabilities\",null),R=e([m(\"esri.layers.buildingSublayers.BuildingComponentSublayer\")],R);var E=R;export default E;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{IdentifiableMixin as r}from\"../../core/Identifiable.js\";import{MultiOriginJSONSupport as o}from\"../../core/MultiOriginJSONSupport.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import{Integer as i}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/Logger.js\";import{reader as s}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{readOnlyService as a}from\"../support/commonProperties.js\";let l=class extends(r(o)){constructor(e){super(e),this.title=\"\",this.id=-1,this.modelName=null,this.isEmpty=null,this.visible=!0,this.opacity=1}readTitle(e,r){return\"string\"==typeof r.alias?r.alias:\"string\"==typeof r.name?r.name:\"\"}readIdOnlyOnce(e){return-1!==this.id?this.id:\"number\"==typeof e?e:void 0}};e([t({type:String,json:{origins:{\"web-scene\":{write:!0},\"portal-item\":{write:!0}}}})],l.prototype,\"title\",void 0),e([s(\"service\",\"title\",[\"alias\",\"name\"])],l.prototype,\"readTitle\",null),e([t()],l.prototype,\"layer\",void 0),e([t({type:i,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],l.prototype,\"id\",void 0),e([s(\"service\",\"id\")],l.prototype,\"readIdOnlyOnce\",null),e([t(a(String))],l.prototype,\"modelName\",void 0),e([t(a(Boolean))],l.prototype,\"isEmpty\",void 0),e([t({type:Boolean,json:{name:\"visibility\",write:!0}})],l.prototype,\"visible\",void 0),e([t({type:Number,json:{write:!0}})],l.prototype,\"opacity\",void 0),l=e([p(\"esri.layers.buildingSublayers.BuildingSublayer\")],l);var n=l;export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nconst s={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,tileMaxRecordCount:0}};export{s as zeroCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import o from\"../../core/Error.js\";import{isSome as r}from\"../../core/maybe.js\";async function n(n,t,s,a,i,d){let l=null;if(r(s)){const o=`${n}/nodepages/`,t=o+Math.floor(s.rootIndex/s.nodesPerPage);try{return{type:\"page\",rootPage:(await e(t,{query:{f:\"json\",token:a},responseType:\"json\",signal:d})).data,rootIndex:s.rootIndex,pageSize:s.nodesPerPage,lodMetric:s.lodSelectionMetricType,urlPrefix:o}}catch(f){r(i)&&i.warn(\"#fetchIndexInfo()\",\"Failed to load root node page. Falling back to node documents.\",t,f),l=f}}if(!t)return null;const p=`${n}/nodes/`,c=p+(t&&t.split(\"/\").pop());try{return{type:\"node\",rootNode:(await e(c,{query:{f:\"json\",token:a},responseType:\"json\",signal:d})).data,urlPrefix:p}}catch(f){throw new o(\"sceneservice:root-node-missing\",\"Root node missing.\",{pageError:l,nodeError:f,url:c})}}export{n as fetchIndexInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nclass t{constructor(t){this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t,this.view.watch(\"ready\",(t=>{this._resourcesCreated&&(t?this._createResources():this._destroyResources())}))}applyProps(t){let e=!1;for(const s in t)s in this?\"attached\"===s?e=t[s]:this[s]=t[s]:console.error(\"Cannot set unknown property\",s);this.attached=e}destroy(){this.attached=!1}get attached(){return this._attached}set attached(t){t!==this._attached&&this.view._stage&&(this._attached=t,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.attached&&this.updateVisibility(t))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.visible||this.updateVisibility(!1)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}export{t as VisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import{i as r,t as s}from\"../../../../chunks/mat4.js\";import{c as i}from\"../../../../chunks/mat4f64.js\";import{s as o}from\"../../../../chunks/vec3.js\";import{Z as n,c as l}from\"../../../../chunks/vec3f64.js\";import{g as h,c as a}from\"../../../../chunks/vec4.js\";import{f as p,c as d,a as f}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as _}from\"./Object3DVisualElement.js\";import{createGeometry as c}from\"../../layers/graphics/lineUtils.js\";import{RibbonLineMaterial as u}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class m extends _{constructor(e){super(e),this._renderOccluded=4,this._width=1,this._color=p(1,0,1,1),this._innerWidth=1,this._innerColor=null,this._stipplePattern=null,this._stippleOffColor=null,this._stippleIntegerRepeats=!1,this._writeDepthEnabled=!0,this._falloff=0,this._polygonOffset=!1,this.applyProps(e)}setGeometryFromExtent(e){const t=this.view.spatialReference,r=l(),s=l(),i=100,n=[];o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[2],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[2],e[3],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[3],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),o(r,e[0],e[1],i),this.view.renderCoordsHelper.toRenderCoords(r,t,s),n.push([s[0],s[1],s[2]]),this.geometry=[n]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromBoundedPlane(e){const t=[],r=e.origin,s=e.basis1,i=e.basis2,o=.5,n=l(),h=l(),a=l(),p=l();n[0]=r[0]-s[0]*o-i[0]*o,n[1]=r[1]-s[1]*o-i[1]*o,n[2]=r[2]-s[2]*o-i[2]*o,h[0]=r[0]-s[0]*o+i[0]*o,h[1]=r[1]-s[1]*o+i[1]*o,h[2]=r[2]-s[2]*o+i[2]*o,a[0]=r[0]+s[0]*o+i[0]*o,a[1]=r[1]+s[1]*o+i[1]*o,a[2]=r[2]+s[2]*o+i[2]*o,p[0]=r[0]+s[0]*o-i[0]*o,p[1]=r[1]+s[1]*o-i[1]*o,p[2]=r[2]+s[2]*o-i[2]*o,t.push([n[0],n[1],n[2]]),t.push([h[0],h[1],h[2]]),t.push([a[0],a[1],a[2]]),t.push([p[0],p[1],p[2]]),t.push([n[0],n[1],n[2]]),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;r(g),s(g,g,t),this.transform=g;const{points:i}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[i]}setGeometryFromSegments(e,t=n){r(g),s(g,g,t),this.transform=g,this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){h(e,this._color)||(a(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(r){e(r)?!t(this._innerColor)&&h(r,this._innerColor)||(this._innerColor=a(d(),r),this._updateMaterial()):e(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(t){const r=e(t)!==e(this._stipplePattern);this._stipplePattern=t,r?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(r){(t(r)||t(this._stippleOffColor)||!h(r,this._stippleOffColor))&&(this._stippleOffColor=e(r)?f(r):null,this._updateMaterial())}get stippleIntegerRepeats(){return this._stippleIntegerRepeats}set stippleIntegerRepeats(e){this._stippleIntegerRepeats!==e&&(this._stippleIntegerRepeats=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}createExternalResources(){this._material=new u(this.materialParameters)}destroyExternalResources(){this._material=null}createGeometries(e){const t=this._createLineGeometries();if(0!==t.length)for(let r=0;r<t.length;++r){const s=c(t[r]);e.addGeometry(s,this._material)}}forEachExternalMaterial(e){e(this._material)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,stippleIntegerRepeats:this._stippleIntegerRepeats,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateMaterial(){this.attached&&this._material.setParameterValues(this.materialParameters)}_createLineGeometries(){const e=this.geometry;if(t(e)||0===e.length)return[];const r=[];return e.forEach((e=>{const t=e.length,s=new Float64Array(3*t);e.forEach(((e,t)=>{s[3*t+0]=e[0],s[3*t+1]=e[1],s[3*t+2]=e[2]}));const i={attributeData:{position:s},removeDuplicateStartEnd:0};r.push(i)})),r}}const g=i();export{m as LineVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{Slice as e}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ReadLinearDepth as a}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as o}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{defaultMaskAlphaCutoff as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ColorConversion as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as t}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as l}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function s(s){const n=new l;return n.include(r,{linearDepth:!1}),n.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),n.attributes.add(\"position\",\"vec3\"),n.attributes.add(\"uv0\",\"vec2\"),n.varyings.add(\"vpos\",\"vec3\"),s.multipassTerrainEnabled&&n.varyings.add(\"depth\",\"float\"),n.vertex.uniforms.add(\"textureCoordinateScaleFactor\",\"vec2\"),n.vertex.code.add(t`\n    void main(void) {\n      vpos = position;\n      ${s.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n      vTexCoord = uv0 * textureCoordinateScaleFactor;\n      gl_Position = transformPosition(proj, view, vpos);\n    }\n  `),n.include(e,s),s.multipassTerrainEnabled&&(n.fragment.include(a),n.include(o,s)),n.fragment.uniforms.add(\"tex\",\"sampler2D\"),n.fragment.uniforms.add(\"opacity\",\"float\"),n.varyings.add(\"vTexCoord\",\"vec2\"),7===s.output?n.fragment.code.add(t`\n    void main() {\n      discardBySlice(vpos);\n      ${s.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n\n      float alpha = texture2D(tex, vTexCoord).a * opacity;\n      if (alpha  < ${t.float(i)}) {\n        discard;\n      }\n\n      gl_FragColor = vec4(alpha);\n    }\n    `):(n.fragment.include(d),n.fragment.code.add(t`\n    void main() {\n      discardBySlice(vpos);\n      ${s.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n      gl_FragColor = texture2D(tex, vTexCoord) * opacity;\n\n      if (gl_FragColor.a < ${t.float(i)}) {\n        discard;\n      }\n\n      gl_FragColor = highlightSlice(gl_FragColor, vpos);\n      ${s.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    }\n    `)),n}var n=Object.freeze({__proto__:null,build:s});export{n as I,s as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../shaderModules/interfaces.js\";function i(i){i.vertex.uniforms.add(\"camPos\",\"vec3\").add(\"perScreenPixelRatio\",\"float\").add(\"screenSize\",\"float\"),i.vertex.code.add(e`float computeRenderPixelSizeAt( vec3 pWorld ){\nvec3 viewForward = - vec3(view[0][2], view[1][2], view[2][2]);\nfloat viewDirectionDistance = abs(dot(viewForward, pWorld - camPos));\nreturn viewDirectionDistance*perScreenPixelRatio;\n}\nvec3 screenSizeScaling(vec3 position, vec3 anchor){\nreturn position * screenSize * computeRenderPixelSizeAt(anchor) + anchor;\n}`)}function r(e,i,r){e.setUniform1f(\"perScreenPixelRatio\",r.camera.perScreenPixelRatio),e.setUniform1f(\"screenSize\",i.screenSize)}export{i as ScreenSizeScaling,r as bindScreenSizeScalingUniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{ScreenSizeScaling as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSizeScaling.glsl.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ReadLinearDepth as i}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{multipassTerrainTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{symbolAlphaCutoff as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{ColorConversion as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as n}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as s}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function t(t){const c=new s;return c.include(o,{linearDepth:!1}),c.include(e,{}),c.include(r,t),c.fragment.include(l),c.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),c.fragment.uniforms.add(\"color\",\"vec4\"),c.attributes.add(\"position\",\"vec3\"),c.varyings.add(\"vWorldPosition\",\"vec3\"),t.multipassTerrainEnabled&&c.varyings.add(\"depth\",\"float\"),t.screenSizeEnabled&&c.attributes.add(\"offset\",\"vec3\"),t.shadingEnabled&&(c.vertex.uniforms.add(\"viewNormal\",\"mat4\"),c.fragment.uniforms.add(\"shadedColor\",\"vec4\").add(\"shadingDirection\",\"vec3\"),c.attributes.add(\"normal\",\"vec3\"),c.varyings.add(\"vViewNormal\",\"vec3\")),c.vertex.code.add(n`\n    void main(void) {\n      vWorldPosition = ${t.screenSizeEnabled?\"screenSizeScaling(offset, position)\":\"position\"};\n  `),t.shadingEnabled&&c.vertex.code.add(n`vec3 worldNormal = normal;\nvViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`),c.vertex.code.add(n`\n    ${t.multipassTerrainEnabled?\"depth = (view * vec4(vWorldPosition, 1.0)).z;\":\"\"}\n    gl_Position = transformPosition(proj, view, vWorldPosition);\n  }\n  `),t.multipassTerrainEnabled&&(c.fragment.include(i),c.include(a,t)),c.fragment.code.add(n`\n    void main() {\n      discardBySlice(vWorldPosition);\n      ${t.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n    `),t.shadingEnabled?c.fragment.code.add(n`vec3 viewNormalNorm = normalize(vViewNormal);\nfloat shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);\nvec4 finalColor = mix(color, shadedColor, shadingFactor);`):c.fragment.code.add(n`vec4 finalColor = color;`),c.fragment.code.add(n`\n      if (finalColor.a < ${n.float(d)}) {\n        discard;\n      }\n      ${7===t.output?n`gl_FragColor = vec4(finalColor.a);`:\"\"}\n\n      ${0===t.output?n`gl_FragColor = highlightSlice(finalColor, vWorldPosition); ${t.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}`:\"\"}\n    }\n    `),c}var c=Object.freeze({__proto__:null,build:t});export{c as S,t as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{glsl as d}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as e}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function r(){const r=new e;return r.extensions.add(\"GL_OES_standard_derivatives\"),r.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\"),r.attributes.add(\"position\",\"vec3\"),r.attributes.add(\"uv0\",\"vec2\"),r.varyings.add(\"vUV\",\"vec2\"),r.vertex.code.add(d`void main(void) {\nvUV = uv0;\ngl_Position = proj * view * vec4(position, 1.0);\n}`),r.fragment.uniforms.add(\"backgroundColor\",\"vec4\").add(\"gridColor\",\"vec4\").add(\"ratio\",\"float\").add(\"gridWidth\",\"float\"),r.fragment.code.add(d`void main() {\nconst float LINE_WIDTH = 1.0;\nvec2 uvScaled = vUV * gridWidth;\nvec2 gridUV = (fract(uvScaled + 0.5) - 0.5) / (LINE_WIDTH * fwidth(uvScaled));\nvec2 grid = (1.0 - step(0.5, gridUV)) * step(-0.5, gridUV);\ngrid.x *= step(0.5, uvScaled.x) * step(uvScaled.x, gridWidth - 0.5);\ngrid.y *= step(0.5, uvScaled.y) * step(uvScaled.y, gridWidth - 0.5);\nfloat gridFade = max(grid.x, grid.y);\nfloat gridAlpha = gridColor.a * gridFade;\ngl_FragColor =\nvec4(backgroundColor.rgb * backgroundColor.a, backgroundColor.a) * (1.0 - gridAlpha) +\nvec4(gridColor.rgb, 1.0) * gridAlpha;\n}`),r}var a=Object.freeze({__proto__:null,build:r});export{a as S,r as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{bindSliceUniformsWithOrigin as t}from\"../core/shaderLibrary/Slice.glsl.js\";import{bindMultipassTerrainTexture as r}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindProjectionMatrix as i,bindView as s}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as a}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as n,parameter as l}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as p}from\"../lib/DefaultVertexAttributeLocations.js\";import{OITBlending as c,OITDepthTest as u,OITDepthWrite as d,getOITPolygonOffset as h}from\"../lib/OrderIndependentTransparency.js\";import{Program as m}from\"../lib/Program.js\";import{stencilWriteMaskOn as b,stencilToolMaskBaseParams as f,stencilBaseAllZerosParams as g}from\"../lib/StencilUtils.js\";import{I as y}from\"../../../../chunks/ImageMaterial.glsl.js\";import{makePipelineState as T,cullingParams as P,defaultDepthWriteParams as v,defaultColorWriteParams as j,simpleBlendingParams as S}from\"../../../webgl/renderState.js\";class E extends o{initializeProgram(e){const t=E.shader.get(),r=this.configuration,i=t.build({output:r.output,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,OITEnabled:0===r.transparencyPassType,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new m(e.rctx,i,p)}bindPass(e,t){i(this.program,t.camera.projectionMatrix),this.program.setUniform1f(\"opacity\",e.opacity),t.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",t.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",t.inverseViewport),r(this.program,t))}bindDraw(e){s(this.program,e),t(this.program,this.configuration,e),this.program.rebindTextures()}setPipelineState(e,t){const r=this.configuration,i=3===e,s=2===e;return T({blending:0!==r.output&&7!==r.output||!r.transparent?null:i?w:c(e),culling:P(r.cullFace),depthTest:{func:u(e)},depthWrite:i?r.writeDepth&&v:d(e),colorWrite:j,stencilWrite:r.sceneHasOcludees?b:null,stencilTest:r.sceneHasOcludees?t?f:g:null,polygonOffset:i||s?null:h(r.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0),this.setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e){return e?this._occludeePipelineState:this.pipeline}}E.shader=new a(y,(()=>import(\"./ImageMaterial.glsl.js\")));const w=S(1,771);class O extends n{constructor(){super(...arguments),this.output=0,this.cullFace=0,this.slicePlaneEnabled=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([l({count:8})],O.prototype,\"output\",void 0),e([l({count:3})],O.prototype,\"cullFace\",void 0),e([l()],O.prototype,\"slicePlaneEnabled\",void 0),e([l()],O.prototype,\"transparent\",void 0),e([l()],O.prototype,\"enableOffset\",void 0),e([l()],O.prototype,\"writeDepth\",void 0),e([l()],O.prototype,\"sceneHasOcludees\",void 0),e([l({count:4})],O.prototype,\"transparencyPassType\",void 0),e([l()],O.prototype,\"multipassTerrainEnabled\",void 0),e([l()],O.prototype,\"cullAboveGround\",void 0);export{E as ImageMaterialTechnique,O as ImageMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../lib/GLMaterialTexture.js\";import{Material as t,materialParametersDefaults as i}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as s}from\"../lib/OrderIndependentTransparency.js\";import{DefaultBufferWriter as a,PositionUVLayout as r}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as n}from\"./internal/MaterialUtil.js\";import{ImageMaterialTechniqueConfiguration as u,ImageMaterialTechnique as h}from\"../shaders/ImageMaterialTechnique.js\";class c extends t{constructor(e){super(e,p),this.supportsEdges=!0,this.techniqueConfig=new u}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.params.cullFace,this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled,this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees,this.techniqueConfig.transparencyPassType=t?t.transparencyPassType:3,this.techniqueConfig.enableOffset=!t||t.camera.relativeElevation<s,this.techniqueConfig.multipassTerrainEnabled=!!t&&t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!t&&t.cullAboveGround,this.techniqueConfig}intersect(e,t,i,s,a,r,u){n(e,t,s,a,r,void 0,u)}getGLMaterial(e){return 0===e.output||7===e.output||4===e.output?new l(e):void 0}createBufferWriter(){return new a(r)}}class l extends e{constructor(e){super({...e,...e.material.params}),this.updateParameters()}updateParameters(e){const t=this._material.params;this.updateTexture(t.textureId),this._technique=this._techniqueRep.releaseAndAcquire(h,this._material.getTechniqueConfig(this._output,e),this._technique)}beginSlot(e){if(4===this._output)return 3===e;return e===(this._technique.configuration.transparent?this._technique.configuration.writeDepth?5:8:3)}_updateOccludeeState(e){e.hasOccludees!==this._material.params.sceneHasOcludees&&(this._material.setParameterValues({sceneHasOcludees:e.hasOccludees}),this.updateParameters(e))}ensureParameters(e){0!==this._output&&7!==this._output||this._updateOccludeeState(e),this.updateParameters(e)}bind(e){this.bindTextures(this._technique.program),this.bindTextureScale(this._technique.program),this._technique.bindPass(this._material.params,e)}getPipelineState(e,t){return this._technique.getPipelineState(t)}}const p={transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1,opacity:1,textureId:null,initTextureTransparent:!0,...i};export{c as ImageMaterial};\n"],"sourceRoot":""}