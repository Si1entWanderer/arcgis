(this.webpackJsonparcgis=this.webpackJsonparcgis||[]).push([[88],{1167:function(e,t,i){"use strict";i.r(t);var n=i(2),r=i(5),a=i(6),s=i(7),o=i(0),c=i(3),h=i(1),l=(i(17),i(18),i(15),i(10)),u=i(936),d=i(572),p=i(30),g=i(57),m=i(51),v=i(68),f=i(20),b=i(877),y=i(282),j=i(29),O=i(38),_=i(4),w=i(9),L=i(43),k=i(55),S=i(449),P=i(785),C=i(158),V=i(878),x=i(85);function M(e,t,i){var n={distance:null};return Object(V.b)(n,[e[0],e[1]],[t[0],t[1]],i),n.distance}function A(e,t,i){var n=t[0]-e[0],r=t[1]-e[1],a=i[0]-e[0],s=i[1]-e[1];return.5*Math.abs(n*s-r*a)}function z(e,t,i,n){var r=E;return Object(m.A)(e,n,R)&&Object(m.A)(t,n,G)&&Object(m.A)(i,n,D)?(r.setPoint(0,0,R),r.setPoint(0,1,G),r.setPoint(0,2,D),Math.abs(Object(P.geodesicArea)(r,"square-meters"))):0}var R=Object(w.e)(),G=Object(w.e)(),D=Object(w.e)(),E=new C.a({rings:[[R,G,D]],spatialReference:k.a.WGS84}),T=Object(w.e)(),I=i(940),q=function(){function e(t,i){Object(n.a)(this,e),this.positionsWorldCoords=[],this.positionsRenderCoords=[],this.positionsProjectedWorldCoords=[],this.positionsFittedRenderCoords=[],this.positionsGeographic=[],this.positionsSpherical=[],this.positionsStereographic=[],this.pathSegmentLengths=[],this.geodesicPathSegmentLengths=[],this.perimeterSegmentLengths=[],this.intersectingSegments=new Set,this.geodesicIntersectingSegments=new Set,this.areaCentroidWorldCoords=Object(w.e)(),this.areaCentroidRenderCoords=Object(w.e)(),this.geodesicAreaCentroidRenderCoords=Object(w.e)(),this._length=0,this._centroidRenderCoords=Object(w.e)(),this._planeWorldCoords=Object(L.e)(),this._worldUp=Object(w.e)(),this._worldTangent=Object(w.e)(),this._frame=[Object(w.e)(),Object(w.e)(),Object(w.e)()],this._pathVersion=-1,this._validMeasurement=!1,this._tempU=Object(w.e)(),this._tempV=Object(w.e)(),this._tempVec3=Object(w.e)(),this._tempSphere={center:Object(w.e)(),radius:0},this._sceneView=t,this.unitNormalizer=i}return Object(r.a)(e,[{key:"update",value:function(e,t,i,n){var r=this.unitNormalizer,a=this._sceneView.renderSpatialReference,s=this.unitNormalizer.spatialReference;if(this._pathVersion!==e.version||this._validMeasurement!==i){this._pathVersion=e.version,this._validMeasurement=i;var o=e.numVertices;this._resize(o);var c=Object(v.g)(t.spatialReference),h=Object(m.b)(t.spatialReference,c)&&Object(m.a)(t.spatialReference),l=this.positionsGeographic,u=this.positionsWorldCoords,d=this.positionsRenderCoords,p=this.positionsSpherical;e.forEachVertexPosition((function(e,t){Object(m.u)(e,u[t],s),Object(m.u)(e,d[t],a),h&&(Object(m.v)(e,l[t]),Object(m.u)(e,p[t],c),Object(_.t)(p[t],p[t]))}));var g=this._updatePathLengths(i);if(this.pathLength=this._length>1?new b.a(r.normalizeDistance(g),"meters"):null,h){var f=this._updateGeodesicPathLengths(i,s);this.geodesicPathLength=this._length>1?new b.a(f,"meters"):null}else this.geodesicPathLength=null;if(!i)return this.area=null,this.geodesicArea=null,this.perimeterLength=null,this.triangleIndices=null,this.geodesicTriangleIndices=null,this.intersectingSegments.clear(),void this.geodesicIntersectingSegments.clear();this._updateArea(t,r,a,s,n),h&&this._updateGeodesicArea(t)}}},{key:"getData",value:function(){return{positionsWorldCoords:this.positionsWorldCoords,positionsRenderCoords:this.positionsRenderCoords,positionsProjectedWorldCoords:this.positionsProjectedWorldCoords,positionsFittedRenderCoords:this.positionsFittedRenderCoords,positionsGeographic:this.positionsGeographic,positionsSpherical:this.positionsSpherical,positionsStereographic:this.positionsStereographic,pathSegmentLengths:this.pathSegmentLengths,geodesicPathSegmentLengths:this.geodesicPathSegmentLengths,perimeterSegmentLengths:this.perimeterSegmentLengths,intersectingSegments:this.intersectingSegments,geodesicIntersectingSegments:this.geodesicIntersectingSegments,triangleIndices:this.triangleIndices,geodesicTriangleIndices:this.geodesicTriangleIndices,areaCentroidWorldCoords:this.areaCentroidWorldCoords,areaCentroidRenderCoords:this.areaCentroidRenderCoords,geodesicAreaCentroidRenderCoords:this.geodesicAreaCentroidRenderCoords,fittingMode:this.fittingMode,area:this.area,geodesicArea:this.geodesicArea,pathLength:this.pathLength,geodesicPathLength:this.geodesicPathLength,perimeterLength:this.perimeterLength,unitNormalizer:this.unitNormalizer}}},{key:"_resize",value:function(e){for(e<this._length&&(this.positionsWorldCoords.length=e,this.positionsRenderCoords.length=e,this.positionsProjectedWorldCoords.length=e,this.positionsFittedRenderCoords.length=e,this.positionsGeographic.length=e,this.positionsSpherical.length=e,this.positionsStereographic.length=e,this.pathSegmentLengths.length=e,this.geodesicPathSegmentLengths.length=e,this.perimeterSegmentLengths.length=e,this._length=e);this._length<e;)this.positionsWorldCoords.push(Object(w.e)()),this.positionsRenderCoords.push(Object(w.e)()),this.positionsProjectedWorldCoords.push(Object(O.b)()),this.positionsFittedRenderCoords.push(Object(w.e)()),this.positionsGeographic.push(Object(w.e)()),this.positionsSpherical.push(Object(w.e)()),this.positionsStereographic.push(Object(O.b)()),this.pathSegmentLengths.push(0),this.geodesicPathSegmentLengths.push(0),this.perimeterSegmentLengths.push(0),++this._length}},{key:"_updatePathLengths",value:function(e){for(var t=this.positionsWorldCoords,i=this.pathSegmentLengths,n=0,r=0;r<this._length;++r){var a=i[r]=Object(_.o)(t[r],t[(r+1)%this._length]);(r<this._length-1||e)&&(n+=a)}return n}},{key:"_updateGeodesicPathLengths",value:function(e,t){for(var i=this.positionsGeographic,n=this.geodesicPathSegmentLengths,r=0,a=0;a<this._length;++a){var s=n[a]=M(i[a],i[(a+1)%this._length],t);(a<this._length-1||e)&&(r+=s)}return r}},{key:"_updateArea",value:function(e,t,i,n,r){var a=e.renderCoordsHelper,s=this.positionsWorldCoords,o=this.positionsRenderCoords,c=this.positionsProjectedWorldCoords,h=this.positionsFittedRenderCoords,l=this._planeWorldCoords,u=this._centroidRenderCoords;Object(I.a)(o,u),a.worldUpAtPosition(u,this._worldUp),a.worldBasisAtPosition(u,0,this._worldTangent),Object(m.r)(u,this._worldUp,i,this._worldUp,n),Object(m.r)(u,this._worldTangent,i,this._worldTangent,n),s.length>2&&function(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");Object(x.j)(e[0],e[1],e[2],t)}(s,l),this.fittingMode=this._selectFittingMode(l,s,this._worldUp,r);var d=0;if("horizontal"===this.fittingMode){var p=-1/0;o.forEach((function(e,t){var i=a.getAltitude(o[t]);i>p&&(p=i,d=t)}))}var g=s[d],v=l,f=this._worldTangent;"horizontal"===this.fittingMode?v=this._worldUp:"vertical"===this.fittingMode&&(v=this._tempVec3,f=this._worldUp,Object(x.g)(l,this._worldUp,v)),Object(_.m)(this._frame[2],v),Object(x.g)(f,v,this._frame[0]),Object(_.i)(this._frame[1],this._frame[0],this._frame[2]),Object(_.u)(this._frame[1],this._frame[1]);for(var y=this._tempVec3,O=this._tempU,w=this._tempV,L=0;L<this._length;++L){var k=c[L],S=h[L];Object(_.l)(y,s[L],g),Object(j.r)(k,Object(_.j)(this._frame[0],y),Object(_.j)(this._frame[1],y)),Object(_.g)(O,this._frame[0],k[0]),Object(_.g)(w,this._frame[1],k[1]),Object(_.h)(y,O,w),Object(_.h)(y,y,g),Object(m.z)(y,n,S,i)}this.perimeterLength=this._length>0?new b.a(t.normalizeDistance(this._updatePerimeterLengths()),"meters"):null,Object(I.a)(h,this.areaCentroidRenderCoords),Object(m.z)(this.areaCentroidRenderCoords,i,this.areaCentroidWorldCoords,n),this._updateIntersectingSegments(),this.area=0===this.intersectingSegments.size?new b.a(t.normalizeArea(this._computeArea()),"square-meters"):null}},{key:"_updateGeodesicArea",value:function(e){var t=e.renderCoordsHelper,i=this.positionsSpherical,n=this.positionsStereographic,r=this._tempVec3,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=1e-6,r=function(e,t){if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(var i=0;i<e.length;++i)if(Object(_.j)(t,e[i])<-n)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&Object(_.m)(t,e[0]),!0;Object(_.y)(T,0,0,0);for(var a=0;a<e.length;++a)Object(_.h)(T,T,e[a]);if(Object(_.t)(T,T),r(e,T))return t&&Object(_.m)(t,T),!0;if(!i)return!1;for(var s=0;s<e.length;++s)for(var o=0;o<e.length;++o)if(s!==o&&(Object(_.i)(T,e[s],e[o]),Object(_.t)(T,T),r(e,T)))return t&&Object(_.m)(t,T),!0;return!1}(i,r);if(a){var s=this._tempU,o=this._tempV;Object(x.n)(r,s,o);for(var c=0;c<this._length;++c){var h=Object(_.j)(i[c],s),l=Object(_.j)(i[c],o),u=Object(_.j)(i[c],r);Object(j.r)(n[c],h/u,l/u)}Object(_.g)(r,r,Object(v.e)(e.spatialReference).radius),t.toRenderCoords(r,Object(v.g)(e.spatialReference),this.geodesicAreaCentroidRenderCoords),this._updateGeodesicIntersectingSegments(),this.geodesicArea=a&&0===this.geodesicIntersectingSegments.size?new b.a(this._computeGeodesicArea(),"square-meters"):null}else this.geodesicArea=null}},{key:"_updatePerimeterLengths",value:function(){for(var e=this.positionsProjectedWorldCoords,t=this.perimeterSegmentLengths,i=0,n=0;n<this._length;++n)i+=t[n]=Object(j.d)(e[n],e[(n+1)%this._length]);return i}},{key:"_updateIntersectingSegments",value:function(){var e=this.positionsProjectedWorldCoords,t=this.intersectingSegments;t.clear();for(var i=0;i<this._length;++i)for(var n=i+2;n<this._length;++n)if((n+1)%this._length!==i){var r=e[i],a=e[(i+1)%this._length],s=e[n],o=e[(n+1)%this._length];Object(S.d)(r,a,s,o)&&(t.add(i),t.add(n))}}},{key:"_computeArea",value:function(){for(var e=this.positionsProjectedWorldCoords,t=U(e,2),i=this.triangleIndices=new Uint32Array(Object(y.a)(t,[],2)),n=0,r=0;r<i.length;r+=3)n+=A(e[i[r]],e[i[r+1]],e[i[r+2]]);return n}},{key:"_updateGeodesicIntersectingSegments",value:function(){var e=this.positionsStereographic,t=this.geodesicIntersectingSegments;t.clear();for(var i=0;i<this._length;++i)for(var n=i+2;n<this._length;++n)if((n+1)%this._length!==i){var r=e[i],a=e[(i+1)%this._length],s=e[n],o=e[(n+1)%this._length];Object(S.d)(r,a,s,o)&&(t.add(i),t.add(n))}}},{key:"_computeGeodesicArea",value:function(){for(var e=this.positionsGeographic,t=U(this.positionsStereographic,2),i=this.geodesicTriangleIndices=new Uint32Array(Object(y.a)(t,[],2)),n=0,r=0;r<i.length;r+=3)n+=z(e[i[r]],e[i[r+1]],e[i[r+2]],k.a.WGS84);return n}},{key:"_selectFittingMode",value:function(e,t,i,n){var r=t.map((function(t){return Math.abs(function(e,t){return Object(_.j)(e,t)+e[3]}(e,t))})).reduce((function(e,t){return Math.max(e,t)}),0);!function(e,t){var i=t.center;Object(_.y)(i,0,0,0);for(var n=0;n<e.length;++n)Object(_.h)(i,i,e[n]);Object(_.g)(i,i,1/e.length);for(var r=0,a=0;a<e.length;++a)r=Math.max(r,Object(_.n)(i,e[a]));t.radius=Math.sqrt(r)}(t,this._tempSphere);var a=r/(2*this._tempSphere.radius),s=a<n.maxRelativeErrorCoplanar,o=a<n.maxRelativeErrorAlmostCoplanar,c="horizontal";return s?c="oblique":o&&(c=Math.abs(Object(_.j)(i,e))>Math.cos(Object(f.g)(n.verticalAngleThreshold))?"horizontal":"vertical"),c}}]),e}();function U(e,t){for(var i=new Float64Array(e.length*t),n=0;n<e.length;++n)for(var r=e[n],a=0;a<t;++a)i[n*t+a]=r[a];return i}var W=i(879),F=function(e){Object(a.a)(i,e);var t=Object(s.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e))._handles=new g.a,r}return Object(r.a)(i,[{key:"initialize",value:function(){var e=this,t=this.view.spatialReference,i=Object(v.g)(t),n=i===v.a?v.d:i,r=!t||Object(m.b)(t,n)?n:t,a=new W.a(r);this._measurementDataManager=new q(this.view,a),this._handles.add(this.layerViewData.path.on("change",(function(){return e._update()}))),this._update()}},{key:"destroy",value:function(){this._handles=Object(c.e)(this._handles)}},{key:"_update",value:function(){var e=this.layerViewData;this._measurementDataManager.update(e.path,this.view,e.validMeasurement,{maxRelativeErrorCoplanar:.005,maxRelativeErrorAlmostCoplanar:.01,verticalAngleThreshold:80});var t=this._measurementDataManager.getData();this._set("measurementData",t),e.measurementData=t}}]),i}(p.a);Object(o.a)([Object(h.b)({constructOnly:!0})],F.prototype,"view",void 0),Object(o.a)([Object(h.b)({constructOnly:!0})],F.prototype,"analysis",void 0),Object(o.a)([Object(h.b)({readOnly:!0})],F.prototype,"measurementData",void 0),Object(o.a)([Object(h.b)({constructOnly:!0})],F.prototype,"layerViewData",void 0),F=Object(o.a)([Object(l.a)("esri.views.3d.layers.analysis.AreaMeasurement.AreaMeasurementController")],F);i(126);var H=i(82),Z=i(35),B=i(54),N=i(56),X=i(59),Y=Object(O.b)(),J=function(){function e(t,i){Object(n.a)(this,e),this.spatialReference=t,this.viewingMode=i,this._unnormalizationInfo=te(t,i)}return Object(r.a)(e,[{key:"tag",value:function(e){return e}},{key:"createNew",value:function(){return this.tag(Object(O.b)())}},{key:"fromPoint",value:function(e){return this.tag(Object(O.f)(e.x,e.y))}},{key:"fromArray",value:function(e){return this.tag(Object(O.f)(e[0],e[1]))}},{key:"toArray",value:function(e){return[e[0],e[1]]}},{key:"clone",value:function(e){return this.tag(Object(O.e)(e))}},{key:"copy",value:function(e,t){return Object(j.c)(t,e)}},{key:"toPoint",value:function(e,t){return t.x=e[0],t.y=e[1],t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}},{key:"createPoint",value:function(e){return new N.a({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}},{key:"createPointFromArray",value:function(e){return new N.a({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})}},{key:"createDehydratedPoint",value:function(e){return{x:e[0],y:e[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:"point"}}},{key:"lerp",value:function(e,t,i,n){return Object(j.m)(n,e,t,i)}},{key:"addDelta",value:function(e,t,i){e[0]+=t,e[1]+=i}},{key:"scale",value:function(e,t,i,n){var r=Object(j.a)(Y,e,t),a=Object(j.b)(Y,i,Object(j.h)(i,r));Object(j.p)(e,e,a,n-1)}},{key:"rotate",value:function(e,t,i){Object(j.q)(e,e,t,i)}},{key:"pointToArray",value:function(e){return[e.x,e.y]}},{key:"getZ",value:function(e,t){return t}},{key:"hasZ",value:function(){return!1}},{key:"getM",value:function(e,t){return t}},{key:"hasM",value:function(){return!1}},{key:"unnormalize",value:function(e){ee(e,this._unnormalizationInfo)}},{key:"fromXYZ",value:function(e){return this.tag(Object(O.f)(e[0],e[1]))}},{key:"toXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(w.g)(e[0],e[1],t)}},{key:"distance",value:function(e,t){return Object(j.d)(e,t)}}]),e}(),K=function(){function e(t,i,r){Object(n.a)(this,e),this.valueType=t,this.spatialReference=i,this._unnormalizationInfo=te(i,r)}return Object(r.a)(e,[{key:"distance",value:function(e,t){return 0===this.valueType?Object(_.o)(e,t):Object(j.d)(e,t)}},{key:"tag",value:function(e){return e}},{key:"createNew",value:function(){return this.tag(Object(w.e)())}},{key:"fromPoint",value:function(e){return this.tag(Object(w.g)(e.x,e.y,0===this.valueType?e.z:e.m))}},{key:"fromArray",value:function(e){return this.tag(Object(w.g)(e[0],e[1],e[2]||0))}},{key:"toArray",value:function(e){return[e[0],e[1],e[2]]}},{key:"clone",value:function(e){return this.tag(Object(w.f)(e))}},{key:"copy",value:function(e,t){return Object(_.m)(t,e)}},{key:"toPoint",value:function(e,t){return t.x=e[0],t.y=e[1],0===this.valueType?(t.z=e[2],t.hasZ=!0,t.hasM=!1):(t.m=e[2],t.hasZ=!1,t.hasM=!0),t.spatialReference=this.spatialReference,t}},{key:"createPoint",value:function(e){return new N.a({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}},{key:"createPointFromArray",value:function(e){return new N.a({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})}},{key:"createDehydratedPoint",value:function(e){var t=0===this.valueType,i=1===this.valueType;return{x:e[0],y:e[1],z:t?e[2]:void 0,m:i?e[2]:void 0,hasZ:t,hasM:i,spatialReference:this.spatialReference,type:"point"}}},{key:"lerp",value:function(e,t,i,n){return Object(_.k)(n,e,t,i)}},{key:"addDelta",value:function(e,t,i,n){e[0]+=t,e[1]+=i,0===this.valueType&&(e[2]+=n)}},{key:"scale",value:function(e,t,i,n){var r=Object(j.a)(Y,e,t),a=Object(j.b)(Y,i,Object(j.h)(i,r));Object(j.p)(e,e,a,n-1)}},{key:"rotate",value:function(e,t,i){Object(j.q)(e,e,t,i)}},{key:"pointToArray",value:function(e){return 0===this.valueType?[e.x,e.y,e.z]:[e.x,e.y,e.m]}},{key:"getZ",value:function(e,t){return 0===this.valueType?e[2]:t}},{key:"hasZ",value:function(){return 0===this.valueType}},{key:"getM",value:function(e,t){return 1===this.valueType?e[2]:t}},{key:"hasM",value:function(){return 1===this.valueType}},{key:"unnormalize",value:function(e){ee(e,this._unnormalizationInfo)}},{key:"fromXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.tag(Object(w.g)(e[0],e[1],0===this.valueType?e.length>2?e[2]:t:i))}},{key:"toXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.tag(Object(w.g)(e[0],e[1],0===this.valueType?e[2]:t))}}]),e}(),Q=function(){function e(t,i){Object(n.a)(this,e),this.spatialReference=t,this._unnormalizationInfo=te(t,i)}return Object(r.a)(e,[{key:"distance",value:function(e,t){return Object(_.o)(e,t)}},{key:"tag",value:function(e){return e}},{key:"createNew",value:function(){return this.tag(Object(L.e)())}},{key:"fromPoint",value:function(e){return this.tag(Object(L.g)(e.x,e.y,e.z,e.m))}},{key:"fromArray",value:function(e){return this.tag(Object(L.g)(e[0],e[1],e[2]||0,e[3]||0))}},{key:"toArray",value:function(e){return[e[0],e[1],e[2],e[3]]}},{key:"clone",value:function(e){return this.tag(Object(L.d)(e))}},{key:"copy",value:function(e,t){return Object(B.c)(t,e)}},{key:"toPoint",value:function(e,t){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}},{key:"createPoint",value:function(e){return new N.a({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}},{key:"createPointFromArray",value:function(e){return new N.a({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})}},{key:"createDehydratedPoint",value:function(e){return{x:e[0],y:e[1],z:e[2],m:e[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:"point"}}},{key:"lerp",value:function(e,t,i,n){return Object(B.j)(n,e,t,i)}},{key:"addDelta",value:function(e,t,i,n){e[0]+=t,e[1]+=i,e[2]+=n}},{key:"scale",value:function(e,t,i,n){var r=Object(j.a)(Y,e,t),a=Object(j.b)(Y,i,Object(j.h)(i,r));Object(j.p)(e,e,a,n-1)}},{key:"rotate",value:function(e,t,i){Object(j.q)(e,e,t,i)}},{key:"pointToArray",value:function(e){return[e.x,e.y,e.z,e.m]}},{key:"getZ",value:function(e){return e[2]}},{key:"hasZ",value:function(){return!0}},{key:"getM",value:function(e){return e[3]}},{key:"hasM",value:function(){return!0}},{key:"unnormalize",value:function(e){ee(e,this._unnormalizationInfo)}},{key:"fromXYZ",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.tag(Object(L.g)(e[0],e[1],e.length>2?e[2]:t,i))}},{key:"toXYZ",value:function(e){return Object(w.g)(e[0],e[1],e[2])}}]),e}();function $(e,t,i,n){return e&&t?new Q(i,n):t?new K(1,i,n):e?new K(0,i,n):new J(i,n)}function ee(e,t){if(t.supported){var i=1/0,n=-1/0,r=t.upperBoundX-t.lowerBoundX;e.forEach((function(e){for(var a=e.pos[0];a<t.lowerBoundX;)a+=r;for(;a>t.upperBoundX;)a-=r;i=Math.min(i,a),n=Math.max(n,a),e.pos[0]=a}));var a=n-i;r-a<a&&e.forEach((function(e){e.pos[0]<0&&(e.pos[0]+=r)}))}}function te(e,t){var i=Object(X.d)(e);return"global"===t&&i?{supported:!0,lowerBoundX:i.valid[0],upperBoundX:i.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}var ie=i(13),ne=i(101),re=i(176),ae=function(){function e(t){Object(n.a)(this,e),this.left=null,this.right=null,this.type="vertex",this.index=null,this.component=t}return Object(r.a)(e,[{key:"pos",get:function(){return this._pos},set:function(e){this._pos=e,this.component.unnormalizeVertexPositions()}}]),e}(),se=function e(t,i,r){Object(n.a)(this,e),this.type="edge",this.component=t,this.left=i,this.right=r,i.right=this,r.left=this},oe=function(){function e(t){Object(n.a)(this,e),this.vertices=[],this.edges=[],this.data=t}return Object(r.a)(e,[{key:"unnormalizeVertexPositions",value:function(){this.vertices.length<=1||this.data.coordinateHelper.unnormalize(this.vertices)}},{key:"updateVertexIndex",value:function(e,t){if(0!==this.vertices.length){var i=this.vertices[0],n=null,r=e,a=t;do{(n=r).index=a++,r=n.right?n.right.right:null}while(null!=r&&r!==i);n.left&&n!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(n),this.vertices.length-1)}}},{key:"getFirstVertex",value:function(){return 0===this.vertices.length?null:this.vertices[0]}},{key:"getLastVertex",value:function(){return 0===this.vertices.length?null:this.vertices[this.vertices.length-1]}},{key:"isClosed",value:function(){return this.vertices.length>2&&null!==this.vertices[0].left}},{key:"swapVertices",value:function(e,t){var i=this.vertices[e];this.vertices[e]=this.vertices[t],this.vertices[t]=i}},{key:"iterateVertices",value:function(e){if(0!==this.vertices.length){var t=this.vertices[0],i=t;do{e(i,i.index),i=Object(c.j)(i.right)?i.right.right:null}while(i!==t&&null!=i)}}}]),e}(),ce=function(e){Object(a.a)(i,e);var t=Object(s.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this)).coordinateHelper=e,r.undoStack=[],r.redoStack=[],r.components=[],r}return Object(r.a)(i,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return 0!==t&&!Object(c.i)(this.lastOperation)&&this.lastOperation.accumulate(e)||(e.apply(),this.undoStack.push(e),this.redoStack=[]),e}},{key:"undo",value:function(){if(this.undoStack.length>0){var e=this.undoStack.pop();return e.undo(),this.redoStack.push(e),e}return null}},{key:"canUndo",get:function(){return this.undoStack.length>0}},{key:"lastOperation",get:function(){return this.undoStack.length>0?this.undoStack[this.undoStack.length-1]:null}},{key:"redo",value:function(){if(this.redoStack.length>0){var e=this.redoStack.pop();return e.apply(),this.undoStack.push(e),e}return null}},{key:"canRedo",get:function(){return this.redoStack.length>0}},{key:"toPoint",value:function(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.createPoint(this.components[0].vertices[0].pos)}},{key:"toPolyline",value:function(){var e=[],t=this.coordinateHelper.toArray;return this.components.forEach((function(i,n){var r=[],a=i.vertices.find((function(e){return null==e.left})),s=a;do{r.push(t(a.pos)),a=a.right?a.right.right:null}while(a&&a!==s);e.push(r)})),new re.a({paths:e,spatialReference:this.coordinateHelper.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}},{key:"toPolygon",value:function(){var e=[],t=this.coordinateHelper.toArray;return this.components.forEach((function(i,n){var r=[],a=i.vertices[0],s=a,o=s;do{r.push(t(s.pos)),s=Object(c.j)(s.right)?s.right.right:null}while(s&&s!==o);i.isClosed()&&r.push(t(a.pos)),e.push(r)})),new C.a({rings:e,spatialReference:this.coordinateHelper.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}}],[{key:"fromGeometry",value:function(e,t){var n=$(e.hasZ,e.hasM,e.spatialReference,t),r=new i(n);switch(e.type){case"polygon":for(var a=e.rings,s=0;s<a.length;++s){for(var o=a[s],c=new oe(r),h=o.length>2&&Object(ne.e)(o[0],o[o.length-1]),l=h?o.length-1:o.length,u=0;u<l;++u){var d=n.fromArray(o[u]),p=new ae(c);c.vertices.push(p),p.pos=d,p.index=u}for(var g=c.vertices.length-1,m=0;m<g;++m){var v=c.vertices[m],f=c.vertices[m+1],b=new se(c,v,f);c.edges.push(b)}if(h){var y=new se(c,c.vertices[c.vertices.length-1],c.vertices[0]);c.edges.push(y)}r.components.push(c)}break;case"polyline":var j,O=Object(ie.a)(e.paths);try{for(O.s();!(j=O.n()).done;){for(var _=j.value,w=new oe(r),L=_.length,k=0;k<L;++k){var S=n.fromArray(_[k]),P=new ae(w);w.vertices.push(P),P.pos=S,P.index=k}for(var C=w.vertices.length-1,V=0;V<C;++V){var x=w.vertices[V],M=w.vertices[V+1],A=new se(w,x,M);w.edges.push(A)}r.components.push(w)}}catch(G){O.e(G)}finally{O.f()}break;case"point":var z=new oe(r),R=new ae(z);R.index=0,R.pos=r.coordinateHelper.fromPoint(e),z.vertices.push(R),r.components.push(z)}return r}}]),i}(H.a),he=function(){function e(t,i,r){Object(n.a)(this,e),this.editGeometry=t,this.component=i,this.pos=r,this.addedVertex=null,this.originalEdge=null,this.left=null,this.right=null}return Object(r.a)(e,[{key:"apply",value:function(){var e="redo";Object(c.i)(this.addedVertex)&&(e="apply",this.addedVertex=new ae(this.component));var t=this.component.getLastVertex();if(Object(c.i)(t))this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{var i=null;t.right&&(this.originalEdge=t.right,i=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1)),this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,Object(c.i)(this.left)&&(this.left=new se(this.component,t,this.addedVertex)),this.component.edges.push(this.left),t.right=this.left,Object(c.j)(this.originalEdge)&&Object(c.j)(i)&&(Object(c.i)(this.right)&&(this.right=new se(this.component,this.addedVertex,i)),this.component.edges.push(this.right),i.left=this.right),this.component.updateVertexIndex(this.addedVertex,t.index+1)}var n={addedVertices:[this.addedVertex],operation:e};this.editGeometry.emit("change",n)}},{key:"undo",value:function(){if(Object(c.i)(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1),Object(c.j)(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null),Object(c.j)(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),1),this.right.right.left=null),Object(c.j)(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=this.originalEdge,this.originalEdge.right.left=this.originalEdge),Object(c.j)(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0);var e={removedVertices:[this.addedVertex],operation:"undo"};this.editGeometry.emit("change",e)}},{key:"accumulate",value:function(){return!1}}]),e}(),le=function(){function e(t,i,r){Object(n.a)(this,e),this.editGeometry=t,this.vertex=i,this.pos=r}return Object(r.a)(e,[{key:"apply",value:function(){var e=Object(c.i)(this.originalPosition);e&&(this.originalPosition=this.vertex.pos),this._apply(e?"apply":"redo")}},{key:"undo",value:function(){this.vertex.pos=Object(c.s)(this.originalPosition);var e={updatedVertices:[this.vertex],operation:"undo"};this.editGeometry.emit("change",e)}},{key:"accumulate",value:function(t){return t instanceof e&&t.vertex===this.vertex&&(this.pos=t.pos,this._apply("apply"),!0)}},{key:"_apply",value:function(e){this.vertex.pos=this.pos,this.editGeometry.components.forEach((function(e){return e.unnormalizeVertexPositions()}));var t={updatedVertices:[this.vertex],operation:e};this.editGeometry.emit("change",t)}}]),e}(),ue=function(){function e(t,i){Object(n.a)(this,e),this.editGeometry=t,this.component=i,this.createdEdge=null}return Object(r.a)(e,[{key:"apply",value:function(){var e="redo";if(Object(c.i)(this.createdEdge)){e="apply";var t=this.component.getFirstVertex(),i=this.component.getLastVertex();if(this.component.isClosed()||this.component.vertices.length<3||Object(c.i)(t)||Object(c.i)(i))return;this.createdEdge=new se(this.component,i,t)}this.createdEdge.left.right=this.createdEdge,this.createdEdge.right.left=this.createdEdge,this.component.edges.push(this.createdEdge);var n={operation:e};this.editGeometry.emit("change",n)}},{key:"undo",value:function(){if(!Object(c.i)(this.createdEdge)){this.component.edges.splice(this.component.edges.indexOf(this.createdEdge),1),this.createdEdge.left.right=null,this.createdEdge.right.left=null;this.editGeometry.emit("change",{operation:"undo"})}}},{key:"accumulate",value:function(){return!1}}]),e}(),de=function(e){Object(a.a)(i,e);var t=Object(s.a)(i);function i(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)(this,i),(e=t.call(this,r))._handles=new g.a,e._version=0,e._internalGeometryChange=!1,e}return Object(r.a)(i,[{key:"areaMeasurement",set:function(e){this._set("areaMeasurement",e),Object(c.j)(e)&&Object(c.j)(this.view)&&this._initialize(e,this.view)}},{key:"view",set:function(e){this._set("view",e),Object(c.j)(e)&&Object(c.j)(this.areaMeasurement)&&this._initialize(this.areaMeasurement,e)}},{key:"initialized",get:function(){return Object(c.j)(this.areaMeasurement)&&Object(c.j)(this.view)}},{key:"version",get:function(){return this._version}},{key:"isValidPolygon",get:function(){return this.initialized&&this._editGeometry.components.length>0&&this._editGeometry.components[0].isClosed()}},{key:"_initialize",value:function(e,t){var i=this;this._handles.removeAll(),this._handles.add(Object(Z.a)(e,"geometry",(function(){return i._updateEditGeometryFromModelGeometry(e,t)}),!0)),this._makeDirty(!0)}},{key:"_makeDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.notifyChange("isValidPolygon"),this.notifyChange("initialized"),e&&this.notifyChange("numVertices")}},{key:"_updateEditGeometryFromModelGeometry",value:function(e,t){var i=this;this._version++,this._internalGeometryChange||(this._handles.remove("EditGeometry"),this._editGeometry=Object(c.j)(e.geometry)?ce.fromGeometry(e.geometry,t.viewingMode):new ce($(!0,!1,t.spatialReference,t.viewingMode)),this._makeDirty(!0),this.emit("change",{type:"change"}),this._handles.add(this._editGeometry.on("change",(function(t){i._makeDirty(null!=t.addedVertices||null!=t.removedVertices),i._internalGeometryChange=!0,e.geometry=i.numVertices>0?i._editGeometry.toPolygon():null,i._internalGeometryChange=!1})),"EditGeometry"))}},{key:"vertices",get:function(){var e=[];return this.forEachVertex((function(t){e.push(t)})),e}},{key:"numVertices",get:function(){return this.initialized&&this._editGeometry.components.length>0?this._editGeometry.components[0].vertices.length:0}},{key:"lastPoint",get:function(){if(this.initialized&&this._editGeometry.components.length>0){var e=this._editGeometry.components[0].getLastVertex();if(Object(c.j)(e))return this._editGeometry.coordinateHelper.createPoint(e.pos)}return null}},{key:"getVertex",value:function(e){if(!this.initialized||0===this._editGeometry.components.length||0===this._editGeometry.components[0].vertices.length)return null;var t=this._editGeometry.components[0].vertices[0],i=t;do{if(i.index===e)return i;i=i.right.right}while(i!==t&&null!=i);return null}},{key:"getVertexPositionAsPoint",value:function(e){return this._editGeometry.coordinateHelper.createPoint(e.pos)}},{key:"getVertexPositionAsPointFromIndex",value:function(e){return this._editGeometry.coordinateHelper.createPoint(this.getVertex(e).pos)}},{key:"forEachVertex",value:function(e){this.initialized&&this._editGeometry.components.length>0&&this._editGeometry.components[0].iterateVertices(e)}},{key:"forEachVertexPosition",value:function(e){var t=this._editGeometry.coordinateHelper;this.forEachVertex((function(i,n){t.toPoint(i.pos,pe),e(pe,n)}))}},{key:"clear",value:function(){Object(c.j)(this.areaMeasurement)&&(this.areaMeasurement.geometry=null)}},{key:"add",value:function(e){if(!this.initialized)return null;0===this._editGeometry.components.length&&this._editGeometry.components.push(new oe(this._editGeometry));var t=new he(this._editGeometry,this._editGeometry.components[0],this._editGeometry.coordinateHelper.fromPoint(e));return this._editGeometry.apply(t),this.emit("change",{type:"change"}),t}},{key:"close",value:function(){if(!this.initialized)return null;if(0===this._editGeometry.components.length)return null;var e=this._editGeometry.components[0],t=new ue(this._editGeometry,e);return this._editGeometry.apply(t),this.emit("change",{type:"change"}),t}},{key:"ensureContains",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=!1;if(this._editGeometry.components.forEach((function(t){t.iterateVertices((function(t){t===e&&(i=!0)}))})),!i)throw new Error("vertex doesnt exist ".concat(t));return i}},{key:"setVertexPosition",value:function(e,t){if(!this.initialized)return null;var i=new le(this._editGeometry,e,this._editGeometry.coordinateHelper.fromPoint(t));return this._editGeometry.apply(i),this.emit("change",{type:"change"}),i}},{key:"equals",value:function(e){if(this.numVertices!==e.numVertices)return!1;var t=!0;return this.forEachVertexPosition((function(i,n){var r=e.getVertexPositionAsPointFromIndex(n);i.equals(r)||(t=!1)})),!!t}}]),i}(H.a.EventedAccessor);Object(o.a)([Object(h.b)({value:null})],de.prototype,"areaMeasurement",null),Object(o.a)([Object(h.b)({value:null})],de.prototype,"view",null),Object(o.a)([Object(h.b)()],de.prototype,"isValidPolygon",null),Object(o.a)([Object(h.b)()],de.prototype,"numVertices",null),de=Object(o.a)([Object(l.a)("esri.views.3d.interactive.graphics.AreaMeasurement3D.AreaMeasurement3DPathHelper")],de);var pe=new N.a,ge=function(e){Object(a.a)(i,e);var t=Object(s.a)(i);function i(){var e;return Object(n.a)(this,i),(e=t.apply(this,arguments)).measurementData=null,e.unitNormalizer=new W.a,e.path=new de,e.lastDraggedVertex=null,e}return Object(r.a)(i,[{key:"destroy",value:function(){this.measurementData=null,this.path=Object(c.e)(this.path)}},{key:"validMeasurement",get:function(){return this.path.isValidPolygon}}]),i}(p.a);Object(o.a)([Object(h.b)()],ge.prototype,"measurementData",void 0),Object(o.a)([Object(h.b)()],ge.prototype,"validMeasurement",null),Object(o.a)([Object(h.b)()],ge.prototype,"unitNormalizer",void 0),Object(o.a)([Object(h.b)()],ge.prototype,"path",void 0),Object(o.a)([Object(h.b)()],ge.prototype,"lastDraggedVertex",void 0),Object(o.a)([Object(h.b)()],ge.prototype,"cursorPoint",void 0),ge=Object(o.a)([Object(l.a)("esri.views.3d.layers.analysis.AreaMeasurement3D.AreaMeasurementLayerViewData")],ge);var me,ve,fe=i(8),be=i.n(fe),ye=i(16),je=i(14),Oe=(i(343),i(937)),_e=i(69),we=i(300),Le=i(26),ke=i(31);(ve=me||(me={})).boundingSphere=function(e,t){var i=t.center;Object(_.y)(i,0,0,0);for(var n=0;n<e.length;++n)Object(_.h)(i,i,e[n]);Object(_.g)(i,i,1/e.length);for(var r=0,a=0;a<e.length;++a)r=Math.max(r,Object(_.n)(i,e[a]));t.radius=Math.sqrt(r)},ve.bestFitPlane=function(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");Object(x.j)(e[0],e[1],e[2],t)},ve.planePointDistance=function(e,t){return Object(_.j)(e,t)+e[3]},ve.segmentLengthEuclidean=function(e,t,i){return Object(m.u)(e,Se,i)&&Object(m.u)(t,Pe,i)?Object(_.o)(Se,Pe):0},ve.segmentLengthGeodesic=function(e,t){if(!Object(m.v)(e,Se)||!Object(m.v)(t,Pe))return 0;var i={distance:null};return Object(V.b)(i,[Se[0],Se[1]],[Pe[0],Pe[1]]),i.distance},ve.segmentLengthGeodesicVector=function(e,t,i){var n={distance:null};return Object(V.b)(n,[e[0],e[1]],[t[0],t[1]],i),n.distance},ve.triangleAreaEuclidean=function(e,t,i){var n=t[0]-e[0],r=t[1]-e[1],a=i[0]-e[0],s=i[1]-e[1];return.5*Math.abs(n*s-r*a)},ve.triangleAreaGeodesic=function(e,t,i,n){var r=Ve;return Object(m.A)(e,n,Se)&&Object(m.A)(t,n,Pe)&&Object(m.A)(i,n,Ce)?(r.setPoint(0,0,Se),r.setPoint(0,1,Pe),r.setPoint(0,2,Ce),Math.abs(Object(P.geodesicArea)(r,"square-meters"))):0},ve.tangentFrame=function(e,t,i){Math.abs(e[0])>Math.abs(e[1])?Object(_.y)(t,0,1,0):Object(_.y)(t,1,0,0),Object(_.i)(i,e,t),Object(_.t)(t,t),Object(_.i)(t,i,e),Object(_.t)(i,i)},ve.fitHemisphere=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=1e-6,r=function(e,t){if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(var i=0;i<e.length;++i)if(Object(_.j)(t,e[i])<-n)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&Object(_.m)(t,e[0]),!0;Object(_.y)(xe,0,0,0);for(var a=0;a<e.length;++a)Object(_.h)(xe,xe,e[a]);if(Object(_.t)(xe,xe),r(e,xe))return t&&Object(_.m)(t,xe),!0;if(!i)return!1;for(var s=0;s<e.length;++s)for(var o=0;o<e.length;++o)if(s!==o&&(Object(_.i)(xe,e[s],e[o]),Object(_.t)(xe,xe),r(e,xe)))return t&&Object(_.m)(t,xe),!0;return!1},ve.compareSets=function(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(var i=0;i<e.size;++i)if(!t.has(e[i]))return!1;return!0};var Se=Object(w.e)(),Pe=Object(w.e)(),Ce=Object(w.e)(),Ve=new C.a({rings:[[Se,Pe,Ce]],spatialReference:k.a.WGS84}),xe=Object(w.e)(),Me=me,Ae=i(938),ze=i(965),Re=i(787),Ge=i(752),De=i(115),Ee=i(195),Te=i(116),Ie=i(246),qe=i(102),Ue=i(112),We=i(106),Fe=i(91),He=i(95),Ze=i(24),Be=i(77),Ne=i(89),Xe=i(88),Ye=i(881),Je=i(41),Ke=function(e){Object(a.a)(i,e);var t=Object(s.a)(i);function i(){return Object(n.a)(this,i),t.apply(this,arguments)}return Object(r.a)(i,[{key:"initializeProgram",value:function(e){var t=i.shader.get(),n=this.configuration,r=t.build({OITEnabled:0===n.transparencyPassType,multipassTerrainEnabled:n.multipassTerrainEnabled,cullAboveGround:n.cullAboveGround});return new Xe.a(e.rctx,r,Be.a)}},{key:"bindPass",value:function(e,t){Object(We.c)(this.program,t.camera.projectionMatrix),this.program.setUniform2fv("size",e.size),this.program.setUniform4fv("color1",e.color1),this.program.setUniform4fv("color2",e.color2),t.multipassTerrainEnabled&&(this.program.setUniform2fv("cameraNearFar",t.camera.nearFar),this.program.setUniform2fv("inverseViewport",t.inverseViewport),Object(Ue.a)(this.program,t))}},{key:"bindDraw",value:function(e){Object(We.d)(this.program,e)}},{key:"setPipelineState",value:function(e){var t=this.configuration,i=3===e,n=2===e;return Object(Je.g)({blending:t.transparent?i?$e:Object(Ne.a)(e):null,depthTest:{func:Object(Ne.b)(e)},depthWrite:i?t.writeDepth&&Je.e:Object(Ne.c)(e),colorWrite:Je.d,polygonOffset:i||n?t.polygonOffset&&Qe:{factor:-1,units:-25}})}},{key:"initializePipeline",value:function(){return this.setPipelineState(this.configuration.transparencyPassType)}}]),i}(He.a);Ke.shader=new Fe.a(Ye.a,(function(){return i.e(194).then(i.bind(null,1159))}));var Qe={factor:0,units:-25},$e=Object(Je.h)(770,1,771,771),et=function(e){Object(a.a)(i,e);var t=Object(s.a)(i);function i(){var e;return Object(n.a)(this,i),(e=t.apply(this,arguments)).transparent=!1,e.writeDepth=!0,e.polygonOffset=!1,e.transparencyPassType=3,e.multipassTerrainEnabled=!1,e.cullAboveGround=!1,e}return i}(Ze.a);Object(o.a)([Object(Ze.b)()],et.prototype,"transparent",void 0),Object(o.a)([Object(Ze.b)()],et.prototype,"writeDepth",void 0),Object(o.a)([Object(Ze.b)()],et.prototype,"polygonOffset",void 0),Object(o.a)([Object(Ze.b)({count:4})],et.prototype,"transparencyPassType",void 0),Object(o.a)([Object(Ze.b)()],et.prototype,"multipassTerrainEnabled",void 0),Object(o.a)([Object(Ze.b)()],et.prototype,"cullAboveGround",void 0);var tt=function(e){Object(a.a)(i,e);var t=Object(s.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e,nt)).techniqueConfig=new et,r}return Object(r.a)(i,[{key:"dispose",value:function(){}},{key:"getPassParameters",value:function(){return this.params}},{key:"getTechniqueConfig",value:function(e){return this.techniqueConfig.transparent=this.params.transparent,this.techniqueConfig.writeDepth=this.params.writeDepth,this.techniqueConfig.polygonOffset=this.params.polygonOffset,this.techniqueConfig.transparencyPassType=e?e.transparencyPassType:3,this.techniqueConfig.multipassTerrainEnabled=!!e&&e.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=!!e&&e.cullAboveGround,this.techniqueConfig}},{key:"intersect",value:function(e,t,i,n,r,a,s){return Object(qe.i)(e,t,n,r,a,void 0,s)}},{key:"getGLMaterial",value:function(e){return 0===e.output||7===e.output?new it(e):void 0}},{key:"createBufferWriter",value:function(){return new Ie.a(Ie.d)}}]),i}(Te.a),it=function(e){Object(a.a)(i,e);var t=Object(s.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e)).updateParameters(),r}return Object(r.a)(i,[{key:"updateParameters",value:function(e){this._technique=this._techniqueRep.releaseAndAcquire(Ke,this._material.getTechniqueConfig(e),this._technique)}},{key:"beginSlot",value:function(e){var t=3;return this._technique.configuration.transparent&&(t=this._technique.configuration.writeDepth?5:8),e===t}},{key:"ensureParameters",value:function(e){this.updateParameters(e)}},{key:"bind",value:function(e){this._technique.bindPass(this._material.getPassParameters(),e)}}]),i}(Ee.a),nt=Object(je.a)({size:[1,1],color1:[.75,.75,.75,1],color2:[.5,.5,.5,1],transparent:!1,writeDepth:!0,polygonOffset:!1},Te.b),rt=function(e){Object(a.a)(i,e);var t=Object(s.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e))._checkerBoardMaterial=null,r._renderOccluded=4,r._geometry=null,r._size=[1,1],r._color1=[1,.5,0,.5],r._color2=[1,1,1,.5],r.applyProps(e),r}return Object(r.a)(i,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(e){e!==this._renderOccluded&&(this._renderOccluded=e,this.updateMaterial())}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.geometryChanged()}},{key:"size",get:function(){return this._size},set:function(e){this._size=e,this.updateMaterial()}},{key:"color1",get:function(){return this._color1},set:function(e){this._color1=e,this.updateMaterial()}},{key:"color2",get:function(){return this._color2},set:function(e){this._color2=e,this.updateMaterial()}},{key:"updateMaterial",value:function(){Object(c.j)(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameterValues({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded})}},{key:"createExternalResources",value:function(){this._checkerBoardMaterial=new tt({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:4})}},{key:"destroyExternalResources",value:function(){this._checkerBoardMaterial=null}},{key:"forEachExternalMaterial",value:function(e){Object(c.j)(this._checkerBoardMaterial)&&e(this._checkerBoardMaterial)}},{key:"createGeometries",value:function(e){if(!Object(c.i)(this._geometry)&&!Object(c.i)(this._checkerBoardMaterial)){var t=at;Object(Le.u)(t,this.transform);var i=this._geometry,n=[],r=Object(w.e)();i.position.forEach((function(e){Object(_.l)(r,e,t),n.push(r[0],r[1],r[2])}));var a=[];i.uv.forEach((function(e){a.push(e[0],e[1])}));var s=new De.a([["position",{size:3,data:n,exclusive:!0}],["uv0",{size:2,data:a,exclusive:!0}]],[["position",i.triangleIndices],["uv0",i.triangleIndices]]);e.addGeometry(s,this._checkerBoardMaterial)}}},{key:"geometryChanged",value:function(){this.recreateGeometry()}}]),i}(Ge.a),at=Object(w.e)(),st=i(939),ot=i(464),ct=i(138),ht=i(242),lt=function(e){Object(a.a)(i,e);var t=Object(s.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e))._handles=new g.a,r._params=Object(je.a)({},ut),r._path=null,r._intersectedPath=null,r._perimeter=null,r._intersectedPerimeter=null,r._projectionLines=null,r._measurementArea=null,r._areaLabel=null,r._pathLengthLabel=null,r._cursorSegmentLengthLabel=null,r._perimeterLengthLabel=null,r._pathSegments=[],r._perimeterSegments=[],r._cursorSegment=null,r._origin=Object(w.e)(),r._originTransform=Object(ke.d)(),r._cursorPositionRenderSpace=Object(w.e)(),r.messages=null,r.viewData=dt,r.areaLabel=null,r.perimeterLengthLabel=null,r.mode="auto",r.geodesicMeasurementDistanceThreshold=1e5,r}return Object(r.a)(i,[{key:"visible",get:function(){return this.layerView.visible&&!this.layerView.suspended}},{key:"testData",get:function(){return{labels:{area:this._areaLabel,pathLength:this._pathLengthLabel,cursorSegmentLength:this._cursorSegmentLengthLabel,perimeterLength:this._perimeterLengthLabel}}}},{key:"initialize",value:function(){var e=this,t=this.view;this._path=new Re.a({view:t,attached:!0,width:this._params.pathLineWidth,color:this._params.pathLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPath=new Re.a({view:t,attached:!0,width:this._params.pathLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._perimeter=new Re.a({view:t,attached:!0,width:this._params.perimeterLineWidth,color:this._params.perimeterLineColor,polygonOffset:!0,renderOccluded:4}),this._intersectedPerimeter=new Re.a({view:t,attached:!0,width:this._params.perimeterLineWidth,color:this._params.intersectingLineColor,polygonOffset:!0,renderOccluded:4}),this._projectionLines=new Re.a({view:t,attached:!0,width:this._params.projectionLineWidth,color:this._params.projectionLineColor,stipplePattern:Object(ot.b)(this._params.projectionLineStippleSize),stippleIntegerRepeats:!1,polygonOffset:!0,renderOccluded:4}),this._measurementArea=new rt({view:t,attached:!0,color1:this._params.areaColor1,color2:this._params.areaColor2}),this._areaLabel=new ze.a({view:this.view,attached:!0,fontSize:16}),this._pathLengthLabel=new ze.a({view:t,attached:!0,fontSize:12}),this._cursorSegmentLengthLabel=new ze.a({view:t,attached:!0,fontSize:12}),this._perimeterLengthLabel=new ze.a({view:t,attached:!0,fontSize:12});var i=this.layerView,n=i.layerViewData;this._handles.add([Object(we.d)((function(){return[e.mode,e.visible,i.unit,n.measurementData,n.cursorPoint]}),(function(){return e._update()})),Object(we.d)((function(){var e;return null==(e=t.state)?void 0:e.camera}),(function(){return e._updateLabels()})),Object(ct.c)(Object(ye.a)(be.a.mark((function t(){return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._updateMessageBundle());case 1:case"end":return t.stop()}}),t)}))))]),this._updateMessageBundle()}},{key:"destroy",value:function(){this._measurementArea.destroy(),this._measurementArea=null,this._path.destroy(),this._path=null,this._intersectedPath.destroy(),this._intersectedPath=null,this._perimeter.destroy(),this._perimeter=null,this._intersectedPerimeter.destroy(),this._intersectedPerimeter=null,this._areaLabel.destroy(),this._areaLabel=null,this._pathLengthLabel.destroy(),this._pathLengthLabel=null,this._cursorSegmentLengthLabel.destroy(),this._cursorSegmentLengthLabel=null,this._perimeterLengthLabel.destroy(),this._perimeterLengthLabel=null,this.set("view",null)}},{key:"whenMessages",value:function(){var e=Object(ye.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.j)(this,"messages");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_update",value:function(){if(!this.destroyed){var e=this.layerView.layerViewData.measurementData;Object(c.i)(e)||(this._updateViewData(e,this.layerView.layerViewData.path,this.layerView.layerViewData.cursorPoint),this._updateOrigin(),this._updatePathSegments(),this._updatePerimeterSegments(),this._updateArea(),this._updateProjectionLines(),this._updateLabels())}}},{key:"_updateViewData",value:function(e,t,i){var n,r=t.isValidPolygon,a=t.lastPoint,s=Object(c.j)(a)&&Object(c.j)(i)?new b.a(Me.segmentLengthGeodesic(a,i),"meters"):null,o=Object(c.j)(a)&&Object(c.j)(i)?new b.a(e.unitNormalizer.normalizeDistance(Me.segmentLengthEuclidean(a,i,e.unitNormalizer.spatialReference)),"meters"):null;"auto"===this.mode?(n="euclidean",(e.geodesicPathLength?e.geodesicPathLength.value:0)+(!r&&Object(c.j)(s)?s.value:0)>this.geodesicMeasurementDistanceThreshold&&(n="geodesic")):n=this.mode,null==e.geodesicPathLength&&(n="euclidean");var h="geodesic"===n,l=h?e.geodesicArea:e.area,u=1;if(l){var d=this._toPreferredAreaUnit(l,this.layerView.unit);u=Object(f.o)(Math.sqrt(d.value)/Math.sqrt(300)),u*=Math.sqrt(Object(_e.c)(1,d.unit,"square-meters")),u/=e.unitNormalizer.normalizeDistance(1)}var p={validMeasurement:r,path:t,pathVersion:t.version,cursorPoint:i,measurementData:e,mode:n,positionsGeographic:e.positionsGeographic,positionsRenderCoords:e.positionsRenderCoords,positionsProjected:e.positionsProjectedWorldCoords,positionsFittedRenderCoords:e.positionsFittedRenderCoords,intersectingSegments:h?e.geodesicIntersectingSegments:e.intersectingSegments,triangleIndices:h?e.geodesicTriangleIndices:e.triangleIndices,fittingMode:e.fittingMode,areaCentroid:h?e.geodesicAreaCentroidRenderCoords:e.areaCentroidRenderCoords,pathLengthLabelSegmentIndex:r?0:t.numVertices-2,perimeterLengthLabelSegmentIndex:0,checkerSize:u,geodesicCursorSegmentLength:s,cursorSegmentLength:o};this._set("viewData",p)}},{key:"_updateOrigin",value:function(){var e=this.viewData;Object(Ae.a)(e.positionsRenderCoords,this._origin),Object(Le.i)(this._originTransform),Object(Le.t)(this._originTransform,this._originTransform,this._origin),this._measurementArea.transform=this._originTransform,this._projectionLines.transform=this._originTransform}},{key:"_createSegments",value:function(e){for(var t=this.viewData,i=t.path,n=this.view.renderCoordsHelper.spatialReference,r=t.mode,a=[],s=[],o=[],c=t.validMeasurement?i.numVertices:i.numVertices-1,h=0;h<c;++h){var l=t[e][h],u=t[e][(h+1)%i.numVertices],d=null;switch(r){case"euclidean":d=new st.a(l,u);break;case"geodesic":d=new st.b(l,u,n)}t.intersectingSegments.has(h)?o.push(d):s.push(d),a.push(d)}return{all:a,nonIntersecting:s,intersecting:o}}},{key:"_updatePathSegments",value:function(){var e=this.visible,t=this.viewData,i=this._createSegments("positionsRenderCoords"),n=t.path,r=!n.isValidPolygon,a=t.cursorPoint,s=this.view.renderCoordsHelper,o=s.spatialReference,h=t.mode;if(this._cursorSegment=null,n.numVertices>0&&r&&Object(c.j)(a)&&s.toRenderCoords(a,this._cursorPositionRenderSpace)){var l=t.positionsRenderCoords[n.numVertices-1],u=this._cursorPositionRenderSpace,d=null;switch(h){case"euclidean":d=new st.a(l,u);break;case"geodesic":d=new st.b(l,u,o)}i.nonIntersecting.push(d),this._cursorSegment=d}this._path.setGeometryFromSegments(i.nonIntersecting,this._origin),this._path.visible=e,this._intersectedPath.setGeometryFromSegments(i.intersecting,this._origin),this._intersectedPath.visible=e,this._pathSegments=i.all}},{key:"_updatePerimeterSegments",value:function(){var e=this.visible&&"euclidean"===this.viewData.mode,t=this._createSegments("positionsFittedRenderCoords");this._perimeter.setGeometryFromSegments(t.nonIntersecting,this._origin),this._perimeter.visible=e,this._intersectedPerimeter.setGeometryFromSegments(t.intersecting,this._origin),this._intersectedPerimeter.visible=e,this._perimeterSegments=t.all}},{key:"_updateArea",value:function(){var e=this.viewData;switch(e.mode){case"euclidean":this._updateAreaEuclidean(e);break;case"geodesic":this._updateAreaGeodesic()}}},{key:"_updateAreaEuclidean",value:function(e){var t=this.visible;e.validMeasurement&&0===e.intersectingSegments.size&&e.triangleIndices?(this._measurementArea.geometry={uv:e.positionsProjected,position:e.positionsFittedRenderCoords,triangleIndices:e.triangleIndices},this._measurementArea.size=[e.checkerSize,e.checkerSize],this._measurementArea.visible=t):this._measurementArea.visible=!1}},{key:"_updateAreaGeodesic",value:function(){this._measurementArea.visible=!1}},{key:"_updateProjectionLines",value:function(){var e=this.viewData,t=this.visible,i=e.path,n=e.mode;if(i.numVertices>0&&e.validMeasurement&&"euclidean"===n){for(var r=[],a=0;a<i.numVertices;++a){var s=Object(w.e)();Object(_.l)(s,e.positionsRenderCoords[a],this._origin);var o=Object(w.e)();Object(_.l)(o,e.positionsFittedRenderCoords[a],this._origin),r.push([s,o])}this._projectionLines.geometry=r,this._projectionLines.visible=t}else this._projectionLines.geometry=null,this._projectionLines.visible=!1}},{key:"_updateLabels",value:function(){if(!this.destroyed){var e=this.viewData,t=e.path;if(t){var i=e.measurementData,n=e.mode,r=!t.isValidPolygon,a=this.visible,s=this._formatAreaLabel(this.messages,"geodesic"===n?i.geodesicArea:i.area,this.layerView.unit);Object(c.j)(s)?(this._areaLabel.geometry={type:"point",point:e.areaCentroid},this._areaLabel.text=s,this._areaLabel.visible=e.validMeasurement&&0===e.intersectingSegments.size&&a):this._areaLabel.visible=!1,this._set("areaLabel",Object(c.s)(s));var o=this._formatLengthLabel(this.messages,"geodesic"===n?i.geodesicPathLength:i.pathLength,this.layerView.unit);if(Object(c.j)(o)&&e.pathLengthLabelSegmentIndex>=0&&e.pathLengthLabelSegmentIndex<this._pathSegments.length){var h=this._pathSegments[e.pathLengthLabelSegmentIndex],l=Object(c.j)(this._cursorSegment)?this._cursorSegment:pt;this._pathLengthLabel.distance=this._params.labelDistance,this._pathLengthLabel.geometry={type:"corner",left:h,right:l},this._pathLengthLabel.text=o,this._pathLengthLabel.visible=r&&t.numVertices>0&&a}else this._pathLengthLabel.visible=!1;var u="geodesic"===n?e.geodesicCursorSegmentLength:e.cursorSegmentLength;if(Object(c.j)(u)){var d=this._formatLengthLabel(this.messages,u,this.layerView.unit);this._cursorSegmentLengthLabel.distance=this._params.labelDistance,this._cursorSegmentLengthLabel.geometry=Object(c.j)(this._cursorSegment)?{type:"segment",segment:this._cursorSegment,sampleLocation:"end"}:null,this._cursorSegmentLengthLabel.anchor="bottom",this._cursorSegmentLengthLabel.text=Object(c.s)(d),this._cursorSegmentLengthLabel.visible=r&&0!==u.value&&a}else this._cursorSegmentLengthLabel.visible=!1;this._cursorSegmentLengthLabel.overlaps(this._pathLengthLabel)&&(this._cursorSegmentLengthLabel.visible=!1),this._pathLengthLabel.overlaps(this._areaLabel)&&(this._pathLengthLabel.visible=!1);var p="geodesic"===e.mode,g=p?i.geodesicPathLength:i.perimeterLength,m=Object(c.s)(null!=g?this._formatLengthLabel(this.messages,g,this.layerView.unit):null);if(this._set("perimeterLengthLabel",Object(c.s)(m)),e.validMeasurement&&0===e.intersectingSegments.size){this._perimeterLengthLabel.distance=this._params.labelDistance,this._perimeterLengthLabel.anchor="top",this._perimeterLengthLabel.text=m,this._perimeterLengthLabel.visible=!0;for(var v=!0,f=0;f<e.path.numVertices;++f){var b=(e.perimeterLengthLabelSegmentIndex+f)%e.path.numVertices,y=p?this._pathSegments[b]:this._perimeterSegments[b];if(v=!0,this._perimeterLengthLabel.geometry={type:"segment",segment:y,sampleLocation:"center"},!this._perimeterLengthLabel.overlaps(this._areaLabel))break;v=!1}this._perimeterLengthLabel.visible=v&&a}else this._perimeterLengthLabel.visible=!1}}}},{key:"_toPreferredAreaUnit",value:function(e,t){return e.toUnit(this._preferredAreaUnit(e,t))}},{key:"_preferredAreaUnit",value:function(e,t){switch(t){case"metric":return Object(_e.r)(e.value,e.unit);case"imperial":return Object(_e.o)(e.value,e.unit);default:return t}}},{key:"_preferredLengthUnit",value:function(e,t){var i=this._deriveLengthUnitFromAreaUnit(t);switch(i){case"metric":return Object(_e.s)(e.value,e.unit);case"imperial":return Object(_e.p)(e.value,e.unit);default:return i}}},{key:"_deriveLengthUnitFromAreaUnit",value:function(e){switch(e){case"metric":return"metric";case"imperial":return"imperial";case"square-inches":return"inches";case"square-feet":return"feet";case"square-yards":return"yards";case"square-miles":return"miles";case"square-us-feet":return"us-feet";case"square-millimeters":return"millimeters";case"square-centimeters":return"centimeters";case"square-decimeters":return"decimeters";case"square-meters":return"meters";case"square-kilometers":return"kilometers";case"acres":return"imperial";case"ares":case"hectares":return"metric"}throw new Error("unhandled area unit")}},{key:"_formatAreaLabel",value:function(e,t,i){return e&&t&&Object(Oe.b)(e,t,this._preferredAreaUnit(t,i))}},{key:"_formatLengthLabel",value:function(e,t,i){return e&&t&&Object(Oe.b)(e,t,this._preferredLengthUnit(t,i))}},{key:"_updateMessageBundle",value:function(){var e=this;Object(ht.a)("esri/core/t9n/Units").then((function(t){e.messages=t,e.view&&e._update()}))}}]),i}(p.a);Object(o.a)([Object(h.b)()],lt.prototype,"view",void 0),Object(o.a)([Object(h.b)()],lt.prototype,"messages",void 0),Object(o.a)([Object(h.b)()],lt.prototype,"analysis",void 0),Object(o.a)([Object(h.b)()],lt.prototype,"viewData",void 0),Object(o.a)([Object(h.b)()],lt.prototype,"layerView",void 0),Object(o.a)([Object(h.b)({readOnly:!0})],lt.prototype,"areaLabel",void 0),Object(o.a)([Object(h.b)({readOnly:!0})],lt.prototype,"perimeterLengthLabel",void 0),Object(o.a)([Object(h.b)()],lt.prototype,"mode",void 0),Object(o.a)([Object(h.b)({readOnly:!0})],lt.prototype,"visible",null),Object(o.a)([Object(h.b)()],lt.prototype,"geodesicMeasurementDistanceThreshold",void 0),lt=Object(o.a)([Object(l.a)("esri.views.3d.layers.analysis.AreaMeasurement.AreaMeasurementView")],lt);var ut={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:1,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,handleRadiusHovered:10,handleRadiusMouse:10,handleRadiusTouch:25,pathLineColor:[1,.5,0,1],pathLineWidth:3,intersectingLineColor:[1,.2,0,1],perimeterLineColor:[1,.5,0,1],perimeterLineWidth:2,projectionLineColor:[1,.5,0,1],projectionLineWidth:2,projectionLineStippleSize:5,areaColor1:[1,.5,0,.5],areaColor2:[1,1,1,.5],fillColor:[1,.5,0,.5],lineSubdivisions:64,labelDistance:25},dt={validMeasurement:!1,path:null,pathVersion:-1,cursorPoint:null,measurementData:null,mode:null,positionsGeographic:null,positionsRenderCoords:null,positionsProjected:null,positionsFittedRenderCoords:null,intersectingSegments:null,triangleIndices:null,fittingMode:null,areaCentroid:null,pathLengthLabelSegmentIndex:null,perimeterLengthLabelSegmentIndex:null,checkerSize:null,geodesicCursorSegmentLength:null,cursorSegmentLength:null},pt=new st.a(Object(w.e)(),Object(w.e)()),gt=i(571),mt=function(e){Object(a.a)(i,e);var t=Object(s.a)(i);function i(e){var r;return Object(n.a)(this,i),(r=t.call(this,e)).type="area-measurement-3d",r.layerViewData=new ge,r._userUnit=null,r}return Object(r.a)(i,[{key:"unit",get:function(){return Object(c.t)(this._userUnit,this._defaultUnit)},set:function(e){this._userUnit=e}},{key:"result",get:function(){if(Object(c.j)(this.layerViewData.measurementData)){var e=this.layerViewData.measurementData;return{area:e.area,geodesicArea:e.geodesicArea,pathLength:e.pathLength,geodesicPathLength:e.geodesicPathLength,perimeterLength:e.perimeterLength}}return{area:null,geodesicArea:null,pathLength:null,geodesicPathLength:null,perimeterLength:null}}},{key:"initialize",value:function(){this.layerViewData.path.view=this.view,this.layerViewData.path.areaMeasurement=this.layer,this.analysisView=new lt({view:this.view,analysis:this.layer,layerView:this}),this.analysisController=new F({view:this.view,analysis:this.layer,layerViewData:this.layerViewData})}},{key:"destroy",value:function(){this.analysisController=Object(c.e)(this.analysisController),this.analysisView=Object(c.e)(this.analysisView)}},{key:"testData",get:function(){return{view:this.analysisView,controller:this.analysisController}}}]),i}(Object(d.a)(gt.a));Object(o.a)([Object(h.b)()],mt.prototype,"type",void 0),Object(o.a)([Object(h.b)()],mt.prototype,"analysisView",void 0),Object(o.a)([Object(h.b)()],mt.prototype,"analysisController",void 0),Object(o.a)([Object(h.b)()],mt.prototype,"unit",null),Object(o.a)([Object(h.b)()],mt.prototype,"layer",void 0),Object(o.a)([Object(h.b)()],mt.prototype,"result",null),Object(o.a)([Object(h.b)()],mt.prototype,"layerViewData",void 0),Object(o.a)([Object(h.b)(u.a)],mt.prototype,"_defaultUnit",void 0),Object(o.a)([Object(h.b)()],mt.prototype,"_userUnit",void 0);var vt=mt=Object(o.a)([Object(l.a)("esri.views.3d.layers.AreaMeasurementLayerView3D")],mt);t.default=vt},881:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return u}));var n,r,a=i(12),s=i(120),o=i(112),c=i(177),h=i(11),l=i(87);function u(e){var t=new l.a;return t.extensions.add("GL_OES_standard_derivatives"),t.attributes.add("position","vec3"),t.attributes.add("uv0","vec2"),t.vertex.uniforms.add("proj","mat4").add("view","mat4"),t.varyings.add("vUV","vec2"),e.multipassTerrainEnabled&&t.varyings.add("depth","float"),t.vertex.code.add(Object(h.a)(n||(n=Object(a.a)(["\n    void main(void) {\n      vUV = uv0;\n      ","\n      gl_Position = proj * view * vec4(position, 1.0);\n    }\n  "])),e.multipassTerrainEnabled?"depth = (view * vec4(position, 1.0)).z;":"")),e.multipassTerrainEnabled&&(t.fragment.include(s.a),t.include(o.b,e)),t.fragment.uniforms.add("size","vec2").add("color1","vec4").add("color2","vec4"),t.fragment.include(c.a),t.fragment.code.add(Object(h.a)(r||(r=Object(a.a)(["\n    void main() {\n      ","\n      vec2 uvScaled = vUV / (2.0 * size);\n\n      vec2 uv = fract(uvScaled - 0.25);\n      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);\n      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));\n      float t = mix(abs(ab.x + ab.y), 0.5, fade);\n\n      gl_FragColor = mix(color2, color1, t);\n      ","\n    }\n  "])),e.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":"",e.OITEnabled?"gl_FragColor = premultiplyAlpha(gl_FragColor);":"")),t}var d=Object.freeze({__proto__:null,build:u})}}]);
//# sourceMappingURL=88.e4b10692.chunk.js.map