(this.webpackJsonparcgis=this.webpackJsonparcgis||[]).push([[84],{1184:function(e,t,r){"use strict";r.r(t);var a=r(8),n=r.n(a),i=r(16),u=r(2),s=r(5),c=r(6),o=r(7),l=r(0),f=r(22),p=r(3),y=r(1),b=(r(17),r(18),r(15),r(10)),h=r(51),v=r(572),m=r(595),O=r(571),j=r(454),d=r(50),x=r(23),g=r(764),w=function(e){var t=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(){return Object(u.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"fetchPopupFeatures",value:function(){var e=Object(i.a)(n.a.mark((function e(t,r){var a,u,s,c=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.layer,t){e.next=3;break}return e.abrupt("return",Promise.reject(new f.a("tilelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:a})));case 3:if("tile"===a.type){e.next=5;break}return e.abrupt("return",Promise.reject(new f.a("tilelayerview:fetchPopupFeatures","Layer type should be 'tile'",{type:a.type})));case 5:return u=this.get("view.scale"),s=a.allSublayers.toArray().filter((function(e){var t=0===e.minScale||u<=e.minScale,r=0===e.maxScale||u>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&t&&r})),e.abrupt("return",Object(x.k)(s.map(function(){var e=Object(i.a)(n.a.mark((function e(a){var i,u,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.createQuery(),u=Object(p.j)(r)?r.event:null,s=Object(g.a)({renderer:a.renderer,event:u}),i.geometry=c.createFetchPopupFeaturesQueryGeometry(t,s),e.next=4,a.popupTemplate.getRequiredFields();case 4:return i.outFields=e.sent,e.next=7,a.queryFeatures(i);case 7:return e.abrupt("return",e.sent.features);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){var t;return(t=[]).concat.apply(t,Object(d.a)(e.map((function(e){return e.value})).filter(Boolean)))})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(e);return Object(l.a)([Object(y.b)()],t.prototype,"layer",void 0),t=Object(l.a)([Object(b.a)("esri.layers.mixins.TileLayerView")],t)},k=r(808),F=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(){var e;return Object(u.a)(this,r),(e=t.apply(this,arguments)).type="tile-3d",e}return Object(s.a)(r,[{key:"imageFormatIsOpaque",get:function(){return"jpg"===this.layer.tileInfo.format}},{key:"hasMixedImageFormats",get:function(){return"mixed"===this.layer.tileInfo.format}},{key:"dataLevelRange",get:function(){if(this.tileInfo){var e=this.tileInfo.lods,t=e[0].scale,r=e[e.length-1].scale;return this.levelRangeFromScaleRange(t,r)}return{minLevel:0,maxLevel:0}}},{key:"initialize",value:function(){if("web-tile"===this.layer.type){var e=this.layer.get("fullExtent.spatialReference"),t=this.layer.get("tileInfo.spatialReference");if(Object(p.i)(e)||Object(p.i)(t)||!Object(h.b)(e,t)){var r="defaults"===this.layer.originOf("fullExtent")||Object(p.i)(this.layer.fullExtent)?"SceneView requires fullExtent to be specified by the user on WebTileLayer":"SceneView requires fullExtent to be specified in the same spatial reference as tileInfo on WebTileLayer";this.addResolvingPromise(Promise.reject(new f.a("layerview:incompatible-fullextent",r)))}}this._addTilingSchemeMatchPromise()}},{key:"createFetchPopupFeaturesQueryGeometry",value:function(e,t){return Object(k.a)(e,t,this.view)}},{key:"doRefresh",value:function(){var e=Object(i.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.suspended||this.emit("data-changed");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Object(j.a)(Object(m.a)(w(Object(v.a)(O.a)))));Object(l.a)([Object(y.b)({readOnly:!0})],F.prototype,"imageFormatIsOpaque",null),Object(l.a)([Object(y.b)({readOnly:!0})],F.prototype,"hasMixedImageFormats",null),Object(l.a)([Object(y.b)({aliasOf:"layer.fullExtent"})],F.prototype,"fullExtent",void 0),Object(l.a)([Object(y.b)()],F.prototype,"layer",void 0),Object(l.a)([Object(y.b)({aliasOf:"layer.tileInfo"})],F.prototype,"tileInfo",void 0),Object(l.a)([Object(y.b)({readOnly:!0})],F.prototype,"dataLevelRange",null);var I=F=Object(l.a)([Object(b.a)("esri.views.3d.layers.TileLayerView3D")],F);t.default=I},764:function(e,t,r){"use strict";function a(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function n(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,a=0;a<e.length;a++){var n=e[a].size;"number"==typeof n&&(t+=n,r++)}return t/r}(e.stops):t}function i(e,t){if(!t)return e;var r=t.filter((function(e){return"size"===e.type})).map((function(t){var r=t.maxSize,a=t.minSize;return(n(r,e)+n(a,e))/2})),a=0,i=r.length;if(0===i)return e;for(var u=0;u<i;u++)a+=r[u];var s=Math.floor(a/i);return Math.max(s,e)}function u(e){var t=e&&e.renderer,r="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return r;var n="visualVariables"in t?i(r,t.visualVariables):r;if("simple"===t.type)return a(n,t.symbol);if("unique-value"===t.type){var u=n;return t.uniqueValueInfos.forEach((function(e){u=a(u,e.symbol)})),u}if("class-breaks"===t.type){var s=n;return t.classBreakInfos.forEach((function(e){s=a(s,e.symbol)})),s}return t.type,n}r.d(t,"a",(function(){return u}))},808:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r(126);var a=r(3),n=r(69),i=(r(764),r(66));function u(e,t,r){var u,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new i.a;if("2d"===r.type)u=t*r.resolution;else if("3d"===r.type){var c=r.overlayPixelSizeInMapUnits(e),o=r.basemapSpatialReference;u=Object(a.j)(o)&&!o.equals(r.spatialReference)?Object(n.f)(o)/Object(n.f)(r.spatialReference):t*c}var l=e.x-u,f=e.y-u,p=e.x+u,y=e.y+u,b=r.spatialReference;return s.xmin=Math.min(l,p),s.ymin=Math.min(f,y),s.xmax=Math.max(l,p),s.ymax=Math.max(f,y),s.spatialReference=b,s}new i.a}}]);
//# sourceMappingURL=84.40640fd9.chunk.js.map